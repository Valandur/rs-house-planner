import{S as de,i as ve,s as ce,e as re,b as $,H as Q,h as _,k as g,q as C,l as b,m as E,r as W,n as R,G as h,J as ae,u as F,a as q,c as P,K as vt,L as ee,M as Be,N as rt,o as xt,O as oe,P as sl,v as Ie,d as z,f as De,g as Y,C as nl,D as rl,E as al,F as il,Q as at,R as Ae,T as Re,p as J,U as Pe,y as pe,z as ge,A as be,B as ke,V as et,I as cl,W as fl}from"../chunks/index.83a7776e.js";import{p as ul}from"../chunks/stores.46429ed8.js";import{j as Le}from"../chunks/singletons.cf9d92ab.js";Le.disable_scroll_handling;const qe=Le.goto;Le.invalidate;Le.invalidateAll;Le.preload_data;Le.preload_code;Le.before_navigate;Le.after_navigate;const me=[{level:0,rooms:0,extent:[0,0]},{level:1,rooms:21,extent:[3,3]},{level:15,rooms:21,extent:[4,4]},{level:30,rooms:21,extent:[5,5]},{level:38,rooms:22,extent:[5,5]},{level:44,rooms:23,extent:[5,5]},{level:45,rooms:23,extent:[6,6]},{level:50,rooms:24,extent:[6,6]},{level:56,rooms:25,extent:[6,6]},{level:60,rooms:25,extent:[7,7]},{level:62,rooms:26,extent:[7,7]},{level:68,rooms:27,extent:[7,7]},{level:74,rooms:28,extent:[7,7]},{level:80,rooms:29,extent:[7,7]},{level:86,rooms:30,extent:[7,7]},{level:92,rooms:31,extent:[7,7]},{level:96,rooms:32,extent:[7,7]},{level:99,rooms:33,extent:[7,7]}],he=9,we=9,hl=(l,e)=>{const o={house:l,num:e,rooms:[]};for(let t=0;t<we;t++){o.rooms.push([]);for(let s=0;s<he;s++)o.rooms[t].push(null)}return o},_l=l=>{const e=l.floors.map(m=>m.rooms).flat(2).filter(m=>!!m);let o=0,t=he,s=we,n=0,r=0,a=null;const i=[],c=[];let u=!1;for(const m of e)o+=m.type.cost,a=a&&m.type.minLvl<=a.type.minLvl?a:m,t=Math.min(t,m.x),n=Math.max(n,m.x),s=Math.min(s,m.y),r=Math.max(r,m.y),(m.type.key==="garden"||m.type.key==="formal_garden")&&(u=!0);if(u||i.push("You have must have at least one 'Garden' or 'Formal Garden' to place an exit portal!"),a&&c.push({name:"Highest Level Room",value:a.type.name,limit:"-",level:a.type.minLvl}),e.length>0){const m=me.find(D=>D.rooms>=e.length);if(m)c.push({name:"Number of Rooms",value:e.length,limit:m.rooms,level:m.level});else{const D=me[me.length-1].rooms;i.push(`You have too many rooms (${e.length})! You cannot have more than ${D}`)}}const f=Math.max(0,n-t+1);if(f>0){const m=me.find(D=>D.extent[0]>=f);if(m)c.push({name:"Extent X",value:f,limit:m.extent[0],level:m.level});else{const D=me[me.length-1].extent[0];i.push(`Your house is too wide (${f})! It can be at most ${D} wide`)}}const k=Math.max(0,r-s+1);if(k>0){const m=me.find(D=>D.extent[1]>=k);if(m)c.push({name:"Extent Y",value:k,limit:m.extent[1],level:m.level});else{const D=me[me.length-1].extent[1];i.push(`Your house is too tall (${k})! It can be at most ${D} tall`)}}return c.sort((m,D)=>D.level-m.level),{totalPrice:o,levelRequirements:c,extent:[f,k],errors:i}},Ge=-1,tt=1,el=(l="Default")=>{const e={name:l,floors:[]};for(let o=Ge;o<=tt;o++)e.floors.push(hl(e,o));return e};var Te=(l=>(l[l.North=0]="North",l[l.East=1]="East",l[l.South=2]="South",l[l.West=3]="West",l))(Te||{});const lt=l=>Te[l].toLowerCase(),it=(l,e=1)=>(l+=e)%4,ot=l=>(l==null?void 0:l.type.doors.map(e=>it(e,l.orientation)))||[],pt=(l,e,o,t)=>({floor:l,x:e,y:o,type:t,orientation:Te.North,hotspots:new Array(t.hotspots.length).map(()=>null)}),N=Te,Ue=[{key:"garden",name:"Garden",cost:1e3,minLvl:1,doors:[N.North,N.East,N.South,N.West],bg:"#034a03",hotspots:[{name:"Centrepiece",options:["exit_portal","decorative_rock","pond","imp_statue","dungeon_entrance"]},{name:"Tree",options:[]},{name:"Big Tree",options:[]},{name:"Small Plant 1",options:["plant","small_fern","fern"]},{name:"Small Plant 2",options:["dock_leaf","thistle","reeds"]},{name:"Big Plant 1",options:[]},{name:"Big Plant 2",options:[]}],open:!0,floors:[0]},{key:"parlour",name:"Parlour",cost:1e3,minLvl:1,doors:[N.East,N.South,N.West],bg:"#424242",hotspots:[]},{key:"kitchen",name:"Kitchen",cost:5e3,minLvl:5,doors:[N.East,N.South],bg:"#542808",hotspots:[]},{key:"dining_room",name:"Dining Room",cost:5e3,minLvl:10,doors:[N.East,N.South,N.West],bg:"#424242",hotspots:[]},{key:"workshop",name:"Workshop",cost:1e4,minLvl:15,doors:[N.North,N.South],bg:"#542808",hotspots:[]},{key:"bedroom",name:"Bedroom",cost:1e4,minLvl:20,doors:[N.East,N.South],bg:"#424242",hotspots:[]},{key:"skill_hall",name:"Skill Hall",cost:15e3,minLvl:25,doors:[N.North,N.East,N.South,N.West],bg:"#3f0569",hotspots:[],stairs:!0},{key:"games_room",name:"Games Room",cost:25e3,minLvl:30,doors:[N.East,N.South,N.West],bg:"#731e4c",hotspots:[]},{key:"combat_room",name:"Combat Room",cost:25e3,minLvl:30,doors:[N.East,N.South,N.West],bg:"#731e4c",hotspots:[]},{key:"quest_hall",name:"Quest Hall",cost:25e3,minLvl:32,doors:[N.North,N.East,N.South,N.West],bg:"#3f0569",hotspots:[],stairs:!0},{key:"menagerie",name:"Menagerie",cost:3e4,minLvl:37,doors:[N.North,N.East,N.South,N.West],bg:"#034a03",hotspots:[],open:!0,floors:[0]},{key:"study",name:"Study",cost:5e4,minLvl:40,doors:[N.East,N.South,N.West],bg:"#542808",hotspots:[]},{key:"costume_room",name:"Costume Room",cost:5e4,minLvl:42,doors:[N.South],bg:"#731e4c",hotspots:[]},{key:"chapel",name:"Chapel",cost:5e4,minLvl:45,doors:[N.East,N.South],bg:"#542808",hotspots:[]},{key:"portal_chamber",name:"Portal Chamber",cost:1e5,minLvl:50,doors:[N.South],bg:"#542808",hotspots:[]},{key:"formal_garden",name:"Formal Garden",cost:75e3,minLvl:55,doors:[N.North,N.East,N.South,N.West],bg:"#034a03",hotspots:[],open:!0,floors:[0]},{key:"throne_room",name:"Throne Room",cost:15e4,minLvl:60,doors:[N.South],bg:"#040459",hotspots:[],floors:[0]},{key:"aquarium",name:"Aquarium",cost:2e5,minLvl:63,doors:[N.North,N.East,N.South,N.West],bg:"#542808",hotspots:[],floors:[0]},{key:"oubliette",name:"Oubliette",cost:15e4,minLvl:65,doors:[N.North,N.East,N.South,N.West],bg:"#800303",hotspots:[],floors:[-1]},{key:"dungeon_corridor",name:"Dungeon Corridor",cost:7500,minLvl:70,doors:[N.North,N.South],bg:"#800303",hotspots:[],floors:[-1]},{key:"dungeon_junction",name:"Dungeon Junction",cost:7500,minLvl:70,doors:[N.North,N.East,N.South,N.West],bg:"#800303",hotspots:[],floors:[-1]},{key:"dungeon_stairs",name:"Dungeon Stairs",cost:7500,minLvl:70,doors:[N.North,N.East,N.South,N.West],bg:"#800303",hotspots:[],stairs:!0,floors:[-1]},{key:"dungeon_pit",name:"Dungeon Pit",cost:1e4,minLvl:70,doors:[N.North,N.East,N.South,N.West],bg:"#800303",hotspots:[],floors:[-1]},{key:"treasure_room",name:"Treasure Room",cost:25e4,minLvl:75,doors:[N.South],bg:"#800303",hotspots:[],floors:[-1]}],st=new Map;for(const l of Ue){if(st.has(l.key))throw new Error(`Duplicate room type ${l.key}`);st.set(l.key,l)}const tl=l=>{const e=st.get(l);if(!e)throw new Error(`Unknown room type ${l}`);return e},ct=[{key:"exit_portal",name:"Exit Portal",minLvl:1,exp:100,materials:{iron_bar:10}},{key:"decorative_rock",name:"Decorative Rock",minLvl:5,exp:100,materials:{limestone_brick:5}},{key:"pond",name:"Pond",minLvl:10,exp:100,materials:{soft_clay:10}},{key:"imp_statue",name:"Imp Statue",minLvl:15,exp:150,materials:{limestone_brick:5,soft_clay:5}},{key:"dungeon_entrance",name:"Dungeon Entrance",minLvl:70,exp:500,materials:{marble_block:1}},{key:"plant",name:"Plant",minLvl:1,exp:31,materials:{bagged_plant_1:1}},{key:"small_fern",name:"Small Fern",minLvl:6,exp:70,materials:{bagged_plant_2:1}},{key:"fern",name:"Fern",minLvl:12,exp:100,materials:{bagged_plant_3:1}},{key:"dock_leaf",name:"Dock Leaf",minLvl:1,exp:31,materials:{bagged_plant_1:1}},{key:"thistle",name:"Thistle",minLvl:6,exp:70,materials:{bagged_plant_2:1}},{key:"reeds",name:"Reeds",minLvl:12,exp:100,materials:{bagged_plant_3:1}}],nt=new Map;for(const l of ct){if(nt.has(l.key))throw new Error(`Duplicate furniture type ${l.key}`);nt.set(l.key,l)}const gt=l=>{const e=nt.get(l);if(!e)throw new Error(`Unknown furniture type ${l}`);return e},ml=(l,e)=>{if(!l)return null;const o=l.hotspots.map(t=>t?ct.indexOf(t):"").join("-");return`${e}-${Ue.indexOf(l.type)}-${l.orientation}-${o}`},Se=l=>{const e=new URLSearchParams;e.set("n",l.name);for(const o of l.floors){const t=o.rooms.flat().map(ml).filter(s=>!!s).join(".");e.set(`f${o.num}`,t)}return e},dl=(l,e)=>{const o=e.split("-"),t=Number(o[0]),s=t%he,n=Math.floor(t/he),r=Ue[Number(o[1])];if(!r)throw new Error(`Unknown room type ${o[1]}`);const a=Number(o[2]),i=[];for(let c=0;c<r.hotspots.length;c++)i[c]=o[c+3]?ct[Number(o[c+3])]:null;return{floor:l,x:s,y:n,type:r,orientation:a,hotspots:i}},ll=l=>{const e=l.get("n")||void 0,o=el(e);for(const t of l.keys()){if(!t.startsWith("f"))continue;const s=Number(t.substring(1)),n=o.floors.find(a=>a.num===s);if(!n)throw new Error(`Unknown floor ${s}`);const r=l.get(t);if(r){const a=r.split(".");for(const i of a){const c=dl(n,i);n.rooms[c.y][c.x]=c}}}return o};function bt(l,e,o){const t=l.slice();return t[1]=e[o],t}function vl(l){let e,o;return{c(){e=g("div"),o=C("Your house looks good to go!"),this.h()},l(t){e=b(t,"DIV",{class:!0});var s=E(e);o=W(s,"Your house looks good to go!"),s.forEach(_),this.h()},h(){R(e,"class","alert success svelte-159br2x")},m(t,s){$(t,e,s),h(e,o)},p:Q,d(t){t&&_(e)}}}function pl(l){let e,o=l[0],t=[];for(let s=0;s<o.length;s+=1)t[s]=kt(bt(l,o,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=re()},l(s){for(let n=0;n<t.length;n+=1)t[n].l(s);e=re()},m(s,n){for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(s,n);$(s,e,n)},p(s,n){if(n&1){o=s[0];let r;for(r=0;r<o.length;r+=1){const a=bt(s,o,r);t[r]?t[r].p(a,n):(t[r]=kt(a),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=o.length}},d(s){ae(t,s),s&&_(e)}}}function kt(l){let e,o=l[1]+"",t;return{c(){e=g("div"),t=C(o),this.h()},l(s){e=b(s,"DIV",{class:!0});var n=E(e);t=W(n,o),n.forEach(_),this.h()},h(){R(e,"class","alert error svelte-159br2x")},m(s,n){$(s,e,n),h(e,t)},p(s,n){n&1&&o!==(o=s[1]+"")&&F(t,o)},d(s){s&&_(e)}}}function gl(l){let e;function o(n,r){return n[0].length>0?pl:vl}let t=o(l),s=t(l);return{c(){s.c(),e=re()},l(n){s.l(n),e=re()},m(n,r){s.m(n,r),$(n,e,r)},p(n,[r]){t===(t=o(n))&&s?s.p(n,r):(s.d(1),s=t(n),s&&(s.c(),s.m(e.parentNode,e)))},i:Q,o:Q,d(n){s.d(n),n&&_(e)}}}function bl(l,e,o){let{errors:t}=e;return l.$$set=s=>{"errors"in s&&o(0,t=s.errors)},[t]}class kl extends de{constructor(e){super(),ve(this,e,bl,gl,ce,{errors:0})}}function Et(l,e,o){const t=l.slice();return t[10]=e[o],t}function yt(l){let e,o,t=l[10]+"",s,n,r,a,i,c,u,f,k,m,D,V,S;function I(){return l[7](l[10])}function v(){return l[8](l[10])}return{c(){e=g("div"),o=g("div"),s=C(t),n=q(),r=g("div"),a=g("button"),i=g("i"),u=q(),f=g("div"),k=g("button"),m=g("i"),D=q(),this.h()},l(p){e=b(p,"DIV",{class:!0});var w=E(e);o=b(w,"DIV",{class:!0});var d=E(o);s=W(d,t),d.forEach(_),n=P(w),r=b(w,"DIV",{class:!0});var y=E(r);a=b(y,"BUTTON",{});var L=E(a);i=b(L,"I",{class:!0}),E(i).forEach(_),L.forEach(_),y.forEach(_),u=P(w),f=b(w,"DIV",{class:!0});var T=E(f);k=b(T,"BUTTON",{});var O=E(k);m=b(O,"I",{class:!0}),E(m).forEach(_),O.forEach(_),T.forEach(_),D=P(w),w.forEach(_),this.h()},h(){R(o,"class","name svelte-14wozrp"),R(i,"class","icofont-folder-open"),a.disabled=c=l[10]===l[0].name,R(r,"class","svelte-14wozrp"),R(m,"class","icofont-ui-delete"),R(f,"class","svelte-14wozrp"),R(e,"class","svelte-14wozrp"),oe(e,"current",l[10]===l[0].name)},m(p,w){$(p,e,w),h(e,o),h(o,s),h(e,n),h(e,r),h(r,a),h(a,i),h(e,u),h(e,f),h(f,k),h(k,m),h(e,D),V||(S=[ee(a,"click",I),ee(k,"click",v)],V=!0)},p(p,w){l=p,w&2&&t!==(t=l[10]+"")&&F(s,t),w&3&&c!==(c=l[10]===l[0].name)&&(a.disabled=c),w&3&&oe(e,"current",l[10]===l[0].name)},d(p){p&&_(e),V=!1,Be(S)}}}function El(l){let e,o,t,s,n,r,a,i,c,u,f,k,m,D,V,S,I,v,p,w,d,y=l[1],L=[];for(let T=0;T<y.length;T+=1)L[T]=yt(Et(l,y,T));return{c(){e=g("h2"),o=C("Getting started"),t=q(),s=g("ul"),n=g("li"),r=C("Click a cell to the left to place a new room"),a=q(),i=g("h2"),c=C("Saved houses"),u=q(),f=g("div"),k=g("div"),m=g("div"),D=g("input"),V=q(),S=g("div"),I=g("button"),v=g("i"),p=q();for(let T=0;T<L.length;T+=1)L[T].c();this.h()},l(T){e=b(T,"H2",{class:!0});var O=E(e);o=W(O,"Getting started"),O.forEach(_),t=P(T),s=b(T,"UL",{class:!0});var B=E(s);n=b(B,"LI",{});var M=E(n);r=W(M,"Click a cell to the left to place a new room"),M.forEach(_),B.forEach(_),a=P(T),i=b(T,"H2",{class:!0});var A=E(i);c=W(A,"Saved houses"),A.forEach(_),u=P(T),f=b(T,"DIV",{class:!0});var Z=E(f);k=b(Z,"DIV",{class:!0});var X=E(k);m=b(X,"DIV",{class:!0});var te=E(m);D=b(te,"INPUT",{type:!0}),te.forEach(_),V=P(X),S=b(X,"DIV",{class:!0});var U=E(S);I=b(U,"BUTTON",{});var K=E(I);v=b(K,"I",{class:!0}),E(v).forEach(_),K.forEach(_),U.forEach(_),X.forEach(_),p=P(Z);for(let ie=0;ie<L.length;ie+=1)L[ie].l(Z);Z.forEach(_),this.h()},h(){R(e,"class","svelte-14wozrp"),R(s,"class","svelte-14wozrp"),R(i,"class","svelte-14wozrp"),R(D,"type","text"),R(m,"class","name svelte-14wozrp"),R(v,"class","icofont-save"),R(S,"class","svelte-14wozrp"),R(k,"class","svelte-14wozrp"),R(f,"class","houses-list svelte-14wozrp")},m(T,O){$(T,e,O),h(e,o),$(T,t,O),$(T,s,O),h(s,n),h(n,r),$(T,a,O),$(T,i,O),h(i,c),$(T,u,O),$(T,f,O),h(f,k),h(k,m),h(m,D),vt(D,l[0].name),h(k,V),h(k,S),h(S,I),h(I,v),h(f,p);for(let B=0;B<L.length;B+=1)L[B]&&L[B].m(f,null);w||(d=[ee(D,"input",l[5]),ee(I,"click",l[6])],w=!0)},p(T,[O]){if(O&1&&D.value!==T[0].name&&vt(D,T[0].name),O&27){y=T[1];let B;for(B=0;B<y.length;B+=1){const M=Et(T,y,B);L[B]?L[B].p(M,O):(L[B]=yt(M),L[B].c(),L[B].m(f,null))}for(;B<L.length;B+=1)L[B].d(1);L.length=y.length}},i:Q,o:Q,d(T){T&&_(e),T&&_(t),T&&_(s),T&&_(a),T&&_(i),T&&_(u),T&&_(f),ae(L,T),w=!1,Be(d)}}}function yl(l,e,o){let{house:t}=e,s=[];const n=rt();xt(()=>{const m=localStorage.getItem("houses");m&&o(1,s=JSON.parse(m))});const r=m=>{o(1,s=s.includes(m.name)?s:[...s,m.name]);const D=Se(m).toString();localStorage.setItem(`house-${m.name}`,D),localStorage.setItem("houses",JSON.stringify(s)),n("save",{house:m})},a=m=>{const D=localStorage.getItem(`house-${m}`);if(D){const V=ll(new URLSearchParams(D));n("open",{house:V})}},i=m=>{o(1,s=s.filter(D=>D!==m)),localStorage.removeItem(`house-${m}`),localStorage.setItem("houses",JSON.stringify(s))};function c(){t.name=this.value,o(0,t)}const u=()=>r(t),f=m=>a(m),k=m=>i(m);return l.$$set=m=>{"house"in m&&o(0,t=m.house)},[t,s,r,a,i,c,u,f,k]}class wl extends de{constructor(e){super(),ve(this,e,yl,El,ce,{house:0})}}function wt(l,e,o){const t=l.slice();return t[2]=e[o],t}function Tt(l){let e,o,t=l[2].name+"",s,n,r,a=l[2].value+"",i,c,u,f=l[2].limit+"",k,m,D,V=l[2].level+"",S,I;return{c(){e=g("tr"),o=g("td"),s=C(t),n=q(),r=g("td"),i=C(a),c=q(),u=g("td"),k=C(f),m=q(),D=g("td"),S=C(V),I=q(),this.h()},l(v){e=b(v,"TR",{});var p=E(e);o=b(p,"TD",{});var w=E(o);s=W(w,t),w.forEach(_),n=P(p),r=b(p,"TD",{});var d=E(r);i=W(d,a),d.forEach(_),c=P(p),u=b(p,"TD",{});var y=E(u);k=W(y,f),y.forEach(_),m=P(p),D=b(p,"TD",{});var L=E(D);S=W(L,V),L.forEach(_),I=P(p),p.forEach(_),this.h()},h(){oe(e,"max",l[2].level===l[1])},m(v,p){$(v,e,p),h(e,o),h(o,s),h(e,n),h(e,r),h(r,i),h(e,c),h(e,u),h(u,k),h(e,m),h(e,D),h(D,S),h(e,I)},p(v,p){p&1&&t!==(t=v[2].name+"")&&F(s,t),p&1&&a!==(a=v[2].value+"")&&F(i,a),p&1&&f!==(f=v[2].limit+"")&&F(k,f),p&1&&V!==(V=v[2].level+"")&&F(S,V),p&3&&oe(e,"max",v[2].level===v[1])},d(v){v&&_(e)}}}function Tl(l){let e,o,t,s,n,r,a,i,c,u,f,k,m,D,V,S,I=l[0],v=[];for(let p=0;p<I.length;p+=1)v[p]=Tt(wt(l,I,p));return{c(){e=g("table"),o=g("thead"),t=g("tr"),s=g("th"),n=C("Requirement"),r=q(),a=g("th"),i=C("Current"),c=q(),u=g("th"),f=C("Limit"),k=q(),m=g("th"),D=C("Min. Level"),V=q(),S=g("tbody");for(let p=0;p<v.length;p+=1)v[p].c();this.h()},l(p){e=b(p,"TABLE",{class:!0});var w=E(e);o=b(w,"THEAD",{});var d=E(o);t=b(d,"TR",{});var y=E(t);s=b(y,"TH",{});var L=E(s);n=W(L,"Requirement"),L.forEach(_),r=P(y),a=b(y,"TH",{});var T=E(a);i=W(T,"Current"),T.forEach(_),c=P(y),u=b(y,"TH",{});var O=E(u);f=W(O,"Limit"),O.forEach(_),k=P(y),m=b(y,"TH",{});var B=E(m);D=W(B,"Min. Level"),B.forEach(_),y.forEach(_),d.forEach(_),V=P(w),S=b(w,"TBODY",{});var M=E(S);for(let A=0;A<v.length;A+=1)v[A].l(M);M.forEach(_),w.forEach(_),this.h()},h(){R(e,"class","svelte-fdv1qg")},m(p,w){$(p,e,w),h(e,o),h(o,t),h(t,s),h(s,n),h(t,r),h(t,a),h(a,i),h(t,c),h(t,u),h(u,f),h(t,k),h(t,m),h(m,D),h(e,V),h(e,S);for(let d=0;d<v.length;d+=1)v[d]&&v[d].m(S,null)},p(p,[w]){if(w&3){I=p[0];let d;for(d=0;d<I.length;d+=1){const y=wt(p,I,d);v[d]?v[d].p(y,w):(v[d]=Tt(y),v[d].c(),v[d].m(S,null))}for(;d<v.length;d+=1)v[d].d(1);v.length=I.length}},i:Q,o:Q,d(p){p&&_(e),ae(v,p)}}}function Il(l,e,o){let t,{requirements:s}=e;return l.$$set=n=>{"requirements"in n&&o(0,s=n.requirements)},l.$$.update=()=>{var n;l.$$.dirty&1&&o(1,t=(n=s[0])==null?void 0:n.level)},[s,t]}class Dl extends de{constructor(e){super(),ve(this,e,Il,Tl,ce,{requirements:0})}}function It(l,e,o){const t=l.slice();return t[2]=e[o].type,t[0]=e[o].rooms,t}function Dt(l){let e,o,t=l[2].name+"",s,n,r,a=l[2].minLvl+"",i,c,u,f=l[2].cost+"",k,m,D,V=(l[0].length||"-")+"",S,I,v,p=(l[0].length>0?l[0].length*l[2].cost:"-")+"",w,d;return{c(){e=g("tr"),o=g("td"),s=C(t),n=q(),r=g("td"),i=C(a),c=q(),u=g("td"),k=C(f),m=q(),D=g("td"),S=C(V),I=q(),v=g("td"),w=C(p),d=q(),this.h()},l(y){e=b(y,"TR",{});var L=E(e);o=b(L,"TD",{});var T=E(o);s=W(T,t),T.forEach(_),n=P(L),r=b(L,"TD",{class:!0});var O=E(r);i=W(O,a),O.forEach(_),c=P(L),u=b(L,"TD",{class:!0});var B=E(u);k=W(B,f),B.forEach(_),m=P(L),D=b(L,"TD",{class:!0});var M=E(D);S=W(M,V),M.forEach(_),I=P(L),v=b(L,"TD",{class:!0});var A=E(v);w=W(A,p),A.forEach(_),d=P(L),L.forEach(_),this.h()},h(){R(r,"class","right"),R(u,"class","right"),R(D,"class","right"),R(v,"class","right")},m(y,L){$(y,e,L),h(e,o),h(o,s),h(e,n),h(e,r),h(r,i),h(e,c),h(e,u),h(u,k),h(e,m),h(e,D),h(D,S),h(e,I),h(e,v),h(v,w),h(e,d)},p(y,L){L&2&&t!==(t=y[2].name+"")&&F(s,t),L&2&&a!==(a=y[2].minLvl+"")&&F(i,a),L&2&&f!==(f=y[2].cost+"")&&F(k,f),L&2&&V!==(V=(y[0].length||"-")+"")&&F(S,V),L&2&&p!==(p=(y[0].length>0?y[0].length*y[2].cost:"-")+"")&&F(w,p)},d(y){y&&_(e)}}}function Ll(l){let e,o,t,s,n,r,a,i,c,u,f,k,m,D,V,S,I,v,p,w=l[1],d=[];for(let y=0;y<w.length;y+=1)d[y]=Dt(It(l,w,y));return{c(){e=g("table"),o=g("thead"),t=g("tr"),s=g("th"),n=C("Type"),r=q(),a=g("th"),i=C("Level"),c=q(),u=g("th"),f=C("Cost"),k=q(),m=g("th"),D=C("Amount"),V=q(),S=g("th"),I=C("Total"),v=q(),p=g("tbody");for(let y=0;y<d.length;y+=1)d[y].c();this.h()},l(y){e=b(y,"TABLE",{class:!0});var L=E(e);o=b(L,"THEAD",{});var T=E(o);t=b(T,"TR",{});var O=E(t);s=b(O,"TH",{});var B=E(s);n=W(B,"Type"),B.forEach(_),r=P(O),a=b(O,"TH",{class:!0});var M=E(a);i=W(M,"Level"),M.forEach(_),c=P(O),u=b(O,"TH",{class:!0});var A=E(u);f=W(A,"Cost"),A.forEach(_),k=P(O),m=b(O,"TH",{class:!0});var Z=E(m);D=W(Z,"Amount"),Z.forEach(_),V=P(O),S=b(O,"TH",{class:!0});var X=E(S);I=W(X,"Total"),X.forEach(_),O.forEach(_),T.forEach(_),v=P(L),p=b(L,"TBODY",{});var te=E(p);for(let U=0;U<d.length;U+=1)d[U].l(te);te.forEach(_),L.forEach(_),this.h()},h(){R(a,"class","right"),R(u,"class","right"),R(m,"class","right"),R(S,"class","right"),R(e,"class","svelte-fdv1qg")},m(y,L){$(y,e,L),h(e,o),h(o,t),h(t,s),h(s,n),h(t,r),h(t,a),h(a,i),h(t,c),h(t,u),h(u,f),h(t,k),h(t,m),h(m,D),h(t,V),h(t,S),h(S,I),h(e,v),h(e,p);for(let T=0;T<d.length;T+=1)d[T]&&d[T].m(p,null)},p(y,[L]){if(L&2){w=y[1];let T;for(T=0;T<w.length;T+=1){const O=It(y,w,T);d[T]?d[T].p(O,L):(d[T]=Dt(O),d[T].c(),d[T].m(p,null))}for(;T<d.length;T+=1)d[T].d(1);d.length=w.length}},i:Q,o:Q,d(y){y&&_(e),ae(d,y)}}}function Sl(l,e,o){let t,{rooms:s}=e;return l.$$set=n=>{"rooms"in n&&o(0,s=n.rooms)},l.$$.update=()=>{l.$$.dirty&1&&o(1,t=Ue.map(n=>({type:n,rooms:s.filter(r=>(r==null?void 0:r.type.key)===n.key)})).sort((n,r)=>r.rooms.length-n.rooms.length))},[s,t]}class Rl extends de{constructor(e){super(),ve(this,e,Sl,Ll,ce,{rooms:0})}}function Xe(l,{delay:e=0,duration:o=400,easing:t=sl}={}){const s=+getComputedStyle(l).opacity;return{delay:e,duration:o,easing:t,css:n=>`opacity: ${n*s}`}}const Nl=l=>({tab:l&4}),Lt=l=>({tab:l[2]});function St(l,e,o){const t=l.slice();return t[6]=e[o],t}function Rt(l){let e,o=l[6]+"",t,s,n,r;function a(){return l[5](l[6])}return{c(){e=g("button"),t=C(o),s=q(),this.h()},l(i){e=b(i,"BUTTON",{class:!0});var c=E(e);t=W(c,o),s=P(c),c.forEach(_),this.h()},h(){R(e,"class","svelte-44ndb8"),oe(e,"active",l[2]===l[6])},m(i,c){$(i,e,c),h(e,t),h(e,s),n||(r=ee(e,"click",a),n=!0)},p(i,c){l=i,c&1&&o!==(o=l[6]+"")&&F(t,o),c&5&&oe(e,"active",l[2]===l[6])},d(i){i&&_(e),n=!1,r()}}}function Nt(l){let e,o,t;const s=l[4].default,n=nl(s,l,l[3],Lt);return{c(){e=g("div"),n&&n.c(),this.h()},l(r){e=b(r,"DIV",{class:!0});var a=E(e);n&&n.l(a),a.forEach(_),this.h()},h(){R(e,"class","tab svelte-44ndb8")},m(r,a){$(r,e,a),n&&n.m(e,null),t=!0},p(r,a){n&&n.p&&(!t||a&12)&&rl(n,s,r,r[3],t?il(s,r[3],a,Nl):al(r[3]),Lt)},i(r){t||(Y(n,r),r&&at(()=>{t&&(o||(o=Ae(e,Xe,{},!0)),o.run(1))}),t=!0)},o(r){z(n,r),r&&(o||(o=Ae(e,Xe,{},!1)),o.run(0)),t=!1},d(r){r&&_(e),n&&n.d(r),r&&o&&o.end()}}}function Vl(l){let e,o,t,s,n=l[2],r,a=l[0],i=[];for(let u=0;u<a.length;u+=1)i[u]=Rt(St(l,a,u));let c=Nt(l);return{c(){e=g("div"),o=g("div");for(let u=0;u<i.length;u+=1)i[u].c();t=q(),s=g("div"),c.c(),this.h()},l(u){e=b(u,"DIV",{class:!0});var f=E(e);o=b(f,"DIV",{class:!0});var k=E(o);for(let D=0;D<i.length;D+=1)i[D].l(k);k.forEach(_),t=P(f),s=b(f,"DIV",{class:!0});var m=E(s);c.l(m),m.forEach(_),f.forEach(_),this.h()},h(){R(o,"class","navigation"),R(s,"class","content svelte-44ndb8"),R(e,"class","container svelte-44ndb8"),oe(e,"inverted",l[1])},m(u,f){$(u,e,f),h(e,o);for(let k=0;k<i.length;k+=1)i[k]&&i[k].m(o,null);h(e,t),h(e,s),c.m(s,null),r=!0},p(u,[f]){if(f&5){a=u[0];let k;for(k=0;k<a.length;k+=1){const m=St(u,a,k);i[k]?i[k].p(m,f):(i[k]=Rt(m),i[k].c(),i[k].m(o,null))}for(;k<i.length;k+=1)i[k].d(1);i.length=a.length}f&4&&ce(n,n=u[2])?(Ie(),z(c,1,1,Q),De(),c=Nt(u),c.c(),Y(c,1),c.m(s,null)):c.p(u,f),(!r||f&2)&&oe(e,"inverted",u[1])},i(u){r||(Y(c),r=!0)},o(u){z(c),r=!1},d(u){u&&_(e),ae(i,u),c.d(u)}}}function Ol(l,e,o){let{$$slots:t={},$$scope:s}=e,{tabs:n}=e,{inverted:r=!1}=e,a=n[0];const i=c=>o(2,a=c);return l.$$set=c=>{"tabs"in c&&o(0,n=c.tabs),"inverted"in c&&o(1,r=c.inverted),"$$scope"in c&&o(3,s=c.$$scope)},[n,r,a,s,t,i]}class ol extends de{constructor(e){super(),ve(this,e,Ol,Vl,ce,{tabs:0,inverted:1})}}function Vt(l,e,o){const t=l.slice();return t[8]=e[o],t}function ql(l){let e,o=l[1]&&Ot(l);return{c(){e=g("div"),o&&o.c(),this.h()},l(t){e=b(t,"DIV",{class:!0});var s=E(e);o&&o.l(s),s.forEach(_),this.h()},h(){R(e,"class","content svelte-1t8fwgu"),oe(e,"below",!!l[1]),oe(e,"supported",l[1]&&!l[1].type.open)},m(t,s){$(t,e,s),o&&o.m(e,null)},p(t,s){t[1]?o?o.p(t,s):(o=Ot(t),o.c(),o.m(e,null)):o&&(o.d(1),o=null),s&2&&oe(e,"below",!!t[1]),s&2&&oe(e,"supported",t[1]&&!t[1].type.open)},d(t){t&&_(e),o&&o.d()}}}function Pl(l){let e,o,t,s,n=l[0].type.name+"",r,a,i,c=l[5],u=[];for(let f=0;f<c.length;f+=1)u[f]=qt(Vt(l,c,f));return{c(){e=g("div"),o=q(),t=g("div"),s=g("div"),r=C(n),a=q();for(let f=0;f<u.length;f+=1)u[f].c();i=re(),this.h()},l(f){e=b(f,"DIV",{class:!0}),E(e).forEach(_),o=P(f),t=b(f,"DIV",{class:!0});var k=E(t);s=b(k,"DIV",{class:!0});var m=E(s);r=W(m,n),m.forEach(_),k.forEach(_),a=P(f);for(let D=0;D<u.length;D+=1)u[D].l(f);i=re(),this.h()},h(){R(e,"class","marker svelte-1t8fwgu"),J(e,"background-color",l[0].type.color),R(s,"class","title svelte-1t8fwgu"),R(t,"class","content svelte-1t8fwgu"),J(t,"color",l[0].type.color),J(t,"background-color",l[0].type.bg)},m(f,k){$(f,e,k),$(f,o,k),$(f,t,k),h(t,s),h(s,r),$(f,a,k);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(f,k);$(f,i,k)},p(f,k){if(k&1&&J(e,"background-color",f[0].type.color),k&1&&n!==(n=f[0].type.name+"")&&F(r,n),k&1&&J(t,"color",f[0].type.color),k&1&&J(t,"background-color",f[0].type.bg),k&36){c=f[5];let m;for(m=0;m<c.length;m+=1){const D=Vt(f,c,m);u[m]?u[m].p(D,k):(u[m]=qt(D),u[m].c(),u[m].m(i.parentNode,i))}for(;m<u.length;m+=1)u[m].d(1);u.length=c.length}},d(f){f&&_(e),f&&_(o),f&&_(t),f&&_(a),ae(u,f),f&&_(i)}}}function Ot(l){let e,o=l[1].type.name+"",t;return{c(){e=g("div"),t=C(o),this.h()},l(s){e=b(s,"DIV",{class:!0});var n=E(e);t=W(n,o),n.forEach(_),this.h()},h(){R(e,"class","title svelte-1t8fwgu")},m(s,n){$(s,e,n),h(e,t)},p(s,n){n&2&&o!==(o=s[1].type.name+"")&&F(t,o)},d(s){s&&_(e)}}}function qt(l){let e,o;return{c(){e=g("div"),this.h()},l(t){e=b(t,"DIV",{class:!0}),E(e).forEach(_),this.h()},h(){R(e,"class",o="door "+lt(l[8])+" svelte-1t8fwgu"),oe(e,"connected",l[2].includes(l[8]))},m(t,s){$(t,e,s)},p(t,s){s&32&&o!==(o="door "+lt(t[8])+" svelte-1t8fwgu")&&R(e,"class",o),s&36&&oe(e,"connected",t[2].includes(t[8]))},d(t){t&&_(e)}}}function Pt(l){let e;return{c(){e=g("div"),this.h()},l(o){e=b(o,"DIV",{class:!0}),E(e).forEach(_),this.h()},h(){R(e,"class","selected svelte-1t8fwgu")},m(o,t){$(o,e,t)},d(o){o&&_(e)}}}function Bl(l){let e,o,t,s,n;function r(u,f){return u[0]?Pl:ql}let a=r(l),i=a(l),c=l[3]&&Pt();return{c(){e=g("div"),i.c(),o=q(),c&&c.c(),this.h()},l(u){e=b(u,"DIV",{class:!0});var f=E(e);i.l(f),o=P(f),c&&c.l(f),f.forEach(_),this.h()},h(){R(e,"class",t="cell "+l[4]+" svelte-1t8fwgu")},m(u,f){$(u,e,f),i.m(e,null),h(e,o),c&&c.m(e,null),s||(n=[ee(e,"click",Re(l[6])),ee(e,"keypress",Re(l[6]))],s=!0)},p(u,[f]){a===(a=r(u))&&i?i.p(u,f):(i.d(1),i=a(u),i&&(i.c(),i.m(e,o))),u[3]?c||(c=Pt(),c.c(),c.m(e,null)):c&&(c.d(1),c=null),f&16&&t!==(t="cell "+u[4]+" svelte-1t8fwgu")&&R(e,"class",t)},i:Q,o:Q,d(u){u&&_(e),i.d(),c&&c.d(),s=!1,Be(n)}}}function $l(l,e,o){let t,s,{room:n}=e,{below:r}=e,{connections:a}=e,{selected:i}=e;const c=rt(),u=()=>c("selected");return l.$$set=f=>{"room"in f&&o(0,n=f.room),"below"in f&&o(1,r=f.below),"connections"in f&&o(2,a=f.connections),"selected"in f&&o(3,i=f.selected)},l.$$.update=()=>{l.$$.dirty&1&&o(5,t=ot(n)),l.$$.dirty&1&&o(4,s=n?lt(n.orientation):"")},[n,r,a,i,s,t,u]}class Cl extends de{constructor(e){super(),ve(this,e,$l,Bl,ce,{room:0,below:1,connections:2,selected:3})}}function Bt(l,e,o){const t=l.slice();return t[30]=e[o],t[32]=o,t}function $t(l,e,o){const t=l.slice();return t[33]=e[o],t}function Ct(l,e,o){const t=l.slice();t[36]=e[o];const s=t[36].floors&&!t[36].floors.includes(t[0].num);return t[37]=s,t}function Wl(l){let e,o,t,s,n,r,a,i,c,u,f,k,m,D,V,S=l[11],I=[];for(let d=0;d<S.length;d+=1)I[d]=Wt(Ct(l,S,d));let v=l[1]&&Ht(l),p=l[0].num>=0&&l[3]&&Ut(),w=l[1]&&Mt(l);return{c(){e=g("div"),o=g("select"),t=g("option"),s=C("Pick a room...");for(let d=0;d<I.length;d+=1)I[d].c();r=q(),v&&v.c(),a=q(),i=g("button"),c=g("i"),u=q(),p&&p.c(),f=q(),w&&w.c(),k=re(),this.h()},l(d){e=b(d,"DIV",{class:!0});var y=E(e);o=b(y,"SELECT",{class:!0});var L=E(o);t=b(L,"OPTION",{});var T=E(t);s=W(T,"Pick a room..."),T.forEach(_);for(let B=0;B<I.length;B+=1)I[B].l(L);L.forEach(_),r=P(y),v&&v.l(y),a=P(y),i=b(y,"BUTTON",{class:!0});var O=E(i);c=b(O,"I",{class:!0}),E(c).forEach(_),O.forEach(_),y.forEach(_),u=P(d),p&&p.l(d),f=P(d),w&&w.l(d),k=re(),this.h()},h(){t.__value="",t.value=t.__value,t.disabled=!0,t.selected=!0,R(o,"class","svelte-102wwix"),R(c,"class","icofont-ui-close"),R(i,"class","svelte-102wwix"),R(e,"class","svelte-102wwix")},m(d,y){var L;$(d,e,y),h(e,o),h(o,t),h(t,s);for(let T=0;T<I.length;T+=1)I[T]&&I[T].m(o,null);Pe(o,((L=l[1])==null?void 0:L.type.key)||""),h(e,r),v&&v.m(e,null),h(e,a),h(e,i),h(i,c),$(d,u,y),p&&p.m(d,y),$(d,f,y),w&&w.m(d,y),$(d,k,y),m=!0,D||(V=[ee(o,"change",l[20]),ee(i,"click",Re(l[12]))],D=!0)},p(d,y){var L,T;if(y[0]&2049){S=d[11];let O;for(O=0;O<S.length;O+=1){const B=Ct(d,S,O);I[O]?I[O].p(B,y):(I[O]=Wt(B),I[O].c(),I[O].m(o,null))}for(;O<I.length;O+=1)I[O].d(1);I.length=S.length}(!m||y[0]&2050&&n!==(n=((L=d[1])==null?void 0:L.type.key)||""))&&Pe(o,((T=d[1])==null?void 0:T.type.key)||""),d[1]?v?v.p(d,y):(v=Ht(d),v.c(),v.m(e,a)):v&&(v.d(1),v=null),d[0].num>=0&&d[3]?p||(p=Ut(),p.c(),p.m(f.parentNode,f)):p&&(p.d(1),p=null),d[1]?w?(w.p(d,y),y[0]&2&&Y(w,1)):(w=Mt(d),w.c(),Y(w,1),w.m(k.parentNode,k)):w&&(Ie(),z(w,1,1,()=>{w=null}),De())},i(d){m||(Y(w),m=!0)},o(d){z(w),m=!1},d(d){d&&_(e),ae(I,d),v&&v.d(),d&&_(u),p&&p.d(d),d&&_(f),w&&w.d(d),d&&_(k),D=!1,Be(V)}}}function Hl(l){let e,o;return{c(){e=g("p"),o=C("There is no supporting room below!"),this.h()},l(t){e=b(t,"P",{class:!0});var s=E(e);o=W(s,"There is no supporting room below!"),s.forEach(_),this.h()},h(){R(e,"class","svelte-102wwix")},m(t,s){$(t,e,s),h(e,o)},p:Q,i:Q,o:Q,d(t){t&&_(e)}}}function Wt(l){var c;let e,o=l[36].name+"",t,s=l[37]?` (floors: ${(c=l[36].floors)==null?void 0:c.join(", ")})`:"",n,r,a,i;return{c(){e=g("option"),t=C(o),n=C(s),r=q(),this.h()},l(u){e=b(u,"OPTION",{});var f=E(e);t=W(f,o),n=W(f,s),r=P(f),f.forEach(_),this.h()},h(){e.disabled=a=l[37],e.__value=i=l[36].key,e.value=e.__value},m(u,f){$(u,e,f),h(e,t),h(e,n),h(e,r)},p(u,f){var k;f[0]&2048&&o!==(o=u[36].name+"")&&F(t,o),f[0]&2049&&s!==(s=u[37]?` (floors: ${(k=u[36].floors)==null?void 0:k.join(", ")})`:"")&&F(n,s),f[0]&2049&&a!==(a=u[37])&&(e.disabled=a),f[0]&2048&&i!==(i=u[36].key)&&(e.__value=i,e.value=e.__value)},d(u){u&&_(e)}}}function Ht(l){let e,o,t,s,n,r,a,i;return{c(){e=g("button"),o=g("i"),t=q(),s=g("button"),n=g("i"),this.h()},l(c){e=b(c,"BUTTON",{class:!0});var u=E(e);o=b(u,"I",{class:!0}),E(o).forEach(_),u.forEach(_),t=P(c),s=b(c,"BUTTON",{class:!0});var f=E(s);n=b(f,"I",{class:!0}),E(n).forEach(_),f.forEach(_),this.h()},h(){R(o,"class","icofont-ui-rotation"),R(e,"class","svelte-102wwix"),R(n,"class","icofont-ui-delete"),s.disabled=r=l[0].num>=0&&!!l[3],R(s,"class","svelte-102wwix")},m(c,u){$(c,e,u),h(e,o),$(c,t,u),$(c,s,u),h(s,n),a||(i=[ee(e,"click",Re(l[13])),ee(s,"click",Re(l[21]))],a=!0)},p(c,u){u[0]&9&&r!==(r=c[0].num>=0&&!!c[3])&&(s.disabled=r)},d(c){c&&_(e),c&&_(t),c&&_(s),a=!1,Be(i)}}}function Ut(l){let e,o,t,s,n;return{c(){e=g("div"),o=g("i"),t=q(),s=g("p"),n=C("This room is supportting the one above it!"),this.h()},l(r){e=b(r,"DIV",{class:!0});var a=E(e);o=b(a,"I",{class:!0}),E(o).forEach(_),t=P(a),s=b(a,"P",{class:!0});var i=E(s);n=W(i,"This room is supportting the one above it!"),i.forEach(_),a.forEach(_),this.h()},h(){R(o,"class","icofont-info svelte-102wwix"),R(s,"class","svelte-102wwix"),R(e,"class","svelte-102wwix")},m(r,a){$(r,e,a),h(e,o),h(e,t),h(e,s),h(s,n)},d(r){r&&_(e)}}}function Mt(l){let e,o;return e=new ol({props:{tabs:["Details","Hotspots"],inverted:!0,$$slots:{default:[Yl,({tab:t})=>({29:t}),({tab:t})=>[t?536870912:0]]},$$scope:{ctx:l}}}),{c(){pe(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,s){be(e,t,s),o=!0},p(t,s){const n={};s[0]&536871938|s[1]&512&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){o||(Y(e.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),o=!1},d(t){ke(e,t)}}}function Ul(l){let e,o,t=l[10],s=[];for(let n=0;n<t.length;n+=1)s[n]=Ft(Bt(l,t,n));return{c(){e=g("table"),o=g("tbody");for(let n=0;n<s.length;n+=1)s[n].c()},l(n){e=b(n,"TABLE",{});var r=E(e);o=b(r,"TBODY",{});var a=E(o);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(_),r.forEach(_)},m(n,r){$(n,e,r),h(e,o);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(o,null)},p(n,r){if(r[0]&33794){t=n[10];let a;for(a=0;a<t.length;a+=1){const i=Bt(n,t,a);s[a]?s[a].p(i,r):(s[a]=Ft(i),s[a].c(),s[a].m(o,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&_(e),ae(s,n)}}}function Ml(l){let e,o,t,s,n,r,a,i=l[1].type.name+"",c,u,f,k,m,D,V,S=l[1].type.cost+"",I,v,p,w,d,y,L,T=l[1].type.minLvl+"",O;return{c(){e=g("table"),o=g("tbody"),t=g("tr"),s=g("td"),n=C("Name"),r=q(),a=g("td"),c=C(i),u=q(),f=g("tr"),k=g("td"),m=C("Cost"),D=q(),V=g("td"),I=C(S),v=q(),p=g("tr"),w=g("td"),d=C("Min. Level"),y=q(),L=g("td"),O=C(T)},l(B){e=b(B,"TABLE",{});var M=E(e);o=b(M,"TBODY",{});var A=E(o);t=b(A,"TR",{});var Z=E(t);s=b(Z,"TD",{});var X=E(s);n=W(X,"Name"),X.forEach(_),r=P(Z),a=b(Z,"TD",{});var te=E(a);c=W(te,i),te.forEach(_),Z.forEach(_),u=P(A),f=b(A,"TR",{});var U=E(f);k=b(U,"TD",{});var K=E(k);m=W(K,"Cost"),K.forEach(_),D=P(U),V=b(U,"TD",{});var ie=E(V);I=W(ie,S),ie.forEach(_),U.forEach(_),v=P(A),p=b(A,"TR",{});var Ee=E(p);w=b(Ee,"TD",{});var _e=E(w);d=W(_e,"Min. Level"),_e.forEach(_),y=P(Ee),L=b(Ee,"TD",{});var Ne=E(L);O=W(Ne,T),Ne.forEach(_),Ee.forEach(_),A.forEach(_),M.forEach(_)},m(B,M){$(B,e,M),h(e,o),h(o,t),h(t,s),h(s,n),h(t,r),h(t,a),h(a,c),h(o,u),h(o,f),h(f,k),h(k,m),h(f,D),h(f,V),h(V,I),h(o,v),h(o,p),h(p,w),h(w,d),h(p,y),h(p,L),h(L,O)},p(B,M){M[0]&2&&i!==(i=B[1].type.name+"")&&F(c,i),M[0]&2&&S!==(S=B[1].type.cost+"")&&F(I,S),M[0]&2&&T!==(T=B[1].type.minLvl+"")&&F(O,T)},d(B){B&&_(e)}}}function Yt(l){let e,o=l[33].name+"",t,s;return{c(){e=g("option"),t=C(o),this.h()},l(n){e=b(n,"OPTION",{});var r=E(e);t=W(r,o),r.forEach(_),this.h()},h(){e.__value=s=l[33].key,e.value=e.__value},m(n,r){$(n,e,r),h(e,t)},p(n,r){r[0]&1024&&o!==(o=n[33].name+"")&&F(t,o),r[0]&1024&&s!==(s=n[33].key)&&(e.__value=s,e.value=e.__value)},d(n){n&&_(e)}}}function Ft(l){let e,o,t=l[30].name+"",s,n,r,a,i,c,u,f,k,m,D=l[30].options.map(l[22]),V=[];for(let I=0;I<D.length;I+=1)V[I]=Yt($t(l,D,I));function S(...I){return l[23](l[32],...I)}return{c(){e=g("tr"),o=g("td"),s=C(t),n=q(),r=g("td"),a=g("select"),i=g("option"),c=C("None");for(let I=0;I<V.length;I+=1)V[I].c();f=q(),this.h()},l(I){e=b(I,"TR",{});var v=E(e);o=b(v,"TD",{});var p=E(o);s=W(p,t),p.forEach(_),n=P(v),r=b(v,"TD",{});var w=E(r);a=b(w,"SELECT",{});var d=E(a);i=b(d,"OPTION",{});var y=E(i);c=W(y,"None"),y.forEach(_);for(let L=0;L<V.length;L+=1)V[L].l(d);d.forEach(_),w.forEach(_),f=P(v),v.forEach(_),this.h()},h(){i.__value="",i.value=i.__value},m(I,v){var p;$(I,e,v),h(e,o),h(o,s),h(e,n),h(e,r),h(r,a),h(a,i),h(i,c);for(let w=0;w<V.length;w+=1)V[w]&&V[w].m(a,null);Pe(a,((p=l[1].hotspots[l[32]])==null?void 0:p.key)||""),h(e,f),k||(m=ee(a,"change",S),k=!0)},p(I,v){var p,w;if(l=I,v[0]&1024&&t!==(t=l[30].name+"")&&F(s,t),v[0]&1024){D=l[30].options.map(l[22]);let d;for(d=0;d<D.length;d+=1){const y=$t(l,D,d);V[d]?V[d].p(y,v):(V[d]=Yt(y),V[d].c(),V[d].m(a,null))}for(;d<V.length;d+=1)V[d].d(1);V.length=D.length}v[0]&2050&&u!==(u=((p=l[1].hotspots[l[32]])==null?void 0:p.key)||"")&&Pe(a,((w=l[1].hotspots[l[32]])==null?void 0:w.key)||"")},d(I){I&&_(e),ae(V,I),k=!1,m()}}}function Yl(l){let e;function o(n,r){if(n[29]==="Details")return Ml;if(n[29]==="Hotspots")return Ul}let t=o(l),s=t&&t(l);return{c(){s&&s.c(),e=re()},l(n){s&&s.l(n),e=re()},m(n,r){s&&s.m(n,r),$(n,e,r)},p(n,r){t===(t=o(n))&&s?s.p(n,r):(s&&s.d(1),s=t&&t(n),s&&(s.c(),s.m(e.parentNode,e)))},d(n){s&&s.d(n),n&&_(e)}}}function Fl(l){let e,o,t,s,n;const r=[Hl,Wl],a=[];function i(c,u){var f;return c[0].num>0&&(!c[2]||(f=c[2].type)!=null&&f.open)?0:1}return t=i(l),s=a[t]=r[t](l),{c(){e=g("div"),o=g("div"),s.c(),this.h()},l(c){e=b(c,"DIV",{class:!0});var u=E(e);o=b(u,"DIV",{class:!0});var f=E(o);s.l(f),f.forEach(_),u.forEach(_),this.h()},h(){R(o,"class","content svelte-102wwix"),R(e,"class","popup svelte-102wwix"),J(e,"top",l[9]),J(e,"bottom",l[8]),J(e,"left",l[7]),J(e,"right",l[6]),J(e,"max-height",l[5]),J(e,"maxWidth",l[4])},m(c,u){$(c,e,u),h(e,o),a[t].m(o,null),n=!0},p(c,u){let f=t;t=i(c),t===f?a[t].p(c,u):(Ie(),z(a[f],1,1,()=>{a[f]=null}),De(),s=a[t],s?s.p(c,u):(s=a[t]=r[t](c),s.c()),Y(s,1),s.m(o,null)),u[0]&512&&J(e,"top",c[9]),u[0]&256&&J(e,"bottom",c[8]),u[0]&128&&J(e,"left",c[7]),u[0]&64&&J(e,"right",c[6]),u[0]&32&&J(e,"max-height",c[5]),u[0]&16&&J(e,"maxWidth",c[4])},i(c){n||(Y(s),n=!0)},o(c){z(s),n=!1},d(c){c&&_(e),a[t].d()}}}function zl(l,e,o){let t,s,n,r,a,i,c,u,f,k;const m=he/2,D=we/2,V=100/he,S=100/we;let{floor:I}=e,{x:v}=e,{y:p}=e,{room:w}=e,{below:d}=e,{above:y}=e;const L=rt(),T=()=>L("close"),O=()=>L("rotateRoom",{x:v,y:p}),B=U=>{L("changeRoomType",{x:v,y:p,type:U?tl(U):null})},M=(U,K)=>{L("changeFurniture",{x:v,y:p,hotspotIndex:U,type:K?gt(K):null})},A=U=>B(U.currentTarget.value),Z=()=>B(null),X=U=>gt(U),te=(U,K)=>M(U,K.currentTarget.value);return l.$$set=U=>{"floor"in U&&o(0,I=U.floor),"x"in U&&o(16,v=U.x),"y"in U&&o(17,p=U.y),"room"in U&&o(1,w=U.room),"below"in U&&o(2,d=U.below),"above"in U&&o(3,y=U.above)},l.$$.update=()=>{l.$$.dirty[0]&2&&o(10,s=(w==null?void 0:w.type.hotspots)||[]),l.$$.dirty[0]&131072&&o(19,n=p<D),l.$$.dirty[0]&65536&&o(18,r=v<m),l.$$.dirty[0]&655360&&o(9,a=n?`${S*(p+1)}%`:""),l.$$.dirty[0]&655360&&o(8,i=n?"":`${S*(we-p)}%`),l.$$.dirty[0]&327680&&o(7,c=r?`${V*v}%`:""),l.$$.dirty[0]&327680&&o(6,u=r?"":`${V*(he-v-1)}%`),l.$$.dirty[0]&655360&&o(5,f=`calc(${(n?we-p-1:p)*S}% - 4px)`),l.$$.dirty[0]&327680&&o(4,k=`calc(${(r?he-v-1:v)*V}% - 4px)`)},o(11,t=[...Ue].sort((U,K)=>U.name.localeCompare(K.name))),[I,w,d,y,k,f,u,c,i,a,s,t,T,O,B,M,v,p,r,n,A,Z,X,te]}class Al extends de{constructor(e){super(),ve(this,e,zl,Fl,ce,{floor:0,x:16,y:17,room:1,below:2,above:3},null,[-1,-1])}}function zt(l,e,o){const t=l.slice();return t[13]=e[o],t[15]=o,t}function At(l,e,o){const t=l.slice();return t[16]=e[o],t[18]=o,t}function Gt(l){var s;let e,o;function t(){return l[8](l[18],l[15])}return e=new Cl({props:{room:l[16],below:((s=l[1])==null?void 0:s.rooms[l[15]][l[18]])||null,selected:l[18]===l[3]&&l[15]===l[4],connections:l[7](l[18],l[15],l[16])}}),e.$on("selected",t),{c(){pe(e.$$.fragment)},l(n){ge(e.$$.fragment,n)},m(n,r){be(e,n,r),o=!0},p(n,r){var i;l=n;const a={};r&1&&(a.room=l[16]),r&2&&(a.below=((i=l[1])==null?void 0:i.rooms[l[15]][l[18]])||null),r&24&&(a.selected=l[18]===l[3]&&l[15]===l[4]),r&1&&(a.connections=l[7](l[18],l[15],l[16])),e.$set(a)},i(n){o||(Y(e.$$.fragment,n),o=!0)},o(n){z(e.$$.fragment,n),o=!1},d(n){ke(e,n)}}}function Xt(l){let e,o,t=l[13],s=[];for(let r=0;r<t.length;r+=1)s[r]=Gt(At(l,t,r));const n=r=>z(s[r],1,1,()=>{s[r]=null});return{c(){e=g("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=b(r,"DIV",{class:!0});var a=E(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(_),this.h()},h(){R(e,"class","row svelte-11ba7nn")},m(r,a){$(r,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);o=!0},p(r,a){if(a&219){t=r[13];let i;for(i=0;i<t.length;i+=1){const c=At(r,t,i);s[i]?(s[i].p(c,a),Y(s[i],1)):(s[i]=Gt(c),s[i].c(),Y(s[i],1),s[i].m(e,null))}for(Ie(),i=t.length;i<s.length;i+=1)n(i);De()}},i(r){if(!o){for(let a=0;a<t.length;a+=1)Y(s[a]);o=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)z(s[a]);o=!1},d(r){r&&_(e),ae(s,r)}}}function jt(l){var t,s;let e,o;return e=new Al({props:{floor:l[0],x:l[3],y:l[4],room:l[5],below:((t=l[1])==null?void 0:t.rooms[l[4]][l[3]])||null,above:((s=l[2])==null?void 0:s.rooms[l[4]][l[3]])||null}}),e.$on("changeRoomType",l[9]),e.$on("rotateRoom",l[10]),e.$on("changeFurniture",l[11]),e.$on("close",l[12]),{c(){pe(e.$$.fragment)},l(n){ge(e.$$.fragment,n)},m(n,r){be(e,n,r),o=!0},p(n,r){var i,c;const a={};r&1&&(a.floor=n[0]),r&8&&(a.x=n[3]),r&16&&(a.y=n[4]),r&32&&(a.room=n[5]),r&26&&(a.below=((i=n[1])==null?void 0:i.rooms[n[4]][n[3]])||null),r&28&&(a.above=((c=n[2])==null?void 0:c.rooms[n[4]][n[3]])||null),e.$set(a)},i(n){o||(Y(e.$$.fragment,n),o=!0)},o(n){z(e.$$.fragment,n),o=!1},d(n){ke(e,n)}}}function Gl(l){let e,o,t,s,n=l[0].rooms,r=[];for(let c=0;c<n.length;c+=1)r[c]=Xt(zt(l,n,c));const a=c=>z(r[c],1,1,()=>{r[c]=null});let i=l[3]!==null&&l[4]!==null&&jt(l);return{c(){e=g("div");for(let c=0;c<r.length;c+=1)r[c].c();o=q(),i&&i.c(),this.h()},l(c){e=b(c,"DIV",{class:!0});var u=E(e);for(let f=0;f<r.length;f+=1)r[f].l(u);o=P(u),i&&i.l(u),u.forEach(_),this.h()},h(){R(e,"class","grid svelte-11ba7nn")},m(c,u){$(c,e,u);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(e,null);h(e,o),i&&i.m(e,null),s=!0},p(c,[u]){if(u&219){n=c[0].rooms;let f;for(f=0;f<n.length;f+=1){const k=zt(c,n,f);r[f]?(r[f].p(k,u),Y(r[f],1)):(r[f]=Xt(k),r[f].c(),Y(r[f],1),r[f].m(e,o))}for(Ie(),f=n.length;f<r.length;f+=1)a(f);De()}c[3]!==null&&c[4]!==null?i?(i.p(c,u),u&24&&Y(i,1)):(i=jt(c),i.c(),Y(i,1),i.m(e,null)):i&&(Ie(),z(i,1,1,()=>{i=null}),De())},i(c){if(!s){for(let u=0;u<n.length;u+=1)Y(r[u]);Y(i),at(()=>{s&&(t||(t=Ae(e,Xe,{},!0)),t.run(1))}),s=!0}},o(c){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)z(r[u]);z(i),t||(t=Ae(e,Xe,{},!1)),t.run(0),s=!1},d(c){c&&_(e),ae(r,c),i&&i.d(),c&&t&&t.end()}}}function Xl(l,e,o){let t,{floor:s}=e,{below:n}=e,{above:r}=e,a=null,i=null;const c=(S,I)=>{o(3,a=S),o(4,i=I)},u=(S,I,v)=>{if(!v)return[];const p={[Te.North]:I===0?null:s.rooms[I-1][S],[Te.East]:S>=he-1?null:s.rooms[I][S+1],[Te.South]:I>=we-1?null:s.rooms[I+1][S],[Te.West]:S===0?null:s.rooms[I][S-1]},w=[];for(const d of ot(v)){const y=p[d];if(y){for(const L of ot(y))if(d===it(L,2)){w.push(d);break}}}return w},f=(S,I)=>c(S,I);function k(S){et.call(this,l,S)}function m(S){et.call(this,l,S)}function D(S){et.call(this,l,S)}const V=()=>c(null,null);return l.$$set=S=>{"floor"in S&&o(0,s=S.floor),"below"in S&&o(1,n=S.below),"above"in S&&o(2,r=S.above)},l.$$.update=()=>{l.$$.dirty&25&&o(5,t=a!==null&&i!==null?s.rooms[i][a]:null)},[s,n,r,a,i,t,c,u,f,k,m,D,V]}class jl extends de{constructor(e){super(),ve(this,e,Xl,Gl,ce,{floor:0,below:1,above:2})}}function Jt(l,e,o){const t=l.slice();return t[3]=e[o],t[17]=o,t}function Zt(l){let e,o;return e=new jl({props:{floor:l[3],below:l[0].floors[l[1]-1]||null,above:l[0].floors[l[1]+1]||null}}),e.$on("changeRoomType",l[6]),e.$on("rotateRoom",l[7]),e.$on("changeFurniture",l[8]),{c(){pe(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,s){be(e,t,s),o=!0},p(t,s){const n={};s&8&&(n.floor=t[3]),s&3&&(n.below=t[0].floors[t[1]-1]||null),s&3&&(n.above=t[0].floors[t[1]+1]||null),e.$set(n)},i(t){o||(Y(e.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),o=!1},d(t){ke(e,t)}}}function Kt(l){let e,o,t=l[3].num+"",s;return{c(){e=g("option"),o=C("Floor "),s=C(t),this.h()},l(n){e=b(n,"OPTION",{});var r=E(e);o=W(r,"Floor "),s=W(r,t),r.forEach(_),this.h()},h(){e.__value=l[17],e.value=e.__value},m(n,r){$(n,e,r),h(e,o),h(e,s)},p(n,r){r&1&&t!==(t=n[3].num+"")&&F(s,t)},d(n){n&&_(e)}}}function Jl(l){let e,o,t=l[15]+"",s;return{c(){e=g("p"),o=C("Unknown tab "),s=C(t)},l(n){e=b(n,"P",{});var r=E(e);o=W(r,"Unknown tab "),s=W(r,t),r.forEach(_)},m(n,r){$(n,e,r),h(e,o),h(e,s)},p(n,r){r&32768&&t!==(t=n[15]+"")&&F(s,t)},i:Q,o:Q,d(n){n&&_(e)}}}function Zl(l){let e,o;return e=new Rl({props:{rooms:l[0].floors.map(Qt).flat(2)}}),{c(){pe(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,s){be(e,t,s),o=!0},p(t,s){const n={};s&1&&(n.rooms=t[0].floors.map(Qt).flat(2)),e.$set(n)},i(t){o||(Y(e.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),o=!1},d(t){ke(e,t)}}}function Kl(l){let e,o;return e=new Dl({props:{requirements:l[2].levelRequirements}}),{c(){pe(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,s){be(e,t,s),o=!0},p(t,s){const n={};s&4&&(n.requirements=t[2].levelRequirements),e.$set(n)},i(t){o||(Y(e.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),o=!1},d(t){ke(e,t)}}}function Ql(l){let e,o;return e=new kl({props:{errors:l[2].errors}}),{c(){pe(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,s){be(e,t,s),o=!0},p(t,s){const n={};s&4&&(n.errors=t[2].errors),e.$set(n)},i(t){o||(Y(e.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),o=!1},d(t){ke(e,t)}}}function xl(l){let e,o;return e=new wl({props:{house:l[0]}}),e.$on("open",l[4]),e.$on("save",l[5]),{c(){pe(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,s){be(e,t,s),o=!0},p(t,s){const n={};s&1&&(n.house=t[0]),e.$set(n)},i(t){o||(Y(e.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),o=!1},d(t){ke(e,t)}}}function eo(l){let e,o,t,s;const n=[xl,Ql,Kl,Zl,Jl],r=[];function a(i,c){return i[15]==="General"?0:i[15]==="Errors"?1:i[15]==="Requirements"?2:i[15]==="Rooms"?3:4}return e=a(l),o=r[e]=n[e](l),{c(){o.c(),t=re()},l(i){o.l(i),t=re()},m(i,c){r[e].m(i,c),$(i,t,c),s=!0},p(i,c){let u=e;e=a(i),e===u?r[e].p(i,c):(Ie(),z(r[u],1,1,()=>{r[u]=null}),De(),o=r[e],o?o.p(i,c):(o=r[e]=n[e](i),o.c()),Y(o,1),o.m(t.parentNode,t))},i(i){s||(Y(o),s=!0)},o(i){z(o),s=!1},d(i){r[e].d(i),i&&_(t)}}}function to(l){var ut;let e,o=l[1],t,s,n,r,a,i,c,u,f,k,m,D,V,S,I,v,p,w,d,y,L,T=l[2].totalPrice+"",O,B,M,A,Z,X,te,U,K=(((ut=l[2].levelRequirements[0])==null?void 0:ut.level)||0)+"",ie,Ee,_e,Ne,je,fe,$e,Je,Ce=l[2].extent[0]+"",Me,Ze,We=l[2].extent[1]+"",Ye,Ke,ye,ue,Qe,ft,se=Zt(l),Ve=l[0].floors,x=[];for(let H=0;H<Ve.length;H+=1)x[H]=Kt(Jt(l,Ve,H));return ye=new ol({props:{tabs:["General","Errors","Requirements","Rooms"],$$slots:{default:[eo,({tab:H})=>({15:H}),({tab:H})=>H?32768:0]},$$scope:{ctx:l}}}),{c(){e=g("div"),se.c(),t=q(),s=g("div"),n=g("div"),r=g("button"),a=g("i"),c=q(),u=g("select");for(let H=0;H<x.length;H+=1)x[H].c();f=q(),k=g("button"),m=g("i"),V=q(),S=g("button"),I=g("i"),v=q(),p=g("div"),w=q(),d=g("div"),y=g("i"),L=q(),O=C(T),B=q(),M=g("div"),A=C("•"),Z=q(),X=g("div"),te=g("i"),U=q(),ie=C(K),Ee=q(),_e=g("div"),Ne=C("•"),je=q(),fe=g("div"),$e=g("i"),Je=q(),Me=C(Ce),Ze=C("x"),Ye=C(We),Ke=q(),pe(ye.$$.fragment),this.h()},l(H){e=b(H,"DIV",{class:!0});var j=E(e);se.l(j),j.forEach(_),t=P(H),s=b(H,"DIV",{class:!0});var ne=E(s);n=b(ne,"DIV",{class:!0});var G=E(n);r=b(G,"BUTTON",{class:!0});var le=E(r);a=b(le,"I",{class:!0}),E(a).forEach(_),le.forEach(_),c=P(G),u=b(G,"SELECT",{class:!0});var He=E(u);for(let xe=0;xe<x.length;xe+=1)x[xe].l(He);He.forEach(_),f=P(G),k=b(G,"BUTTON",{class:!0});var ht=E(k);m=b(ht,"I",{class:!0}),E(m).forEach(_),ht.forEach(_),V=P(G),S=b(G,"BUTTON",{class:!0});var _t=E(S);I=b(_t,"I",{class:!0}),E(I).forEach(_),_t.forEach(_),v=P(G),p=b(G,"DIV",{class:!0}),E(p).forEach(_),w=P(G),d=b(G,"DIV",{class:!0});var Fe=E(d);y=b(Fe,"I",{class:!0}),E(y).forEach(_),L=P(Fe),O=W(Fe,T),Fe.forEach(_),B=P(G),M=b(G,"DIV",{class:!0});var mt=E(M);A=W(mt,"•"),mt.forEach(_),Z=P(G),X=b(G,"DIV",{class:!0});var ze=E(X);te=b(ze,"I",{class:!0}),E(te).forEach(_),U=P(ze),ie=W(ze,K),ze.forEach(_),Ee=P(G),_e=b(G,"DIV",{class:!0});var dt=E(_e);Ne=W(dt,"•"),dt.forEach(_),je=P(G),fe=b(G,"DIV",{class:!0});var Oe=E(fe);$e=b(Oe,"I",{class:!0}),E($e).forEach(_),Je=P(Oe),Me=W(Oe,Ce),Ze=W(Oe,"x"),Ye=W(Oe,We),Oe.forEach(_),G.forEach(_),Ke=P(ne),ge(ye.$$.fragment,ne),ne.forEach(_),this.h()},h(){R(e,"class","map svelte-1xkp19y"),R(a,"class","icofont-arrow-up"),r.disabled=i=l[3].num>=tt,R(r,"class","svelte-1xkp19y"),R(u,"class","svelte-1xkp19y"),l[1]===void 0&&at(()=>l[11].call(u)),R(m,"class","icofont-arrow-down"),k.disabled=D=l[3].num<=Ge,R(k,"class","svelte-1xkp19y"),R(I,"class","icofont-ui-delete"),R(S,"class","svelte-1xkp19y"),R(p,"class","svelte-1xkp19y"),J(p,"flex","1"),R(y,"class","icofont-money-bag"),R(d,"class","svelte-1xkp19y"),R(M,"class","svelte-1xkp19y"),R(te,"class","icofont-bars"),R(X,"class","svelte-1xkp19y"),R(_e,"class","svelte-1xkp19y"),R($e,"class","icofont-drag"),R(fe,"class","svelte-1xkp19y"),R(n,"class","floor-controls svelte-1xkp19y"),R(s,"class","sidebar svelte-1xkp19y")},m(H,j){$(H,e,j),se.m(e,null),$(H,t,j),$(H,s,j),h(s,n),h(n,r),h(r,a),h(n,c),h(n,u);for(let ne=0;ne<x.length;ne+=1)x[ne]&&x[ne].m(u,null);Pe(u,l[1],!0),h(n,f),h(n,k),h(k,m),h(n,V),h(n,S),h(S,I),h(n,v),h(n,p),h(n,w),h(n,d),h(d,y),h(d,L),h(d,O),h(n,B),h(n,M),h(M,A),h(n,Z),h(n,X),h(X,te),h(X,U),h(X,ie),h(n,Ee),h(n,_e),h(_e,Ne),h(n,je),h(n,fe),h(fe,$e),h(fe,Je),h(fe,Me),h(fe,Ze),h(fe,Ye),h(s,Ke),be(ye,s,null),ue=!0,Qe||(ft=[ee(r,"click",Re(l[10])),ee(u,"change",l[11]),ee(u,"change",l[12]),ee(k,"click",Re(l[13])),ee(S,"click",l[9])],Qe=!0)},p(H,[j]){var G;if(j&2&&ce(o,o=H[1])?(Ie(),z(se,1,1,Q),De(),se=Zt(H),se.c(),Y(se,1),se.m(e,null)):se.p(H,j),(!ue||j&8&&i!==(i=H[3].num>=tt))&&(r.disabled=i),j&1){Ve=H[0].floors;let le;for(le=0;le<Ve.length;le+=1){const He=Jt(H,Ve,le);x[le]?x[le].p(He,j):(x[le]=Kt(He),x[le].c(),x[le].m(u,null))}for(;le<x.length;le+=1)x[le].d(1);x.length=Ve.length}j&2&&Pe(u,H[1]),(!ue||j&8&&D!==(D=H[3].num<=Ge))&&(k.disabled=D),(!ue||j&4)&&T!==(T=H[2].totalPrice+"")&&F(O,T),(!ue||j&4)&&K!==(K=(((G=H[2].levelRequirements[0])==null?void 0:G.level)||0)+"")&&F(ie,K),(!ue||j&4)&&Ce!==(Ce=H[2].extent[0]+"")&&F(Me,Ce),(!ue||j&4)&&We!==(We=H[2].extent[1]+"")&&F(Ye,We);const ne={};j&294917&&(ne.$$scope={dirty:j,ctx:H}),ye.$set(ne)},i(H){ue||(Y(se),Y(ye.$$.fragment,H),ue=!0)},o(H){z(se),z(ye.$$.fragment,H),ue=!1},d(H){H&&_(e),se.d(H),H&&_(t),H&&_(s),ae(x,H),ke(ye),Qe=!1,Be(ft)}}}const Qt=l=>l.rooms;function lo(l,e,o){let t,s,n;cl(l,ul,v=>o(14,n=v));let r=el(),a=Math.abs(Ge);xt(()=>{n.url.search?o(0,r=ll(n.url.searchParams)):o(0,r.floors[1].rooms[4][4]=pt(r.floors[1],4,4,tl("garden")),r)});const i=v=>{o(0,r=v.detail.house),qe(`?${Se(r)}`,{replaceState:!0})},c=v=>{qe(`?${Se(r)}`,{replaceState:!0})},u=v=>{v.detail.type===null?o(0,r.floors[a].rooms[v.detail.y][v.detail.x]=null,r):o(0,r.floors[a].rooms[v.detail.y][v.detail.x]=pt(r.floors[a],v.detail.x,v.detail.y,v.detail.type),r),qe(`?${Se(r)}`,{replaceState:!0})},f=v=>{const p=r.floors[a].rooms[v.detail.y][v.detail.x];p&&(p.orientation=it(p.orientation),o(0,r.floors[a].rooms[v.detail.y][v.detail.x]=p,r),qe(`?${Se(r)}`,{replaceState:!0}))},k=v=>{const p=r.floors[a].rooms[v.detail.y][v.detail.x];p&&(p.hotspots[v.detail.hotspotIndex]=v.detail.type,qe(`?${Se(r)}`,{replaceState:!0}))},m=()=>{var v;if(confirm("Are you sure you want to delete all rooms on this floor?")){for(let p=0;p<we;p++)for(let w=0;w<he;w++)(r.floors[a].num<0||!((v=r.floors[a+1])!=null&&v.rooms[p][w]))&&o(0,r.floors[a].rooms[p][w]=null,r);qe(`?${Se(r)}`,{replaceState:!0})}},D=()=>o(1,a++,a);function V(){a=fl(this),o(1,a)}const S=v=>o(1,a=Number(v.currentTarget.value)),I=()=>o(1,a--,a);return l.$$.update=()=>{l.$$.dirty&3&&o(3,t=r.floors[a]),l.$$.dirty&1&&o(2,s=_l(r))},[r,a,s,t,i,c,u,f,k,m,D,V,S,I]}class ro extends de{constructor(e){super(),ve(this,e,lo,to,ce,{})}}export{ro as default};
