import{S as me,i as de,s as re,e as ne,b as C,H as z,h as _,k as b,q as V,l as k,m as E,r as P,n as I,G as h,J as ae,u as U,a as O,c as q,K as se,L as ll,v as we,d as A,f as Te,g as Y,M as le,C as ol,D as sl,E as nl,F as rl,N as ct,O as Ge,P as Pe,Q as ut,R as xt,p as J,T as Ce,U as al,y as ve,z as pe,A as ge,B as be,V as ot,I as il,o as fl,W as cl}from"../chunks/index.df43da31.js";import{p as ul}from"../chunks/stores.57896892.js";import{j as Le}from"../chunks/singletons.09103cd1.js";Le.disable_scroll_handling;const Ye=Le.goto;Le.invalidate;Le.invalidateAll;Le.preload_data;Le.preload_code;Le.before_navigate;Le.after_navigate;const ue=[{level:0,rooms:0,extent:[0,0]},{level:1,rooms:21,extent:[3,3]},{level:15,rooms:21,extent:[4,4]},{level:30,rooms:21,extent:[5,5]},{level:38,rooms:22,extent:[5,5]},{level:44,rooms:23,extent:[5,5]},{level:45,rooms:23,extent:[6,6]},{level:50,rooms:24,extent:[6,6]},{level:56,rooms:25,extent:[6,6]},{level:60,rooms:25,extent:[7,7]},{level:62,rooms:26,extent:[7,7]},{level:68,rooms:27,extent:[7,7]},{level:74,rooms:28,extent:[7,7]},{level:80,rooms:29,extent:[7,7]},{level:86,rooms:30,extent:[7,7]},{level:92,rooms:31,extent:[7,7]},{level:96,rooms:32,extent:[7,7]},{level:99,rooms:33,extent:[7,7]}],he=9,Re=9,st=(l,e)=>{const o={house:l,num:e,rooms:[]};for(let t=0;t<Re;t++){o.rooms.push([]);for(let s=0;s<he;s++)o.rooms[t].push(null)}return o},hl=l=>{const e=l.floors.map(d=>d.rooms).flat(2).filter(d=>!!d);let o=0,t=he,s=Re,n=0,r=0,i=null;const a=[],f=[];for(const d of e)o+=d.type.cost,i=i&&d.type.minLvl<=i.type.minLvl?i:d,t=Math.min(t,d.x),n=Math.max(n,d.x),s=Math.min(s,d.y),r=Math.max(r,d.y);if(i&&f.push({name:"Highest Level Room",value:i.type.name,limit:"-",level:i.type.minLvl}),e.length>0){const d=ue.find(T=>T.rooms>=e.length);if(d)f.push({name:"Number of Rooms",value:e.length,limit:d.rooms,level:d.level});else{const T=ue[ue.length-1].rooms;a.push(`You have too many rooms (${e.length})! You cannot have more than ${T}`)}}const c=Math.max(0,n-t+1);if(c>0){const d=ue.find(T=>T.extent[0]>=c);if(d)f.push({name:"Extent X",value:c,limit:d.extent[0],level:d.level});else{const T=ue[ue.length-1].extent[0];a.push(`Your house is too wide (${c})! It can be at most ${T} wide`)}}const u=Math.max(0,r-s+1);if(u>0){const d=ue.find(T=>T.extent[1]>=u);if(d)f.push({name:"Extent Y",value:u,limit:d.extent[1],level:d.level});else{const T=ue[ue.length-1].extent[1];a.push(`Your house is too tall (${u})! It can be at most ${T} tall`)}}return f.sort((d,T)=>T.level-d.level),{totalPrice:o,levelRequirements:f,extent:[c,u],errors:a}};var _e=(l=>(l[l.North=0]="North",l[l.East=1]="East",l[l.South=2]="South",l[l.West=3]="West",l))(_e||{});const nt=l=>_e[l].toLowerCase(),ht=(l,e=1)=>(l+=e)%4,Ve=[{key:"exit_portal",name:"Exit Portal",minLvl:1,exp:100,materials:{iron_bar:10}},{key:"decorative_rock",name:"Decorative Rock",minLvl:5,exp:100,materials:{limestone_brick:5}},{key:"pond",name:"Pond",minLvl:10,exp:100,materials:{soft_clay:10}},{key:"imp_statue",name:"Imp Statue",minLvl:15,exp:150,materials:{limestone_brick:5,soft_clay:5}},{key:"dungeon_entrance",name:"Dungeon Entrance",minLvl:70,exp:500,materials:{marble_block:1}},{key:"plant",name:"Plant",minLvl:1,exp:31,materials:{bagged_plant_1:1}},{key:"small_fern",name:"Small Fern",minLvl:6,exp:70,materials:{bagged_plant_2:1}},{key:"fern",name:"Fern",minLvl:12,exp:100,materials:{bagged_plant_3:1}},{key:"dock_leaf",name:"Dock Leaf",minLvl:1,exp:31,materials:{bagged_plant_1:1}},{key:"thistle",name:"Thistle",minLvl:6,exp:70,materials:{bagged_plant_2:1}},{key:"reeds",name:"Reeds",minLvl:12,exp:100,materials:{bagged_plant_3:1}}],rt=new Map;for(const l of Ve){if(rt.has(l.key))throw new Error(`Duplicate furniture type ${l.key}`);rt.set(l.key,l)}const kt=l=>{const e=rt.get(l);if(!e)throw new Error(`Unknown furniture type ${l}`);return e},je=-1,at=1,el=()=>{const l={name:"Default",floors:[]};for(let e=je;e<=at;e++)l.floors.push(st(l,e));return l},R=_e,Se=[{key:"garden",name:"Garden",cost:1e3,minLvl:1,doors:[R.North,R.East,R.South,R.West],bg:"#034a03",hotspots:[{name:"Centrepiece",options:["exit_portal","decorative_rock","pond","imp_statue","dungeon_entrance"]},{name:"Tree",options:[]},{name:"Big Tree",options:[]},{name:"Small Plant 1",options:["plant","small_fern","fern"]},{name:"Small Plant 2",options:["dock_leaf","thistle","reeds"]},{name:"Big Plant 1",options:[]},{name:"Big Plant 2",options:[]}],open:!0,floors:[0]},{key:"parlour",name:"Parlour",cost:1e3,minLvl:1,doors:[R.East,R.South,R.West],bg:"#424242",hotspots:[]},{key:"kitchen",name:"Kitchen",cost:5e3,minLvl:5,doors:[R.East,R.South],bg:"#542808",hotspots:[]},{key:"dining_room",name:"Dining Room",cost:5e3,minLvl:10,doors:[R.East,R.South,R.West],bg:"#424242",hotspots:[]},{key:"workshop",name:"Workshop",cost:1e4,minLvl:15,doors:[R.North,R.South],bg:"#542808",hotspots:[]},{key:"bedroom",name:"Bedroom",cost:1e4,minLvl:20,doors:[R.East,R.South],bg:"#424242",hotspots:[]},{key:"skill_hall",name:"Skill Hall",cost:15e3,minLvl:25,doors:[R.North,R.East,R.South,R.West],bg:"#3f0569",hotspots:[],stairs:!0},{key:"games_room",name:"Games Room",cost:25e3,minLvl:30,doors:[R.East,R.South,R.West],bg:"#731e4c",hotspots:[]},{key:"combat_room",name:"Combat Room",cost:25e3,minLvl:30,doors:[R.East,R.South,R.West],bg:"#731e4c",hotspots:[]},{key:"quest_hall",name:"Quest Hall",cost:25e3,minLvl:32,doors:[R.North,R.East,R.South,R.West],bg:"#3f0569",hotspots:[],stairs:!0},{key:"menagerie",name:"Menagerie",cost:3e4,minLvl:37,doors:[R.North,R.East,R.South,R.West],bg:"#034a03",hotspots:[],open:!0,floors:[0]},{key:"study",name:"Study",cost:5e4,minLvl:40,doors:[R.East,R.South,R.West],bg:"#542808",hotspots:[]},{key:"costume_room",name:"Costume Room",cost:5e4,minLvl:42,doors:[R.South],bg:"#731e4c",hotspots:[]},{key:"chapel",name:"Chapel",cost:5e4,minLvl:45,doors:[R.East,R.South],bg:"#542808",hotspots:[]},{key:"portal_chamber",name:"Portal Chamber",cost:1e5,minLvl:50,doors:[R.South],bg:"#542808",hotspots:[]},{key:"formal_garden",name:"Formal Garden",cost:75e3,minLvl:55,doors:[R.North,R.East,R.South,R.West],bg:"#034a03",hotspots:[],open:!0,floors:[0]},{key:"throne_room",name:"Throne Room",cost:15e4,minLvl:60,doors:[R.South],bg:"#040459",hotspots:[],floors:[0]},{key:"aquarium",name:"Aquarium",cost:2e5,minLvl:63,doors:[R.North,R.East,R.South,R.West],bg:"#542808",hotspots:[],floors:[0]},{key:"oubliette",name:"Oubliette",cost:15e4,minLvl:65,doors:[R.North,R.East,R.South,R.West],bg:"#800303",hotspots:[],floors:[-1]},{key:"dungeon_corridor",name:"Dungeon Corridor",cost:7500,minLvl:70,doors:[R.North,R.South],bg:"#800303",hotspots:[],floors:[-1]},{key:"dungeon_junction",name:"Dungeon Junction",cost:7500,minLvl:70,doors:[R.North,R.East,R.South,R.West],bg:"#800303",hotspots:[],floors:[-1]},{key:"dungeon_stairs",name:"Dungeon Stairs",cost:7500,minLvl:70,doors:[R.North,R.East,R.South,R.West],bg:"#800303",hotspots:[],stairs:!0,floors:[-1]},{key:"dungeon_pit",name:"Dungeon Pit",cost:1e4,minLvl:70,doors:[R.North,R.East,R.South,R.West],bg:"#800303",hotspots:[],floors:[-1]},{key:"treasure_room",name:"Treasure Room",cost:25e4,minLvl:75,doors:[R.South],bg:"#800303",hotspots:[],floors:[-1]}],it=new Map;for(const l of Se){if(it.has(l.key))throw new Error(`Duplicate room type ${l.key}`);it.set(l.key,l)}const _l=l=>{const e=it.get(l);if(!e)throw new Error(`Unknown room type ${l}`);return e},ml=(l,e)=>{if(!l)return null;const o=l.hotspots.map(t=>t?Ve.indexOf(t):"").join("-");return`${e}-${Se.indexOf(l.type)}-${l.orientation}-${o}`},He=l=>{const e=new URLSearchParams;for(const o of l.floors){const t=o.rooms.flat().map(ml).filter(s=>!!s).join(".");e.set(`f${o.num}`,t)}return e},dl=(l,e)=>{const o=e.split("-"),t=Number(o[0]),s=t%he,n=Math.floor(t/he),r=Se[Number(o[1])];if(!r)throw new Error(`Unknown room type ${o[1]}`);const i=Number(o[2]),a=[];for(let f=0;f<r.hotspots.length;f++)a[f]=o[f+3]?Ve[Number(o[f+3])]:null;return{floor:l,x:s,y:n,type:r,orientation:i,hotspots:a}},vl=l=>{const e=el();for(const o of l.keys()){if(!o.startsWith("f"))continue;const t=Number(o.substring(1)),s=e.floors.find(r=>r.num===t);if(!s)throw new Error(`Unknown floor ${t}`);const n=l.get(o);if(n){const r=n.split(".");for(const i of r){const a=dl(s,i);s.rooms[a.y][a.x]=a}}}return e};function Et(l,e,o){const t=l.slice();return t[1]=e[o],t}function pl(l){let e,o;return{c(){e=b("div"),o=V("Your house looks good to go!"),this.h()},l(t){e=k(t,"DIV",{class:!0});var s=E(e);o=P(s,"Your house looks good to go!"),s.forEach(_),this.h()},h(){I(e,"class","alert success svelte-159br2x")},m(t,s){C(t,e,s),h(e,o)},p:z,d(t){t&&_(e)}}}function gl(l){let e,o=l[0],t=[];for(let s=0;s<o.length;s+=1)t[s]=yt(Et(l,o,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=ne()},l(s){for(let n=0;n<t.length;n+=1)t[n].l(s);e=ne()},m(s,n){for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(s,n);C(s,e,n)},p(s,n){if(n&1){o=s[0];let r;for(r=0;r<o.length;r+=1){const i=Et(s,o,r);t[r]?t[r].p(i,n):(t[r]=yt(i),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=o.length}},d(s){ae(t,s),s&&_(e)}}}function yt(l){let e,o=l[1]+"",t;return{c(){e=b("div"),t=V(o),this.h()},l(s){e=k(s,"DIV",{class:!0});var n=E(e);t=P(n,o),n.forEach(_),this.h()},h(){I(e,"class","alert error svelte-159br2x")},m(s,n){C(s,e,n),h(e,t)},p(s,n){n&1&&o!==(o=s[1]+"")&&U(t,o)},d(s){s&&_(e)}}}function bl(l){let e;function o(n,r){return n[0].length>0?gl:pl}let t=o(l),s=t(l);return{c(){s.c(),e=ne()},l(n){s.l(n),e=ne()},m(n,r){s.m(n,r),C(n,e,r)},p(n,[r]){t===(t=o(n))&&s?s.p(n,r):(s.d(1),s=t(n),s&&(s.c(),s.m(e.parentNode,e)))},i:z,o:z,d(n){s.d(n),n&&_(e)}}}function kl(l,e,o){let{errors:t}=e;return l.$$set=s=>{"errors"in s&&o(0,t=s.errors)},[t]}class El extends me{constructor(e){super(),de(this,e,kl,bl,re,{errors:0})}}function yl(l){let e,o,t;return{c(){e=b("ul"),o=b("li"),t=V("Click a cell to the left to place a new room"),this.h()},l(s){e=k(s,"UL",{class:!0});var n=E(e);o=k(n,"LI",{});var r=E(o);t=P(r,"Click a cell to the left to place a new room"),r.forEach(_),n.forEach(_),this.h()},h(){I(e,"class","svelte-ukzczf")},m(s,n){C(s,e,n),h(e,o),h(o,t)},p:z,i:z,o:z,d(s){s&&_(e)}}}class wl extends me{constructor(e){super(),de(this,e,null,yl,re,{})}}function wt(l,e,o){const t=l.slice();return t[2]=e[o],t}function Tt(l){let e,o,t=l[2].name+"",s,n,r,i=l[2].value+"",a,f,c,u=l[2].limit+"",d,T,L,y=l[2].level+"",D,v;return{c(){e=b("tr"),o=b("td"),s=V(t),n=O(),r=b("td"),a=V(i),f=O(),c=b("td"),d=V(u),T=O(),L=b("td"),D=V(y),v=O(),this.h()},l(m){e=k(m,"TR",{});var p=E(e);o=k(p,"TD",{});var S=E(o);s=P(S,t),S.forEach(_),n=q(p),r=k(p,"TD",{});var g=E(r);a=P(g,i),g.forEach(_),f=q(p),c=k(p,"TD",{});var w=E(c);d=P(w,u),w.forEach(_),T=q(p),L=k(p,"TD",{});var N=E(L);D=P(N,y),N.forEach(_),v=q(p),p.forEach(_),this.h()},h(){se(e,"max",l[2].level===l[1])},m(m,p){C(m,e,p),h(e,o),h(o,s),h(e,n),h(e,r),h(r,a),h(e,f),h(e,c),h(c,d),h(e,T),h(e,L),h(L,D),h(e,v)},p(m,p){p&1&&t!==(t=m[2].name+"")&&U(s,t),p&1&&i!==(i=m[2].value+"")&&U(a,i),p&1&&u!==(u=m[2].limit+"")&&U(d,u),p&1&&y!==(y=m[2].level+"")&&U(D,y),p&3&&se(e,"max",m[2].level===m[1])},d(m){m&&_(e)}}}function Tl(l){let e,o,t,s,n,r,i,a,f,c,u,d,T,L,y,D,v=l[0],m=[];for(let p=0;p<v.length;p+=1)m[p]=Tt(wt(l,v,p));return{c(){e=b("table"),o=b("thead"),t=b("tr"),s=b("th"),n=V("Requirement"),r=O(),i=b("th"),a=V("Current"),f=O(),c=b("th"),u=V("Limit"),d=O(),T=b("th"),L=V("Min. Level"),y=O(),D=b("tbody");for(let p=0;p<m.length;p+=1)m[p].c();this.h()},l(p){e=k(p,"TABLE",{class:!0});var S=E(e);o=k(S,"THEAD",{});var g=E(o);t=k(g,"TR",{});var w=E(t);s=k(w,"TH",{});var N=E(s);n=P(N,"Requirement"),N.forEach(_),r=q(w),i=k(w,"TH",{});var M=E(i);a=P(M,"Current"),M.forEach(_),f=q(w),c=k(w,"TH",{});var F=E(c);u=P(F,"Limit"),F.forEach(_),d=q(w),T=k(w,"TH",{});var H=E(T);L=P(H,"Min. Level"),H.forEach(_),w.forEach(_),g.forEach(_),y=q(S),D=k(S,"TBODY",{});var $=E(D);for(let G=0;G<m.length;G+=1)m[G].l($);$.forEach(_),S.forEach(_),this.h()},h(){I(e,"class","svelte-fdv1qg")},m(p,S){C(p,e,S),h(e,o),h(o,t),h(t,s),h(s,n),h(t,r),h(t,i),h(i,a),h(t,f),h(t,c),h(c,u),h(t,d),h(t,T),h(T,L),h(e,y),h(e,D);for(let g=0;g<m.length;g+=1)m[g]&&m[g].m(D,null)},p(p,[S]){if(S&3){v=p[0];let g;for(g=0;g<v.length;g+=1){const w=wt(p,v,g);m[g]?m[g].p(w,S):(m[g]=Tt(w),m[g].c(),m[g].m(D,null))}for(;g<m.length;g+=1)m[g].d(1);m.length=v.length}},i:z,o:z,d(p){p&&_(e),ae(m,p)}}}function Ll(l,e,o){let t,{requirements:s}=e;return l.$$set=n=>{"requirements"in n&&o(0,s=n.requirements)},l.$$.update=()=>{var n;l.$$.dirty&1&&o(1,t=(n=s[0])==null?void 0:n.level)},[s,t]}class Dl extends me{constructor(e){super(),de(this,e,Ll,Tl,re,{requirements:0})}}function Lt(l,e,o){const t=l.slice();return t[2]=e[o].type,t[0]=e[o].rooms,t}function Dt(l){let e,o,t=l[2].name+"",s,n,r,i=l[2].minLvl+"",a,f,c,u=l[2].cost+"",d,T,L,y=(l[0].length||"-")+"",D,v,m,p=(l[0].length>0?l[0].length*l[2].cost:"-")+"",S,g;return{c(){e=b("tr"),o=b("td"),s=V(t),n=O(),r=b("td"),a=V(i),f=O(),c=b("td"),d=V(u),T=O(),L=b("td"),D=V(y),v=O(),m=b("td"),S=V(p),g=O(),this.h()},l(w){e=k(w,"TR",{});var N=E(e);o=k(N,"TD",{});var M=E(o);s=P(M,t),M.forEach(_),n=q(N),r=k(N,"TD",{class:!0});var F=E(r);a=P(F,i),F.forEach(_),f=q(N),c=k(N,"TD",{class:!0});var H=E(c);d=P(H,u),H.forEach(_),T=q(N),L=k(N,"TD",{class:!0});var $=E(L);D=P($,y),$.forEach(_),v=q(N),m=k(N,"TD",{class:!0});var G=E(m);S=P(G,p),G.forEach(_),g=q(N),N.forEach(_),this.h()},h(){I(r,"class","right"),I(c,"class","right"),I(L,"class","right"),I(m,"class","right")},m(w,N){C(w,e,N),h(e,o),h(o,s),h(e,n),h(e,r),h(r,a),h(e,f),h(e,c),h(c,d),h(e,T),h(e,L),h(L,D),h(e,v),h(e,m),h(m,S),h(e,g)},p(w,N){N&2&&t!==(t=w[2].name+"")&&U(s,t),N&2&&i!==(i=w[2].minLvl+"")&&U(a,i),N&2&&u!==(u=w[2].cost+"")&&U(d,u),N&2&&y!==(y=(w[0].length||"-")+"")&&U(D,y),N&2&&p!==(p=(w[0].length>0?w[0].length*w[2].cost:"-")+"")&&U(S,p)},d(w){w&&_(e)}}}function Rl(l){let e,o,t,s,n,r,i,a,f,c,u,d,T,L,y,D,v,m,p,S=l[1],g=[];for(let w=0;w<S.length;w+=1)g[w]=Dt(Lt(l,S,w));return{c(){e=b("table"),o=b("thead"),t=b("tr"),s=b("th"),n=V("Type"),r=O(),i=b("th"),a=V("Level"),f=O(),c=b("th"),u=V("Cost"),d=O(),T=b("th"),L=V("Amount"),y=O(),D=b("th"),v=V("Total"),m=O(),p=b("tbody");for(let w=0;w<g.length;w+=1)g[w].c();this.h()},l(w){e=k(w,"TABLE",{class:!0});var N=E(e);o=k(N,"THEAD",{});var M=E(o);t=k(M,"TR",{});var F=E(t);s=k(F,"TH",{});var H=E(s);n=P(H,"Type"),H.forEach(_),r=q(F),i=k(F,"TH",{class:!0});var $=E(i);a=P($,"Level"),$.forEach(_),f=q(F),c=k(F,"TH",{class:!0});var G=E(c);u=P(G,"Cost"),G.forEach(_),d=q(F),T=k(F,"TH",{class:!0});var te=E(T);L=P(te,"Amount"),te.forEach(_),y=q(F),D=k(F,"TH",{class:!0});var Q=E(D);v=P(Q,"Total"),Q.forEach(_),F.forEach(_),M.forEach(_),m=q(N),p=k(N,"TBODY",{});var W=E(p);for(let Z=0;Z<g.length;Z+=1)g[Z].l(W);W.forEach(_),N.forEach(_),this.h()},h(){I(i,"class","right"),I(c,"class","right"),I(T,"class","right"),I(D,"class","right"),I(e,"class","svelte-fdv1qg")},m(w,N){C(w,e,N),h(e,o),h(o,t),h(t,s),h(s,n),h(t,r),h(t,i),h(i,a),h(t,f),h(t,c),h(c,u),h(t,d),h(t,T),h(T,L),h(t,y),h(t,D),h(D,v),h(e,m),h(e,p);for(let M=0;M<g.length;M+=1)g[M]&&g[M].m(p,null)},p(w,[N]){if(N&2){S=w[1];let M;for(M=0;M<S.length;M+=1){const F=Lt(w,S,M);g[M]?g[M].p(F,N):(g[M]=Dt(F),g[M].c(),g[M].m(p,null))}for(;M<g.length;M+=1)g[M].d(1);g.length=S.length}},i:z,o:z,d(w){w&&_(e),ae(g,w)}}}function Sl(l,e,o){let t,{rooms:s}=e;return l.$$set=n=>{"rooms"in n&&o(0,s=n.rooms)},l.$$.update=()=>{l.$$.dirty&1&&o(1,t=Se.map(n=>({type:n,rooms:s.filter(r=>(r==null?void 0:r.type.key)===n.key)})).sort((n,r)=>r.rooms.length-n.rooms.length))},[s,t]}class Il extends me{constructor(e){super(),de(this,e,Sl,Rl,re,{rooms:0})}}function ze(l,{delay:e=0,duration:o=400,easing:t=ll}={}){const s=+getComputedStyle(l).opacity;return{delay:e,duration:o,easing:t,css:n=>`opacity: ${n*s}`}}const Nl=l=>({tab:l&4}),Rt=l=>({tab:l[2]});function St(l,e,o){const t=l.slice();return t[6]=e[o],t}function It(l){let e,o=l[6]+"",t,s,n,r;function i(){return l[5](l[6])}return{c(){e=b("button"),t=V(o),s=O(),this.h()},l(a){e=k(a,"BUTTON",{class:!0});var f=E(e);t=P(f,o),s=q(f),f.forEach(_),this.h()},h(){I(e,"class","svelte-44ndb8"),se(e,"active",l[2]===l[6])},m(a,f){C(a,e,f),h(e,t),h(e,s),n||(r=le(e,"click",i),n=!0)},p(a,f){l=a,f&1&&o!==(o=l[6]+"")&&U(t,o),f&5&&se(e,"active",l[2]===l[6])},d(a){a&&_(e),n=!1,r()}}}function Nt(l){let e,o,t;const s=l[4].default,n=ol(s,l,l[3],Rt);return{c(){e=b("div"),n&&n.c(),this.h()},l(r){e=k(r,"DIV",{class:!0});var i=E(e);n&&n.l(i),i.forEach(_),this.h()},h(){I(e,"class","tab svelte-44ndb8")},m(r,i){C(r,e,i),n&&n.m(e,null),t=!0},p(r,i){n&&n.p&&(!t||i&12)&&sl(n,s,r,r[3],t?rl(s,r[3],i,Nl):nl(r[3]),Rt)},i(r){t||(Y(n,r),r&&ct(()=>{t&&(o||(o=Ge(e,ze,{},!0)),o.run(1))}),t=!0)},o(r){A(n,r),r&&(o||(o=Ge(e,ze,{},!1)),o.run(0)),t=!1},d(r){r&&_(e),n&&n.d(r),r&&o&&o.end()}}}function Ol(l){let e,o,t,s,n=l[2],r,i=l[0],a=[];for(let c=0;c<i.length;c+=1)a[c]=It(St(l,i,c));let f=Nt(l);return{c(){e=b("div"),o=b("div");for(let c=0;c<a.length;c+=1)a[c].c();t=O(),s=b("div"),f.c(),this.h()},l(c){e=k(c,"DIV",{class:!0});var u=E(e);o=k(u,"DIV",{class:!0});var d=E(o);for(let L=0;L<a.length;L+=1)a[L].l(d);d.forEach(_),t=q(u),s=k(u,"DIV",{class:!0});var T=E(s);f.l(T),T.forEach(_),u.forEach(_),this.h()},h(){I(o,"class","navigation"),I(s,"class","content svelte-44ndb8"),I(e,"class","container svelte-44ndb8"),se(e,"inverted",l[1])},m(c,u){C(c,e,u),h(e,o);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(o,null);h(e,t),h(e,s),f.m(s,null),r=!0},p(c,[u]){if(u&5){i=c[0];let d;for(d=0;d<i.length;d+=1){const T=St(c,i,d);a[d]?a[d].p(T,u):(a[d]=It(T),a[d].c(),a[d].m(o,null))}for(;d<a.length;d+=1)a[d].d(1);a.length=i.length}u&4&&re(n,n=c[2])?(we(),A(f,1,1,z),Te(),f=Nt(c),f.c(),Y(f,1),f.m(s,null)):f.p(c,u),(!r||u&2)&&se(e,"inverted",c[1])},i(c){r||(Y(f),r=!0)},o(c){A(f),r=!1},d(c){c&&_(e),ae(a,c),f.d(c)}}}function ql(l,e,o){let{$$slots:t={},$$scope:s}=e,{tabs:n}=e,{inverted:r=!1}=e,i=n[0];const a=f=>o(2,i=f);return l.$$set=f=>{"tabs"in f&&o(0,n=f.tabs),"inverted"in f&&o(1,r=f.inverted),"$$scope"in f&&o(3,s=f.$$scope)},[n,r,i,s,t,a]}class tl extends me{constructor(e){super(),de(this,e,ql,Ol,re,{tabs:0,inverted:1})}}const ft=l=>(l==null?void 0:l.type.doors.map(e=>ht(e,l.orientation)))||[];function Ot(l,e,o){const t=l.slice();return t[8]=e[o],t}function Vl(l){let e,o=l[1]&&qt(l);return{c(){e=b("div"),o&&o.c(),this.h()},l(t){e=k(t,"DIV",{class:!0});var s=E(e);o&&o.l(s),s.forEach(_),this.h()},h(){I(e,"class","content svelte-1t8fwgu"),se(e,"below",!!l[1]),se(e,"supported",l[1]&&!l[1].type.open)},m(t,s){C(t,e,s),o&&o.m(e,null)},p(t,s){t[1]?o?o.p(t,s):(o=qt(t),o.c(),o.m(e,null)):o&&(o.d(1),o=null),s&2&&se(e,"below",!!t[1]),s&2&&se(e,"supported",t[1]&&!t[1].type.open)},d(t){t&&_(e),o&&o.d()}}}function Pl(l){let e,o,t,s,n=l[0].type.name+"",r,i,a,f=l[5],c=[];for(let u=0;u<f.length;u+=1)c[u]=Vt(Ot(l,f,u));return{c(){e=b("div"),o=O(),t=b("div"),s=b("div"),r=V(n),i=O();for(let u=0;u<c.length;u+=1)c[u].c();a=ne(),this.h()},l(u){e=k(u,"DIV",{class:!0}),E(e).forEach(_),o=q(u),t=k(u,"DIV",{class:!0});var d=E(t);s=k(d,"DIV",{class:!0});var T=E(s);r=P(T,n),T.forEach(_),d.forEach(_),i=q(u);for(let L=0;L<c.length;L+=1)c[L].l(u);a=ne(),this.h()},h(){I(e,"class","marker svelte-1t8fwgu"),J(e,"background-color",l[0].type.color),I(s,"class","title svelte-1t8fwgu"),I(t,"class","content svelte-1t8fwgu"),J(t,"color",l[0].type.color),J(t,"background-color",l[0].type.bg)},m(u,d){C(u,e,d),C(u,o,d),C(u,t,d),h(t,s),h(s,r),C(u,i,d);for(let T=0;T<c.length;T+=1)c[T]&&c[T].m(u,d);C(u,a,d)},p(u,d){if(d&1&&J(e,"background-color",u[0].type.color),d&1&&n!==(n=u[0].type.name+"")&&U(r,n),d&1&&J(t,"color",u[0].type.color),d&1&&J(t,"background-color",u[0].type.bg),d&36){f=u[5];let T;for(T=0;T<f.length;T+=1){const L=Ot(u,f,T);c[T]?c[T].p(L,d):(c[T]=Vt(L),c[T].c(),c[T].m(a.parentNode,a))}for(;T<c.length;T+=1)c[T].d(1);c.length=f.length}},d(u){u&&_(e),u&&_(o),u&&_(t),u&&_(i),ae(c,u),u&&_(a)}}}function qt(l){let e,o=l[1].type.name+"",t;return{c(){e=b("div"),t=V(o),this.h()},l(s){e=k(s,"DIV",{class:!0});var n=E(e);t=P(n,o),n.forEach(_),this.h()},h(){I(e,"class","title svelte-1t8fwgu")},m(s,n){C(s,e,n),h(e,t)},p(s,n){n&2&&o!==(o=s[1].type.name+"")&&U(t,o)},d(s){s&&_(e)}}}function Vt(l){let e,o;return{c(){e=b("div"),this.h()},l(t){e=k(t,"DIV",{class:!0}),E(e).forEach(_),this.h()},h(){I(e,"class",o="door "+nt(l[8])+" svelte-1t8fwgu"),se(e,"connected",l[2].includes(l[8]))},m(t,s){C(t,e,s)},p(t,s){s&32&&o!==(o="door "+nt(t[8])+" svelte-1t8fwgu")&&I(e,"class",o),s&36&&se(e,"connected",t[2].includes(t[8]))},d(t){t&&_(e)}}}function Pt(l){let e;return{c(){e=b("div"),this.h()},l(o){e=k(o,"DIV",{class:!0}),E(e).forEach(_),this.h()},h(){I(e,"class","selected svelte-1t8fwgu")},m(o,t){C(o,e,t)},d(o){o&&_(e)}}}function Cl(l){let e,o,t,s,n;function r(c,u){return c[0]?Pl:Vl}let i=r(l),a=i(l),f=l[3]&&Pt();return{c(){e=b("div"),a.c(),o=O(),f&&f.c(),this.h()},l(c){e=k(c,"DIV",{class:!0});var u=E(e);a.l(u),o=q(u),f&&f.l(u),u.forEach(_),this.h()},h(){I(e,"class",t="cell "+l[4]+" svelte-1t8fwgu")},m(c,u){C(c,e,u),a.m(e,null),h(e,o),f&&f.m(e,null),s||(n=[le(e,"click",Pe(l[6])),le(e,"keypress",Pe(l[6]))],s=!0)},p(c,[u]){i===(i=r(c))&&a?a.p(c,u):(a.d(1),a=i(c),a&&(a.c(),a.m(e,o))),c[3]?f||(f=Pt(),f.c(),f.m(e,null)):f&&(f.d(1),f=null),u&16&&t!==(t="cell "+c[4]+" svelte-1t8fwgu")&&I(e,"class",t)},i:z,o:z,d(c){c&&_(e),a.d(),f&&f.d(),s=!1,ut(n)}}}function Bl(l,e,o){let t,s,{room:n}=e,{below:r}=e,{connections:i}=e,{selected:a}=e;const f=xt(),c=()=>f("selected");return l.$$set=u=>{"room"in u&&o(0,n=u.room),"below"in u&&o(1,r=u.below),"connections"in u&&o(2,i=u.connections),"selected"in u&&o(3,a=u.selected)},l.$$.update=()=>{l.$$.dirty&1&&o(5,t=ft(n)),l.$$.dirty&1&&o(4,s=n?nt(n.orientation):"")},[n,r,i,a,s,t,c]}class Ml extends me{constructor(e){super(),de(this,e,Bl,Cl,re,{room:0,below:1,connections:2,selected:3})}}function Ct(l,e,o){const t=l.slice();return t[29]=e[o],t[31]=o,t}function Bt(l,e,o){const t=l.slice();return t[32]=e[o],t}function Mt(l,e,o){const t=l.slice();t[35]=e[o];const s=t[35].floors&&!t[35].floors.includes(t[0].num);return t[36]=s,t}function Wl(l){let e,o,t,s,n,r,i,a,f,c,u,d,T=l[11],L=[];for(let m=0;m<T.length;m+=1)L[m]=Wt(Mt(l,T,m));let y=l[1]&&Ft(l),D=l[0].num>=0&&l[3]&&Yt(),v=l[1]&&Ht(l);return{c(){e=b("div"),o=b("select"),t=b("option"),s=V("Pick a room...");for(let m=0;m<L.length;m+=1)L[m].c();r=O(),y&&y.c(),i=O(),D&&D.c(),a=O(),v&&v.c(),f=ne(),this.h()},l(m){e=k(m,"DIV",{class:!0});var p=E(e);o=k(p,"SELECT",{class:!0});var S=E(o);t=k(S,"OPTION",{});var g=E(t);s=P(g,"Pick a room..."),g.forEach(_);for(let w=0;w<L.length;w+=1)L[w].l(S);S.forEach(_),r=q(p),y&&y.l(p),p.forEach(_),i=q(m),D&&D.l(m),a=q(m),v&&v.l(m),f=ne(),this.h()},h(){t.__value="",t.value=t.__value,t.disabled=!0,t.selected=!0,I(o,"class","svelte-102wwix"),I(e,"class","svelte-102wwix")},m(m,p){var S;C(m,e,p),h(e,o),h(o,t),h(t,s);for(let g=0;g<L.length;g+=1)L[g]&&L[g].m(o,null);Ce(o,((S=l[1])==null?void 0:S.type.key)||""),h(e,r),y&&y.m(e,null),C(m,i,p),D&&D.m(m,p),C(m,a,p),v&&v.m(m,p),C(m,f,p),c=!0,u||(d=le(o,"change",l[19]),u=!0)},p(m,p){var S,g;if(p[0]&2049){T=m[11];let w;for(w=0;w<T.length;w+=1){const N=Mt(m,T,w);L[w]?L[w].p(N,p):(L[w]=Wt(N),L[w].c(),L[w].m(o,null))}for(;w<L.length;w+=1)L[w].d(1);L.length=T.length}(!c||p[0]&2050&&n!==(n=((S=m[1])==null?void 0:S.type.key)||""))&&Ce(o,((g=m[1])==null?void 0:g.type.key)||""),m[1]?y?y.p(m,p):(y=Ft(m),y.c(),y.m(e,null)):y&&(y.d(1),y=null),m[0].num>=0&&m[3]?D||(D=Yt(),D.c(),D.m(a.parentNode,a)):D&&(D.d(1),D=null),m[1]?v?(v.p(m,p),p[0]&2&&Y(v,1)):(v=Ht(m),v.c(),Y(v,1),v.m(f.parentNode,f)):v&&(we(),A(v,1,1,()=>{v=null}),Te())},i(m){c||(Y(v),c=!0)},o(m){A(v),c=!1},d(m){m&&_(e),ae(L,m),y&&y.d(),m&&_(i),D&&D.d(m),m&&_(a),v&&v.d(m),m&&_(f),u=!1,d()}}}function Fl(l){let e,o;return{c(){e=b("p"),o=V("There is no supporting room below!"),this.h()},l(t){e=k(t,"P",{class:!0});var s=E(e);o=P(s,"There is no supporting room below!"),s.forEach(_),this.h()},h(){I(e,"class","svelte-102wwix")},m(t,s){C(t,e,s),h(e,o)},p:z,i:z,o:z,d(t){t&&_(e)}}}function Wt(l){var f;let e,o=l[35].name+"",t,s=l[36]?` (floors: ${(f=l[35].floors)==null?void 0:f.join(", ")})`:"",n,r,i,a;return{c(){e=b("option"),t=V(o),n=V(s),r=O(),this.h()},l(c){e=k(c,"OPTION",{});var u=E(e);t=P(u,o),n=P(u,s),r=q(u),u.forEach(_),this.h()},h(){e.disabled=i=l[36],e.__value=a=l[35].key,e.value=e.__value},m(c,u){C(c,e,u),h(e,t),h(e,n),h(e,r)},p(c,u){var d;u[0]&2048&&o!==(o=c[35].name+"")&&U(t,o),u[0]&2049&&s!==(s=c[36]?` (floors: ${(d=c[35].floors)==null?void 0:d.join(", ")})`:"")&&U(n,s),u[0]&2049&&i!==(i=c[36])&&(e.disabled=i),u[0]&2048&&a!==(a=c[35].key)&&(e.__value=a,e.value=e.__value)},d(c){c&&_(e)}}}function Ft(l){let e,o,t,s,n,r,i,a;return{c(){e=b("button"),o=b("i"),t=O(),s=b("button"),n=b("i"),this.h()},l(f){e=k(f,"BUTTON",{class:!0});var c=E(e);o=k(c,"I",{class:!0}),E(o).forEach(_),c.forEach(_),t=q(f),s=k(f,"BUTTON",{class:!0});var u=E(s);n=k(u,"I",{class:!0}),E(n).forEach(_),u.forEach(_),this.h()},h(){I(o,"class","icofont-ui-rotation"),I(e,"class","rotate svelte-102wwix"),I(n,"class","icofont-ui-delete"),I(s,"class","remove svelte-102wwix"),s.disabled=r=!!l[3]},m(f,c){C(f,e,c),h(e,o),C(f,t,c),C(f,s,c),h(s,n),i||(a=[le(e,"click",Pe(function(){al(l[14])&&l[14].apply(this,arguments)})),le(s,"click",Pe(l[20]))],i=!0)},p(f,c){l=f,c[0]&8&&r!==(r=!!l[3])&&(s.disabled=r)},d(f){f&&_(e),f&&_(t),f&&_(s),i=!1,ut(a)}}}function Yt(l){let e,o,t,s,n;return{c(){e=b("div"),o=b("i"),t=O(),s=b("p"),n=V("This room is supportting the one above it!"),this.h()},l(r){e=k(r,"DIV",{class:!0});var i=E(e);o=k(i,"I",{class:!0}),E(o).forEach(_),t=q(i),s=k(i,"P",{class:!0});var a=E(s);n=P(a,"This room is supportting the one above it!"),a.forEach(_),i.forEach(_),this.h()},h(){I(o,"class","icofont-info svelte-102wwix"),I(s,"class","svelte-102wwix"),I(e,"class","svelte-102wwix")},m(r,i){C(r,e,i),h(e,o),h(e,t),h(e,s),h(s,n)},d(r){r&&_(e)}}}function Ht(l){let e,o;return e=new tl({props:{tabs:["Details","Furniture"],inverted:!0,$$slots:{default:[$l,({tab:t})=>({28:t}),({tab:t})=>[t?268435456:0]]},$$scope:{ctx:l}}}),{c(){ve(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){ge(e,t,s),o=!0},p(t,s){const n={};s[0]&268440578|s[1]&256&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){o||(Y(e.$$.fragment,t),o=!0)},o(t){A(e.$$.fragment,t),o=!1},d(t){be(e,t)}}}function Yl(l){let e,o,t=l[10],s=[];for(let n=0;n<t.length;n+=1)s[n]=Ut(Ct(l,t,n));return{c(){e=b("table"),o=b("tbody");for(let n=0;n<s.length;n+=1)s[n].c()},l(n){e=k(n,"TABLE",{});var r=E(e);o=k(r,"TBODY",{});var i=E(o);for(let a=0;a<s.length;a+=1)s[a].l(i);i.forEach(_),r.forEach(_)},m(n,r){C(n,e,r),h(e,o);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(o,null)},p(n,r){if(r[0]&5122){t=n[10];let i;for(i=0;i<t.length;i+=1){const a=Ct(n,t,i);s[i]?s[i].p(a,r):(s[i]=Ut(a),s[i].c(),s[i].m(o,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=t.length}},d(n){n&&_(e),ae(s,n)}}}function Hl(l){let e,o,t,s,n,r,i,a=l[1].type.name+"",f,c,u,d,T,L,y,D=l[1].type.cost+"",v,m,p,S,g,w,N,M=l[1].type.minLvl+"",F;return{c(){e=b("table"),o=b("tbody"),t=b("tr"),s=b("td"),n=V("Name"),r=O(),i=b("td"),f=V(a),c=O(),u=b("tr"),d=b("td"),T=V("Cost"),L=O(),y=b("td"),v=V(D),m=O(),p=b("tr"),S=b("td"),g=V("Min. Level"),w=O(),N=b("td"),F=V(M)},l(H){e=k(H,"TABLE",{});var $=E(e);o=k($,"TBODY",{});var G=E(o);t=k(G,"TR",{});var te=E(t);s=k(te,"TD",{});var Q=E(s);n=P(Q,"Name"),Q.forEach(_),r=q(te),i=k(te,"TD",{});var W=E(i);f=P(W,a),W.forEach(_),te.forEach(_),c=q(G),u=k(G,"TR",{});var Z=E(u);d=k(Z,"TD",{});var ke=E(d);T=P(ke,"Cost"),ke.forEach(_),L=q(Z),y=k(Z,"TD",{});var De=E(y);v=P(De,D),De.forEach(_),Z.forEach(_),m=q(G),p=k(G,"TR",{});var Ee=E(p);S=k(Ee,"TD",{});var ce=E(S);g=P(ce,"Min. Level"),ce.forEach(_),w=q(Ee),N=k(Ee,"TD",{});var Ie=E(N);F=P(Ie,M),Ie.forEach(_),Ee.forEach(_),G.forEach(_),$.forEach(_)},m(H,$){C(H,e,$),h(e,o),h(o,t),h(t,s),h(s,n),h(t,r),h(t,i),h(i,f),h(o,c),h(o,u),h(u,d),h(d,T),h(u,L),h(u,y),h(y,v),h(o,m),h(o,p),h(p,S),h(S,g),h(p,w),h(p,N),h(N,F)},p(H,$){$[0]&2&&a!==(a=H[1].type.name+"")&&U(f,a),$[0]&2&&D!==(D=H[1].type.cost+"")&&U(v,D),$[0]&2&&M!==(M=H[1].type.minLvl+"")&&U(F,M)},d(H){H&&_(e)}}}function $t(l){let e,o=l[32].name+"",t,s;return{c(){e=b("option"),t=V(o),this.h()},l(n){e=k(n,"OPTION",{});var r=E(e);t=P(r,o),r.forEach(_),this.h()},h(){e.__value=s=l[32].key,e.value=e.__value},m(n,r){C(n,e,r),h(e,t)},p(n,r){r[0]&1024&&o!==(o=n[32].name+"")&&U(t,o),r[0]&1024&&s!==(s=n[32].key)&&(e.__value=s,e.value=e.__value)},d(n){n&&_(e)}}}function Ut(l){let e,o,t=l[29].name+"",s,n,r,i,a,f,c,u,d,T,L=l[29].options.map(l[21]),y=[];for(let v=0;v<L.length;v+=1)y[v]=$t(Bt(l,L,v));function D(...v){return l[22](l[31],...v)}return{c(){e=b("tr"),o=b("td"),s=V(t),n=O(),r=b("td"),i=b("select"),a=b("option"),f=V("None");for(let v=0;v<y.length;v+=1)y[v].c();u=O(),this.h()},l(v){e=k(v,"TR",{});var m=E(e);o=k(m,"TD",{});var p=E(o);s=P(p,t),p.forEach(_),n=q(m),r=k(m,"TD",{});var S=E(r);i=k(S,"SELECT",{});var g=E(i);a=k(g,"OPTION",{});var w=E(a);f=P(w,"None"),w.forEach(_);for(let N=0;N<y.length;N+=1)y[N].l(g);g.forEach(_),S.forEach(_),u=q(m),m.forEach(_),this.h()},h(){a.__value="",a.value=a.__value},m(v,m){var p;C(v,e,m),h(e,o),h(o,s),h(e,n),h(e,r),h(r,i),h(i,a),h(a,f);for(let S=0;S<y.length;S+=1)y[S]&&y[S].m(i,null);Ce(i,((p=l[1].hotspots[l[31]])==null?void 0:p.key)||""),h(e,u),d||(T=le(i,"change",D),d=!0)},p(v,m){var p,S;if(l=v,m[0]&1024&&t!==(t=l[29].name+"")&&U(s,t),m[0]&1024){L=l[29].options.map(l[21]);let g;for(g=0;g<L.length;g+=1){const w=Bt(l,L,g);y[g]?y[g].p(w,m):(y[g]=$t(w),y[g].c(),y[g].m(i,null))}for(;g<y.length;g+=1)y[g].d(1);y.length=L.length}m[0]&2050&&c!==(c=((p=l[1].hotspots[l[31]])==null?void 0:p.key)||"")&&Ce(i,((S=l[1].hotspots[l[31]])==null?void 0:S.key)||"")},d(v){v&&_(e),ae(y,v),d=!1,T()}}}function $l(l){let e;function o(n,r){if(n[28]==="Details")return Hl;if(n[28]==="Furniture")return Yl}let t=o(l),s=t&&t(l);return{c(){s&&s.c(),e=ne()},l(n){s&&s.l(n),e=ne()},m(n,r){s&&s.m(n,r),C(n,e,r)},p(n,r){t===(t=o(n))&&s?s.p(n,r):(s&&s.d(1),s=t&&t(n),s&&(s.c(),s.m(e.parentNode,e)))},d(n){s&&s.d(n),n&&_(e)}}}function Ul(l){let e,o,t,s,n;const r=[Fl,Wl],i=[];function a(f,c){var u;return f[0].num>0&&(!f[2]||(u=f[2].type)!=null&&u.open)?0:1}return t=a(l),s=i[t]=r[t](l),{c(){e=b("div"),o=b("div"),s.c(),this.h()},l(f){e=k(f,"DIV",{class:!0});var c=E(e);o=k(c,"DIV",{class:!0});var u=E(o);s.l(u),u.forEach(_),c.forEach(_),this.h()},h(){I(o,"class","content svelte-102wwix"),I(e,"class","popup svelte-102wwix"),J(e,"top",l[9]),J(e,"bottom",l[8]),J(e,"left",l[7]),J(e,"right",l[6]),J(e,"max-height",l[5]),J(e,"maxWidth",l[4])},m(f,c){C(f,e,c),h(e,o),i[t].m(o,null),n=!0},p(f,c){let u=t;t=a(f),t===u?i[t].p(f,c):(we(),A(i[u],1,1,()=>{i[u]=null}),Te(),s=i[t],s?s.p(f,c):(s=i[t]=r[t](f),s.c()),Y(s,1),s.m(o,null)),c[0]&512&&J(e,"top",f[9]),c[0]&256&&J(e,"bottom",f[8]),c[0]&128&&J(e,"left",f[7]),c[0]&64&&J(e,"right",f[6]),c[0]&32&&J(e,"max-height",f[5]),c[0]&16&&J(e,"maxWidth",f[4])},i(f){n||(Y(s),n=!0)},o(f){A(s),n=!1},d(f){f&&_(e),i[t].d()}}}function Al(l,e,o){let t,s,n,r,i,a,f,c,u,d,T,L,y;const D=he/2,v=Re/2,m=100/he,p=100/Re;let{floor:S}=e,{x:g}=e,{y:w}=e,{room:N}=e,{below:M}=e,{above:F}=e;const H=xt(),$=W=>s(W.currentTarget.value),G=()=>s(null),te=W=>kt(W),Q=(W,Z)=>n(W,Z.currentTarget.value);return l.$$set=W=>{"floor"in W&&o(0,S=W.floor),"x"in W&&o(15,g=W.x),"y"in W&&o(16,w=W.y),"room"in W&&o(1,N=W.room),"below"in W&&o(2,M=W.below),"above"in W&&o(3,F=W.above)},l.$$.update=()=>{l.$$.dirty[0]&98304&&o(14,t=()=>{H("rotateRoom",{x:g,y:w})}),l.$$.dirty[0]&98304&&o(13,s=W=>{H("changeRoomType",{x:g,y:w,type:W?_l(W):null})}),l.$$.dirty[0]&98304&&o(12,n=(W,Z)=>{H("changeFurniture",{x:g,y:w,hotspotIndex:W,type:Z?kt(Z):null})}),l.$$.dirty[0]&2&&o(10,i=(N==null?void 0:N.type.hotspots)||[]),l.$$.dirty[0]&65536&&o(18,a=w<v),l.$$.dirty[0]&32768&&o(17,f=g<D),l.$$.dirty[0]&327680&&o(9,c=a?`${p*(w+1)}%`:""),l.$$.dirty[0]&327680&&o(8,u=a?"":`${p*(Re-w)}%`),l.$$.dirty[0]&163840&&o(7,d=f?`${m*g}%`:""),l.$$.dirty[0]&163840&&o(6,T=f?"":`${m*(he-g-1)}%`),l.$$.dirty[0]&327680&&o(5,L=`calc(${(a?Re-w-1:w)*p}% - 4px)`),l.$$.dirty[0]&163840&&o(4,y=`calc(${(f?he-g-1:g)*m}% - 4px)`)},o(11,r=[...Se].sort((W,Z)=>W.name.localeCompare(Z.name))),[S,N,M,F,y,L,T,d,u,c,i,r,n,s,t,g,w,f,a,$,G,te,Q]}class Xl extends me{constructor(e){super(),de(this,e,Al,Ul,re,{floor:0,x:15,y:16,room:1,below:2,above:3},null,[-1,-1])}}function At(l,e,o){const t=l.slice();return t[12]=e[o],t[14]=o,t}function Xt(l,e,o){const t=l.slice();return t[15]=e[o],t[17]=o,t}function Gt(l){var s;let e,o;function t(){return l[8](l[17],l[14])}return e=new Ml({props:{room:l[15],below:((s=l[1])==null?void 0:s.rooms[l[14]][l[17]])||null,selected:l[17]===l[3]&&l[14]===l[4],connections:l[7](l[17],l[14],l[15])}}),e.$on("selected",t),{c(){ve(e.$$.fragment)},l(n){pe(e.$$.fragment,n)},m(n,r){ge(e,n,r),o=!0},p(n,r){var a;l=n;const i={};r&1&&(i.room=l[15]),r&2&&(i.below=((a=l[1])==null?void 0:a.rooms[l[14]][l[17]])||null),r&24&&(i.selected=l[17]===l[3]&&l[14]===l[4]),r&1&&(i.connections=l[7](l[17],l[14],l[15])),e.$set(i)},i(n){o||(Y(e.$$.fragment,n),o=!0)},o(n){A(e.$$.fragment,n),o=!1},d(n){be(e,n)}}}function jt(l){let e,o,t=l[12],s=[];for(let r=0;r<t.length;r+=1)s[r]=Gt(Xt(l,t,r));const n=r=>A(s[r],1,1,()=>{s[r]=null});return{c(){e=b("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=k(r,"DIV",{class:!0});var i=E(e);for(let a=0;a<s.length;a+=1)s[a].l(i);i.forEach(_),this.h()},h(){I(e,"class","row svelte-11ba7nn")},m(r,i){C(r,e,i);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);o=!0},p(r,i){if(i&219){t=r[12];let a;for(a=0;a<t.length;a+=1){const f=Xt(r,t,a);s[a]?(s[a].p(f,i),Y(s[a],1)):(s[a]=Gt(f),s[a].c(),Y(s[a],1),s[a].m(e,null))}for(we(),a=t.length;a<s.length;a+=1)n(a);Te()}},i(r){if(!o){for(let i=0;i<t.length;i+=1)Y(s[i]);o=!0}},o(r){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)A(s[i]);o=!1},d(r){r&&_(e),ae(s,r)}}}function zt(l){var t,s;let e,o;return e=new Xl({props:{floor:l[0],x:l[3],y:l[4],room:l[5],below:((t=l[1])==null?void 0:t.rooms[l[4]][l[3]])||null,above:((s=l[2])==null?void 0:s.rooms[l[4]][l[3]])||null}}),e.$on("changeRoomType",l[9]),e.$on("rotateRoom",l[10]),e.$on("changeFurniture",l[11]),{c(){ve(e.$$.fragment)},l(n){pe(e.$$.fragment,n)},m(n,r){ge(e,n,r),o=!0},p(n,r){var a,f;const i={};r&1&&(i.floor=n[0]),r&8&&(i.x=n[3]),r&16&&(i.y=n[4]),r&32&&(i.room=n[5]),r&26&&(i.below=((a=n[1])==null?void 0:a.rooms[n[4]][n[3]])||null),r&28&&(i.above=((f=n[2])==null?void 0:f.rooms[n[4]][n[3]])||null),e.$set(i)},i(n){o||(Y(e.$$.fragment,n),o=!0)},o(n){A(e.$$.fragment,n),o=!1},d(n){be(e,n)}}}function Gl(l){let e,o,t,s,n=l[0].rooms,r=[];for(let f=0;f<n.length;f+=1)r[f]=jt(At(l,n,f));const i=f=>A(r[f],1,1,()=>{r[f]=null});let a=l[3]!==null&&l[4]!==null&&zt(l);return{c(){e=b("div");for(let f=0;f<r.length;f+=1)r[f].c();o=O(),a&&a.c(),this.h()},l(f){e=k(f,"DIV",{class:!0});var c=E(e);for(let u=0;u<r.length;u+=1)r[u].l(c);o=q(c),a&&a.l(c),c.forEach(_),this.h()},h(){I(e,"class","grid svelte-11ba7nn")},m(f,c){C(f,e,c);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);h(e,o),a&&a.m(e,null),s=!0},p(f,[c]){if(c&219){n=f[0].rooms;let u;for(u=0;u<n.length;u+=1){const d=At(f,n,u);r[u]?(r[u].p(d,c),Y(r[u],1)):(r[u]=jt(d),r[u].c(),Y(r[u],1),r[u].m(e,o))}for(we(),u=n.length;u<r.length;u+=1)i(u);Te()}f[3]!==null&&f[4]!==null?a?(a.p(f,c),c&24&&Y(a,1)):(a=zt(f),a.c(),Y(a,1),a.m(e,null)):a&&(we(),A(a,1,1,()=>{a=null}),Te())},i(f){if(!s){for(let c=0;c<n.length;c+=1)Y(r[c]);Y(a),ct(()=>{s&&(t||(t=Ge(e,ze,{},!0)),t.run(1))}),s=!0}},o(f){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)A(r[c]);A(a),t||(t=Ge(e,ze,{},!1)),t.run(0),s=!1},d(f){f&&_(e),ae(r,f),a&&a.d(),f&&t&&t.end()}}}function jl(l,e,o){let t,{floor:s}=e,{below:n}=e,{above:r}=e,i=null,a=null;const f=(y,D)=>{o(3,i=y),o(4,a=D)},c=(y,D,v)=>{if(!v)return[];const m={[_e.North]:D===0?null:s.rooms[D-1][y],[_e.East]:y>=he-1?null:s.rooms[D][y+1],[_e.South]:D>=Re-1?null:s.rooms[D+1][y],[_e.West]:y===0?null:s.rooms[D][y-1]},p=[];for(const S of ft(v)){const g=m[S];if(g){for(const w of ft(g))if(S===ht(w,2)){p.push(S);break}}}return p},u=(y,D)=>f(y,D);function d(y){ot.call(this,l,y)}function T(y){ot.call(this,l,y)}function L(y){ot.call(this,l,y)}return l.$$set=y=>{"floor"in y&&o(0,s=y.floor),"below"in y&&o(1,n=y.below),"above"in y&&o(2,r=y.above)},l.$$.update=()=>{l.$$.dirty&25&&o(5,t=i!==null&&a!==null?s.rooms[a][i]:null)},[s,n,r,i,a,t,f,c,u,d,T,L]}class zl extends me{constructor(e){super(),de(this,e,jl,Gl,re,{floor:0,below:1,above:2})}}function Zt(l,e,o){const t=l.slice();return t[3]=e[o],t[16]=o,t}function Jt(l){let e,o;return e=new zl({props:{floor:l[3],below:l[0].floors[l[1]-1]||null,above:l[0].floors[l[1]+1]||null}}),e.$on("changeRoomType",l[4]),e.$on("rotateRoom",l[5]),e.$on("changeFurniture",l[6]),{c(){ve(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){ge(e,t,s),o=!0},p(t,s){const n={};s&8&&(n.floor=t[3]),s&3&&(n.below=t[0].floors[t[1]-1]||null),s&3&&(n.above=t[0].floors[t[1]+1]||null),e.$set(n)},i(t){o||(Y(e.$$.fragment,t),o=!0)},o(t){A(e.$$.fragment,t),o=!1},d(t){be(e,t)}}}function Kt(l){let e,o,t=l[3].num+"",s;return{c(){e=b("option"),o=V("Floor "),s=V(t),this.h()},l(n){e=k(n,"OPTION",{});var r=E(e);o=P(r,"Floor "),s=P(r,t),r.forEach(_),this.h()},h(){e.__value=l[16],e.value=e.__value},m(n,r){C(n,e,r),h(e,o),h(e,s)},p(n,r){r&1&&t!==(t=n[3].num+"")&&U(s,t)},d(n){n&&_(e)}}}function Zl(l){let e,o,t=l[14]+"",s;return{c(){e=b("p"),o=V("Unknown tab "),s=V(t)},l(n){e=k(n,"P",{});var r=E(e);o=P(r,"Unknown tab "),s=P(r,t),r.forEach(_)},m(n,r){C(n,e,r),h(e,o),h(e,s)},p(n,r){r&16384&&t!==(t=n[14]+"")&&U(s,t)},i:z,o:z,d(n){n&&_(e)}}}function Jl(l){let e,o;return e=new Il({props:{rooms:l[0].floors.map(Qt).flat(2)}}),{c(){ve(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){ge(e,t,s),o=!0},p(t,s){const n={};s&1&&(n.rooms=t[0].floors.map(Qt).flat(2)),e.$set(n)},i(t){o||(Y(e.$$.fragment,t),o=!0)},o(t){A(e.$$.fragment,t),o=!1},d(t){be(e,t)}}}function Kl(l){let e,o;return e=new Dl({props:{requirements:l[2].levelRequirements}}),{c(){ve(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){ge(e,t,s),o=!0},p(t,s){const n={};s&4&&(n.requirements=t[2].levelRequirements),e.$set(n)},i(t){o||(Y(e.$$.fragment,t),o=!0)},o(t){A(e.$$.fragment,t),o=!1},d(t){be(e,t)}}}function Ql(l){let e,o;return e=new El({props:{errors:l[2].errors}}),{c(){ve(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){ge(e,t,s),o=!0},p(t,s){const n={};s&4&&(n.errors=t[2].errors),e.$set(n)},i(t){o||(Y(e.$$.fragment,t),o=!0)},o(t){A(e.$$.fragment,t),o=!1},d(t){be(e,t)}}}function xl(l){let e,o;return e=new wl({}),{c(){ve(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){ge(e,t,s),o=!0},p:z,i(t){o||(Y(e.$$.fragment,t),o=!0)},o(t){A(e.$$.fragment,t),o=!1},d(t){be(e,t)}}}function eo(l){let e,o,t,s;const n=[xl,Ql,Kl,Jl,Zl],r=[];function i(a,f){return a[14]==="Getting Started"?0:a[14]==="Errors"?1:a[14]==="Requirements"?2:a[14]==="Rooms"?3:4}return e=i(l),o=r[e]=n[e](l),{c(){o.c(),t=ne()},l(a){o.l(a),t=ne()},m(a,f){r[e].m(a,f),C(a,t,f),s=!0},p(a,f){let c=e;e=i(a),e===c?r[e].p(a,f):(we(),A(r[c],1,1,()=>{r[c]=null}),Te(),o=r[e],o?o.p(a,f):(o=r[e]=n[e](a),o.c()),Y(o,1),o.m(t.parentNode,t))},i(a){s||(Y(o),s=!0)},o(a){A(o),s=!1},d(a){r[e].d(a),a&&_(t)}}}function to(l){var mt;let e,o=l[1],t,s,n,r,i,a,f,c,u,d,T,L,y,D,v,m,p,S,g,w,N,M=l[2].totalPrice+"",F,H,$,G,te,Q,W,Z,ke=(((mt=l[2].levelRequirements[0])==null?void 0:mt.level)||0)+"",De,Ee,ce,Ie,Ze,ie,Be,Je,Me=l[2].extent[0]+"",$e,Ke,We=l[2].extent[1]+"",Ue,Qe,Ne,xe,et,ye,fe,tt,_t,oe=Jt(l),Oe=l[0].floors,K=[];for(let B=0;B<Oe.length;B+=1)K[B]=Kt(Zt(l,Oe,B));return ye=new tl({props:{tabs:["Getting Started","Errors","Requirements","Rooms"],$$slots:{default:[eo,({tab:B})=>({14:B}),({tab:B})=>B?16384:0]},$$scope:{ctx:l}}}),{c(){e=b("div"),oe.c(),t=O(),s=b("div"),n=b("div"),r=b("button"),i=b("i"),f=O(),c=b("select");for(let B=0;B<K.length;B+=1)K[B].c();u=O(),d=b("button"),T=b("i"),y=O(),D=b("button"),v=b("i"),m=O(),p=b("div"),S=O(),g=b("div"),w=b("i"),N=O(),F=V(M),H=O(),$=b("div"),G=V("•"),te=O(),Q=b("div"),W=b("i"),Z=O(),De=V(ke),Ee=O(),ce=b("div"),Ie=V("•"),Ze=O(),ie=b("div"),Be=b("i"),Je=O(),$e=V(Me),Ke=V("x"),Ue=V(We),Qe=O(),Ne=b("button"),xe=V("Random"),et=O(),ve(ye.$$.fragment),this.h()},l(B){e=k(B,"DIV",{class:!0});var j=E(e);oe.l(j),j.forEach(_),t=q(B),s=k(B,"DIV",{class:!0});var ee=E(s);n=k(ee,"DIV",{class:!0});var X=E(n);r=k(X,"BUTTON",{class:!0});var x=E(r);i=k(x,"I",{class:!0}),E(i).forEach(_),x.forEach(_),f=q(X),c=k(X,"SELECT",{class:!0});var Fe=E(c);for(let lt=0;lt<K.length;lt+=1)K[lt].l(Fe);Fe.forEach(_),u=q(X),d=k(X,"BUTTON",{class:!0});var dt=E(d);T=k(dt,"I",{class:!0}),E(T).forEach(_),dt.forEach(_),y=q(X),D=k(X,"BUTTON",{class:!0});var vt=E(D);v=k(vt,"I",{class:!0}),E(v).forEach(_),vt.forEach(_),m=q(X),p=k(X,"DIV",{class:!0}),E(p).forEach(_),S=q(X),g=k(X,"DIV",{class:!0});var Ae=E(g);w=k(Ae,"I",{class:!0}),E(w).forEach(_),N=q(Ae),F=P(Ae,M),Ae.forEach(_),H=q(X),$=k(X,"DIV",{class:!0});var pt=E($);G=P(pt,"•"),pt.forEach(_),te=q(X),Q=k(X,"DIV",{class:!0});var Xe=E(Q);W=k(Xe,"I",{class:!0}),E(W).forEach(_),Z=q(Xe),De=P(Xe,ke),Xe.forEach(_),Ee=q(X),ce=k(X,"DIV",{class:!0});var gt=E(ce);Ie=P(gt,"•"),gt.forEach(_),Ze=q(X),ie=k(X,"DIV",{class:!0});var qe=E(ie);Be=k(qe,"I",{class:!0}),E(Be).forEach(_),Je=q(qe),$e=P(qe,Me),Ke=P(qe,"x"),Ue=P(qe,We),qe.forEach(_),X.forEach(_),Qe=q(ee),Ne=k(ee,"BUTTON",{});var bt=E(Ne);xe=P(bt,"Random"),bt.forEach(_),et=q(ee),pe(ye.$$.fragment,ee),ee.forEach(_),this.h()},h(){I(e,"class","map svelte-1xkp19y"),I(i,"class","icofont-arrow-up"),r.disabled=a=l[3].num>=at,I(r,"class","svelte-1xkp19y"),I(c,"class","svelte-1xkp19y"),l[1]===void 0&&ct(()=>l[10].call(c)),I(T,"class","icofont-arrow-down"),d.disabled=L=l[3].num<=je,I(d,"class","svelte-1xkp19y"),I(v,"class","icofont-ui-delete"),I(D,"class","svelte-1xkp19y"),I(p,"class","svelte-1xkp19y"),J(p,"flex","1"),I(w,"class","icofont-money-bag"),I(g,"class","svelte-1xkp19y"),I($,"class","svelte-1xkp19y"),I(W,"class","icofont-bars"),I(Q,"class","svelte-1xkp19y"),I(ce,"class","svelte-1xkp19y"),I(Be,"class","icofont-drag"),I(ie,"class","svelte-1xkp19y"),I(n,"class","floor-controls svelte-1xkp19y"),I(s,"class","sidebar svelte-1xkp19y")},m(B,j){C(B,e,j),oe.m(e,null),C(B,t,j),C(B,s,j),h(s,n),h(n,r),h(r,i),h(n,f),h(n,c);for(let ee=0;ee<K.length;ee+=1)K[ee]&&K[ee].m(c,null);Ce(c,l[1],!0),h(n,u),h(n,d),h(d,T),h(n,y),h(n,D),h(D,v),h(n,m),h(n,p),h(n,S),h(n,g),h(g,w),h(g,N),h(g,F),h(n,H),h(n,$),h($,G),h(n,te),h(n,Q),h(Q,W),h(Q,Z),h(Q,De),h(n,Ee),h(n,ce),h(ce,Ie),h(n,Ze),h(n,ie),h(ie,Be),h(ie,Je),h(ie,$e),h(ie,Ke),h(ie,Ue),h(s,Qe),h(s,Ne),h(Ne,xe),h(s,et),ge(ye,s,null),fe=!0,tt||(_t=[le(r,"click",Pe(l[9])),le(c,"change",l[10]),le(c,"change",l[11]),le(d,"click",Pe(l[12])),le(D,"click",l[7]),le(Ne,"click",l[8])],tt=!0)},p(B,[j]){var X;if(j&2&&re(o,o=B[1])?(we(),A(oe,1,1,z),Te(),oe=Jt(B),oe.c(),Y(oe,1),oe.m(e,null)):oe.p(B,j),(!fe||j&8&&a!==(a=B[3].num>=at))&&(r.disabled=a),j&1){Oe=B[0].floors;let x;for(x=0;x<Oe.length;x+=1){const Fe=Zt(B,Oe,x);K[x]?K[x].p(Fe,j):(K[x]=Kt(Fe),K[x].c(),K[x].m(c,null))}for(;x<K.length;x+=1)K[x].d(1);K.length=Oe.length}j&2&&Ce(c,B[1]),(!fe||j&8&&L!==(L=B[3].num<=je))&&(d.disabled=L),(!fe||j&4)&&M!==(M=B[2].totalPrice+"")&&U(F,M),(!fe||j&4)&&ke!==(ke=(((X=B[2].levelRequirements[0])==null?void 0:X.level)||0)+"")&&U(De,ke),(!fe||j&4)&&Me!==(Me=B[2].extent[0]+"")&&U($e,Me),(!fe||j&4)&&We!==(We=B[2].extent[1]+"")&&U(Ue,We);const ee={};j&147461&&(ee.$$scope={dirty:j,ctx:B}),ye.$set(ee)},i(B){fe||(Y(oe),Y(ye.$$.fragment,B),fe=!0)},o(B){A(oe),A(ye.$$.fragment,B),fe=!1},d(B){B&&_(e),oe.d(B),B&&_(t),B&&_(s),ae(K,B),be(ye),tt=!1,ut(_t)}}}const Qt=l=>l.rooms;function lo(l,e,o){let t,s,n;il(l,ul,v=>o(13,n=v));let r=el(),i=Math.abs(je);fl(()=>{o(0,r=vl(n.url.searchParams))});const a=v=>{v.detail.type===null?o(0,r.floors[i].rooms[v.detail.y][v.detail.x]=null,r):o(0,r.floors[i].rooms[v.detail.y][v.detail.x]={floor:r.floors[i],x:v.detail.x,y:v.detail.y,type:v.detail.type,orientation:_e.North,hotspots:new Array(v.detail.type.hotspots.length).map(()=>null)},r),Ye(`?${He(r)}`,{replaceState:!0})},f=v=>{const m=r.floors[i].rooms[v.detail.y][v.detail.x];m&&(m.orientation=ht(m.orientation),o(0,r.floors[i].rooms[v.detail.y][v.detail.x]=m,r),Ye(`?${He(r)}`,{replaceState:!0}))},c=v=>{const m=r.floors[i].rooms[v.detail.y][v.detail.x];m&&(m.hotspots[v.detail.hotspotIndex]=v.detail.type,Ye(`?${He(r)}`,{replaceState:!0}))},u=()=>{confirm("Are you sure you want to delete all rooms on this floor?")&&(o(0,r.floors[i]=st(r,t.num),r),Ye(`?${He(r)}`,{replaceState:!0}))},d=()=>{const v=st(r,t.num);for(let m=0;m<33;m++){const p=Math.floor(m/7)+1,S=m%7+1,g=Se[Math.floor(Math.random()*Se.length)];v.rooms[p][S]={floor:v,x:S,y:p,type:g,hotspots:[Ve[0],Ve[0],Ve[0]],orientation:_e.North}}o(0,r.floors[i]=v,r),Ye(`?${He(r)}`,{replaceState:!0})},T=()=>o(1,i++,i);function L(){i=cl(this),o(1,i)}const y=v=>o(1,i=Number(v.currentTarget.value)),D=()=>o(1,i--,i);return l.$$.update=()=>{l.$$.dirty&3&&o(3,t=r.floors[i]),l.$$.dirty&1&&o(2,s=hl(r))},[r,i,s,t,a,f,c,u,d,T,L,y,D]}class ro extends me{constructor(e){super(),de(this,e,lo,to,re,{})}}export{ro as default};
