import{J as qt,S as de,i as ve,s as ne,k as b,a as H,l as E,m as k,c as K,h as _,n as I,b as q,G as h,K as ee,L as Ie,M as fe,H as X,N as Ge,O as ze,P as te,q as O,e as le,r as P,p as Z,u as j,Q as re,R as Ze,T as Re,U as Vt,v as ke,d as U,f as ye,g as M,C as Ct,D as Wt,E as Bt,F as Yt,V as We,y as ce,z as he,A as _e,B as me,I as Mt,o as Ft}from"../chunks/index.24d19338.js";import{p as Ut}from"../chunks/stores.a9704940.js";import{j as Te}from"../chunks/singletons.a35681c1.js";function Be(t,{delay:e=0,duration:o=400,easing:l=qt}={}){const n=+getComputedStyle(t).opacity;return{delay:e,duration:o,easing:l,css:r=>`opacity: ${r*n}`}}Te.disable_scroll_handling;const qe=Te.goto;Te.invalidate;Te.invalidateAll;Te.preload_data;Te.preload_code;Te.before_navigate;Te.after_navigate;const ae=9,we=9,Kt=()=>{const t=[];for(let e=0;e<we;e++){t.push([]);for(let o=0;o<ae;o++)t[e].push(null)}return t};var Ee=(t=>(t[t.North=0]="North",t[t.East=1]="East",t[t.South=2]="South",t[t.West=3]="West",t))(Ee||{});const Ue=t=>Ee[t].toLowerCase(),Ce=(t,e=1)=>(t+=e)%4,D=Ee,se={garden:{name:"Garden",cost:1e3,minLvl:1,doors:[D.North,D.East,D.South,D.West],bg:"#034a03",furnitureHotspots:{centrepiece:{name:"Centrepiece",optionKeys:["exit_portal","decorative_rock","pond","imp_statue","dungeon_entrance"]},tree:{name:"Tree",optionKeys:[]},big_tree:{name:"Big Tree",optionKeys:[]},small_plant_1:{name:"Small Plant 1",optionKeys:["plant","small_fern","fern"]},small_plant_2:{name:"Small Plant 2",optionKeys:["dock_leaf","thistle","reeds"]},big_plant_1:{name:"Big Plant 1",optionKeys:[]},big_plant_2:{name:"Big Plant 2",optionKeys:[]}},open:!0,floors:[0]},parlour:{name:"Parlour",cost:1e3,minLvl:1,doors:[D.East,D.South,D.West],bg:"#424242",furnitureHotspots:{}},kitchen:{name:"Kitchen",cost:5e3,minLvl:5,doors:[D.East,D.South],bg:"#542808",furnitureHotspots:{}},dining_room:{name:"Dining Room",cost:5e3,minLvl:10,doors:[D.East,D.South,D.West],bg:"#424242",furnitureHotspots:{}},workshop:{name:"Workshop",cost:1e4,minLvl:15,doors:[D.North,D.South],bg:"#542808",furnitureHotspots:{}},bedroom:{name:"Bedroom",cost:1e4,minLvl:20,doors:[D.East,D.South],bg:"#424242",furnitureHotspots:{}},skill_hall:{name:"Skill Hall",cost:15e3,minLvl:25,doors:[D.North,D.East,D.South,D.West],bg:"#3f0569",furnitureHotspots:{},stairs:!0},games_room:{name:"Games Room",cost:25e3,minLvl:30,doors:[D.East,D.South,D.West],bg:"#731e4c",furnitureHotspots:{}},combat_room:{name:"Combat Room",cost:25e3,minLvl:30,doors:[D.East,D.South,D.West],bg:"#731e4c",furnitureHotspots:{}},quest_hall:{name:"Quest Hall",cost:25e3,minLvl:32,doors:[D.North,D.East,D.South,D.West],bg:"#3f0569",furnitureHotspots:{},stairs:!0},menagerie:{name:"Menagerie",cost:3e4,minLvl:37,doors:[D.North,D.East,D.South,D.West],bg:"#034a03",furnitureHotspots:{},open:!0,floors:[0]},study:{name:"Study",cost:5e4,minLvl:40,doors:[D.East,D.South,D.West],bg:"#542808",furnitureHotspots:{}},costume_room:{name:"Costume Room",cost:5e4,minLvl:42,doors:[D.South],bg:"#731e4c",furnitureHotspots:{}},chapel:{name:"Chapel",cost:5e4,minLvl:45,doors:[D.East,D.South],bg:"#542808",furnitureHotspots:{}},portal_chamber:{name:"Portal Chamber",cost:1e5,minLvl:50,doors:[D.South],bg:"#542808",furnitureHotspots:{}},formal_garden:{name:"Formal Garden",cost:75e3,minLvl:55,doors:[D.North,D.East,D.South,D.West],bg:"#034a03",furnitureHotspots:{},open:!0,floors:[0]},throne_room:{name:"Throne Room",cost:15e4,minLvl:60,doors:[D.South],bg:"#040459",furnitureHotspots:{},floors:[0]},aquarium:{name:"Aquarium",cost:2e5,minLvl:63,doors:[D.North,D.East,D.South,D.West],bg:"#542808",furnitureHotspots:{},floors:[0]},oubliette:{name:"Oubliette",cost:15e4,minLvl:65,doors:[D.North,D.East,D.South,D.West],bg:"#800303",furnitureHotspots:{},floors:[-1]},dungeon_corridor:{name:"Dungeon Corridor",cost:7500,minLvl:70,doors:[D.North,D.South],bg:"#800303",furnitureHotspots:{},floors:[-1]},dungeon_junction:{name:"Dungeon Junction",cost:7500,minLvl:70,doors:[D.North,D.East,D.South,D.West],bg:"#800303",furnitureHotspots:{},floors:[-1]},dungeon_stairs:{name:"Dungeon Stairs",cost:7500,minLvl:70,doors:[D.North,D.East,D.South,D.West],bg:"#800303",furnitureHotspots:{},stairs:!0,floors:[-1]},dungeon_pit:{name:"Dungeon Pit",cost:1e4,minLvl:70,doors:[D.North,D.East,D.South,D.West],bg:"#800303",furnitureHotspots:{},floors:[-1]},treasure_room:{name:"Treasure Room",cost:25e4,minLvl:75,doors:[D.South],bg:"#800303",furnitureHotspots:{},floors:[-1]}},Ae=Object.entries(se).sort(([,t],[,e])=>t.name.localeCompare(e.name)),ie=[{level:0,rooms:0,extent:[0,0]},{level:1,rooms:21,extent:[3,3]},{level:15,rooms:21,extent:[4,4]},{level:30,rooms:21,extent:[5,5]},{level:38,rooms:22,extent:[5,5]},{level:44,rooms:23,extent:[5,5]},{level:45,rooms:23,extent:[6,6]},{level:50,rooms:24,extent:[6,6]},{level:56,rooms:25,extent:[6,6]},{level:60,rooms:25,extent:[7,7]},{level:62,rooms:26,extent:[7,7]},{level:68,rooms:27,extent:[7,7]},{level:74,rooms:28,extent:[7,7]},{level:80,rooms:29,extent:[7,7]},{level:86,rooms:30,extent:[7,7]},{level:92,rooms:31,extent:[7,7]},{level:96,rooms:32,extent:[7,7]},{level:99,rooms:33,extent:[7,7]}],At=t=>{const e=t.flat(2).filter(d=>!!d);let o=0,l=ae,n=we,r=0,s=0,a=null;const f=[],i=[];for(const d of e){const p=se[d.typeKey];o+=p.cost,a=a&&p.minLvl<=se[a.typeKey].minLvl?a:d,l=Math.min(l,d.x),r=Math.max(r,d.x),n=Math.min(n,d.y),s=Math.max(s,d.y)}if(a){const d=se[a.typeKey];i.push({name:"Highest Level Room",value:d.name,limit:"-",level:d.minLvl})}if(e.length>0){const d=ie.find(p=>p.rooms>=e.length);if(d)i.push({name:"Number of Rooms",value:e.length,limit:d.rooms,level:d.level});else{const p=ie[ie.length-1].rooms;f.push(`You have too many rooms (${e.length})! You cannot have more than ${p}`)}}const u=Math.max(0,r-l+1);if(u>0){const d=ie.find(p=>p.extent[0]>=u);if(d)i.push({name:"Extent X",value:u,limit:d.extent[0],level:d.level});else{const p=ie[ie.length-1].extent[0];f.push(`Your house is too wide (${u})! It can be at most ${p} wide`)}}const c=Math.max(0,s-n+1);if(c>0){const d=ie.find(p=>p.extent[1]>=c);if(d)i.push({name:"Extent Y",value:c,limit:d.extent[1],level:d.level});else{const p=ie[ie.length-1].extent[1];f.push(`Your house is too tall (${c})! It can be at most ${p} tall`)}}return i.sort((d,p)=>p.level-d.level),{totalPrice:o,levelRequirements:i,extent:[u,c],errors:f}},je=-1,Xe=1,Ot=[];for(let t=je;t<=Xe;t++)Ot.push(t);const ue=Ot,jt=(t,e)=>{if(!t)return null;const o=Object.entries(t.furnitureKeys).filter(([,l])=>!!l).map(([l,n])=>`${l}:${n}`).join("-");return`${e}-${t.typeKey}-${t.orientation}-${o}`},Ve=t=>{const e=new URLSearchParams;for(let o=0;o<ue.length;o++){const l=t[o].flat().map(jt).filter(n=>!!n).join(",");e.set(`f${ue[o]}`,btoa(l))}return e},Xt=t=>{const e=t.split("-"),o={};for(let s=3;s<e.length;s++){const a=e[s].split(":");o[a[0]]=a[1]}const l=Number(e[0]),n=l%ae,r=Math.floor(l/ae);return{x:n,y:r,typeKey:e[1],orientation:Number(e[2]),furnitureKeys:o}},Gt=t=>{const e=[];for(let o=0;o<ue.length;o++){const l=Kt(),n=t.get(`f${ue[o]}`);if(n){const r=atob(n).split(",");for(const s of r){const a=Xt(s);l[a.y][a.x]=a}}e.push(l)}return e};function tt(t,e,o){const l=t.slice();return l[12]=e[o],l}function zt(t){let e,o=t[1]&&t[5]&&lt(t);return{c(){e=b("div"),o&&o.c(),this.h()},l(l){e=E(l,"DIV",{class:!0});var n=k(e);o&&o.l(n),n.forEach(_),this.h()},h(){I(e,"class","content svelte-1t8fwgu"),te(e,"below",!!t[1]),te(e,"supported",t[5]&&!t[5].open)},m(l,n){q(l,e,n),o&&o.m(e,null)},p(l,n){l[1]&&l[5]?o?o.p(l,n):(o=lt(l),o.c(),o.m(e,null)):o&&(o.d(1),o=null),n&2&&te(e,"below",!!l[1]),n&32&&te(e,"supported",l[5]&&!l[5].open)},d(l){l&&_(e),o&&o.d()}}}function Zt(t){let e,o,l,n,r=t[4].name+"",s,a,f,i=t[7],u=[];for(let c=0;c<i.length;c+=1)u[c]=ot(tt(t,i,c));return{c(){e=b("div"),o=H(),l=b("div"),n=b("div"),s=O(r),a=H();for(let c=0;c<u.length;c+=1)u[c].c();f=le(),this.h()},l(c){e=E(c,"DIV",{class:!0}),k(e).forEach(_),o=K(c),l=E(c,"DIV",{class:!0});var d=k(l);n=E(d,"DIV",{class:!0});var p=k(n);s=P(p,r),p.forEach(_),d.forEach(_),a=K(c);for(let y=0;y<u.length;y+=1)u[y].l(c);f=le(),this.h()},h(){I(e,"class","marker svelte-1t8fwgu"),Z(e,"background-color",t[4].color),I(n,"class","title svelte-1t8fwgu"),I(l,"class","content svelte-1t8fwgu"),Z(l,"color",t[4].color),Z(l,"background-color",t[4].bg)},m(c,d){q(c,e,d),q(c,o,d),q(c,l,d),h(l,n),h(n,s),q(c,a,d);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(c,d);q(c,f,d)},p(c,d){if(d&16&&Z(e,"background-color",c[4].color),d&16&&r!==(r=c[4].name+"")&&j(s,r),d&16&&Z(l,"color",c[4].color),d&16&&Z(l,"background-color",c[4].bg),d&132){i=c[7];let p;for(p=0;p<i.length;p+=1){const y=tt(c,i,p);u[p]?u[p].p(y,d):(u[p]=ot(y),u[p].c(),u[p].m(f.parentNode,f))}for(;p<u.length;p+=1)u[p].d(1);u.length=i.length}},d(c){c&&_(e),c&&_(o),c&&_(l),c&&_(a),re(u,c),c&&_(f)}}}function lt(t){let e,o=t[5].name+"",l;return{c(){e=b("div"),l=O(o),this.h()},l(n){e=E(n,"DIV",{class:!0});var r=k(e);l=P(r,o),r.forEach(_),this.h()},h(){I(e,"class","title svelte-1t8fwgu")},m(n,r){q(n,e,r),h(e,l)},p(n,r){r&32&&o!==(o=n[5].name+"")&&j(l,o)},d(n){n&&_(e)}}}function ot(t){let e,o;return{c(){e=b("div"),this.h()},l(l){e=E(l,"DIV",{class:!0}),k(e).forEach(_),this.h()},h(){I(e,"class",o="door "+Ue(t[12])+" svelte-1t8fwgu"),te(e,"connected",t[2].includes(t[12]))},m(l,n){q(l,e,n)},p(l,n){n&128&&o!==(o="door "+Ue(l[12])+" svelte-1t8fwgu")&&I(e,"class",o),n&132&&te(e,"connected",l[2].includes(l[12]))},d(l){l&&_(e)}}}function nt(t){let e;return{c(){e=b("div"),this.h()},l(o){e=E(o,"DIV",{class:!0}),k(e).forEach(_),this.h()},h(){I(e,"class","selected svelte-1t8fwgu")},m(o,l){q(o,e,l)},d(o){o&&_(e)}}}function Jt(t){let e,o,l,n,r;function s(u,c){return u[0]&&u[4]?Zt:zt}let a=s(t),f=a(t),i=t[3]&&nt();return{c(){e=b("div"),f.c(),o=H(),i&&i.c(),this.h()},l(u){e=E(u,"DIV",{class:!0});var c=k(e);f.l(c),o=K(c),i&&i.l(c),c.forEach(_),this.h()},h(){I(e,"class",l="cell "+t[6]+" svelte-1t8fwgu")},m(u,c){q(u,e,c),f.m(e,null),h(e,o),i&&i.m(e,null),n||(r=[ee(e,"click",Ie(function(){fe(t[8])&&t[8].apply(this,arguments)})),ee(e,"keypress",Ie(function(){fe(t[8])&&t[8].apply(this,arguments)}))],n=!0)},p(u,[c]){t=u,a===(a=s(t))&&f?f.p(t,c):(f.d(1),f=a(t),f&&(f.c(),f.m(e,o))),t[3]?i||(i=nt(),i.c(),i.m(e,null)):i&&(i.d(1),i=null),c&64&&l!==(l="cell "+t[6]+" svelte-1t8fwgu")&&I(e,"class",l)},i:X,o:X,d(u){u&&_(e),f.d(),i&&i.d(),n=!1,Ge(r)}}}function Qt(t,e,o){let l,n,r,s,a,{x:f}=e,{y:i}=e,{room:u}=e,{below:c}=e,{connections:d}=e,{selected:p}=e;const y=ze();return t.$$set=g=>{"x"in g&&o(9,f=g.x),"y"in g&&o(10,i=g.y),"room"in g&&o(0,u=g.room),"below"in g&&o(1,c=g.below),"connections"in g&&o(2,d=g.connections),"selected"in g&&o(3,p=g.selected)},t.$$.update=()=>{t.$$.dirty&1536&&o(8,l=()=>{y("selected",{x:f,y:i})}),t.$$.dirty&1&&o(4,n=u?se[u.typeKey]:null),t.$$.dirty&17&&o(7,r=(n==null?void 0:n.doors.map(g=>Ce(g,(u==null?void 0:u.orientation)||0)))||[]),t.$$.dirty&1&&o(6,s=u?Ue(u.orientation):""),t.$$.dirty&2&&o(5,a=c?se[c.typeKey]:null)},[u,c,d,p,n,a,s,r,l,f,i]}class $t extends de{constructor(e){super(),ve(this,e,Qt,Jt,ne,{x:9,y:10,room:0,below:1,connections:2,selected:3})}}function rt(t,e,o){const l=t.slice();return l[1]=e[o],l}function xt(t){let e,o;return{c(){e=b("div"),o=O("Your house looks good to go!"),this.h()},l(l){e=E(l,"DIV",{class:!0});var n=k(e);o=P(n,"Your house looks good to go!"),n.forEach(_),this.h()},h(){I(e,"class","alert success svelte-159br2x")},m(l,n){q(l,e,n),h(e,o)},p:X,d(l){l&&_(e)}}}function el(t){let e,o=t[0],l=[];for(let n=0;n<o.length;n+=1)l[n]=st(rt(t,o,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=le()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);e=le()},m(n,r){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(n,r);q(n,e,r)},p(n,r){if(r&1){o=n[0];let s;for(s=0;s<o.length;s+=1){const a=rt(n,o,s);l[s]?l[s].p(a,r):(l[s]=st(a),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=o.length}},d(n){re(l,n),n&&_(e)}}}function st(t){let e,o=t[1]+"",l;return{c(){e=b("div"),l=O(o),this.h()},l(n){e=E(n,"DIV",{class:!0});var r=k(e);l=P(r,o),r.forEach(_),this.h()},h(){I(e,"class","alert error svelte-159br2x")},m(n,r){q(n,e,r),h(e,l)},p(n,r){r&1&&o!==(o=n[1]+"")&&j(l,o)},d(n){n&&_(e)}}}function tl(t){let e;function o(r,s){return r[0].length>0?el:xt}let l=o(t),n=l(t);return{c(){n.c(),e=le()},l(r){n.l(r),e=le()},m(r,s){n.m(r,s),q(r,e,s)},p(r,[s]){l===(l=o(r))&&n?n.p(r,s):(n.d(1),n=l(r),n&&(n.c(),n.m(e.parentNode,e)))},i:X,o:X,d(r){n.d(r),r&&_(e)}}}function ll(t,e,o){let{errors:l}=e;return t.$$set=n=>{"errors"in n&&o(0,l=n.errors)},[l]}class ol extends de{constructor(e){super(),ve(this,e,ll,tl,ne,{errors:0})}}function it(t,e,o){const l=t.slice();return l[11]=e[o],l}function at(t){let e,o,l=t[11]+"",n,r;return{c(){e=b("option"),o=O("Floor "),n=O(l),this.h()},l(s){e=E(s,"OPTION",{});var a=k(e);o=P(a,"Floor "),n=P(a,l),a.forEach(_),this.h()},h(){e.__value=t[11],e.value=e.__value,e.selected=r=t[11]===t[0]},m(s,a){q(s,e,a),h(e,o),h(e,n)},p(s,a){a&1&&r!==(r=s[11]===s[0])&&(e.selected=r)},d(s){s&&_(e)}}}function nl(t){let e,o,l,n,r,s,a,f,i,u,c,d,p,y,g,R,w,v,m,S,L,T,N,V,C,Y,F,A,x,$,oe,W,G,ge,pe,be=t[3][0]+"",Le,Ye,Ne=t[3][1]+"",Ke,Me,Je,Se=ue,J=[];for(let Q=0;Q<Se.length;Q+=1)J[Q]=at(it(t,Se,Q));return{c(){e=b("div"),o=b("button"),l=b("i"),r=H(),s=b("select");for(let Q=0;Q<J.length;Q+=1)J[Q].c();a=H(),f=b("button"),i=b("i"),c=H(),d=b("button"),p=b("i"),y=H(),g=b("div"),R=H(),w=b("div"),v=b("i"),m=H(),S=O(t[1]),L=H(),T=b("div"),N=O("•"),V=H(),C=b("div"),Y=b("i"),F=H(),A=O(t[2]),x=H(),$=b("div"),oe=O("•"),W=H(),G=b("div"),ge=b("i"),pe=H(),Le=O(be),Ye=O("x"),Ke=O(Ne),this.h()},l(Q){e=E(Q,"DIV",{class:!0});var B=k(e);o=E(B,"BUTTON",{class:!0});var z=k(o);l=E(z,"I",{class:!0}),k(l).forEach(_),z.forEach(_),r=K(B),s=E(B,"SELECT",{class:!0});var He=k(s);for(let Fe=0;Fe<J.length;Fe+=1)J[Fe].l(He);He.forEach(_),a=K(B),f=E(B,"BUTTON",{class:!0});var Qe=k(f);i=E(Qe,"I",{class:!0}),k(i).forEach(_),Qe.forEach(_),c=K(B),d=E(B,"BUTTON",{class:!0});var $e=k(d);p=E($e,"I",{class:!0}),k(p).forEach(_),$e.forEach(_),y=K(B),g=E(B,"DIV",{class:!0}),k(g).forEach(_),R=K(B),w=E(B,"DIV",{class:!0});var Oe=k(w);v=E(Oe,"I",{class:!0}),k(v).forEach(_),m=K(Oe),S=P(Oe,t[1]),Oe.forEach(_),L=K(B),T=E(B,"DIV",{class:!0});var xe=k(T);N=P(xe,"•"),xe.forEach(_),V=K(B),C=E(B,"DIV",{class:!0});var Pe=k(C);Y=E(Pe,"I",{class:!0}),k(Y).forEach(_),F=K(Pe),A=P(Pe,t[2]),Pe.forEach(_),x=K(B),$=E(B,"DIV",{class:!0});var et=k($);oe=P(et,"•"),et.forEach(_),W=K(B),G=E(B,"DIV",{class:!0});var De=k(G);ge=E(De,"I",{class:!0}),k(ge).forEach(_),pe=K(De),Le=P(De,be),Ye=P(De,"x"),Ke=P(De,Ne),De.forEach(_),B.forEach(_),this.h()},h(){I(l,"class","icofont-arrow-up"),o.disabled=n=t[0]>=Xe,I(o,"class","svelte-l4htl6"),I(s,"class","svelte-l4htl6"),t[0]===void 0&&Ze(()=>t[7].call(s)),I(i,"class","icofont-arrow-down"),f.disabled=u=t[0]<=je,I(f,"class","svelte-l4htl6"),I(p,"class","icofont-ui-delete"),I(d,"class","svelte-l4htl6"),I(g,"class","svelte-l4htl6"),Z(g,"flex","1"),I(v,"class","icofont-money-bag"),I(w,"class","svelte-l4htl6"),I(T,"class","svelte-l4htl6"),I(Y,"class","icofont-bars"),I(C,"class","svelte-l4htl6"),I($,"class","svelte-l4htl6"),I(ge,"class","icofont-drag"),I(G,"class","svelte-l4htl6"),I(e,"class","floor-controls svelte-l4htl6")},m(Q,B){q(Q,e,B),h(e,o),h(o,l),h(e,r),h(e,s);for(let z=0;z<J.length;z+=1)J[z]&&J[z].m(s,null);Re(s,t[0],!0),h(e,a),h(e,f),h(f,i),h(e,c),h(e,d),h(d,p),h(e,y),h(e,g),h(e,R),h(e,w),h(w,v),h(w,m),h(w,S),h(e,L),h(e,T),h(T,N),h(e,V),h(e,C),h(C,Y),h(C,F),h(C,A),h(e,x),h(e,$),h($,oe),h(e,W),h(e,G),h(G,ge),h(G,pe),h(G,Le),h(G,Ye),h(G,Ke),Me||(Je=[ee(o,"click",Ie(t[6])),ee(s,"change",t[7]),ee(s,"change",t[8]),ee(f,"click",Ie(t[9])),ee(d,"click",function(){fe(t[4])&&t[4].apply(this,arguments)})],Me=!0)},p(Q,[B]){if(t=Q,B&1&&n!==(n=t[0]>=Xe)&&(o.disabled=n),B&1){Se=ue;let z;for(z=0;z<Se.length;z+=1){const He=it(t,Se,z);J[z]?J[z].p(He,B):(J[z]=at(He),J[z].c(),J[z].m(s,null))}for(;z<J.length;z+=1)J[z].d(1);J.length=Se.length}B&1&&Re(s,t[0]),B&1&&u!==(u=t[0]<=je)&&(f.disabled=u),B&2&&j(S,t[1]),B&4&&j(A,t[2]),B&8&&be!==(be=t[3][0]+"")&&j(Le,be),B&8&&Ne!==(Ne=t[3][1]+"")&&j(Ke,Ne)},i:X,o:X,d(Q){Q&&_(e),re(J,Q),Me=!1,Ge(Je)}}}function rl(t,e,o){let l,n,{floor:r}=e,{price:s}=e,{minLvl:a}=e,{extent:f}=e;const i=ze(),u=()=>l(r+1);function c(){r=Vt(this),o(0,r)}const d=y=>l(Number(y.currentTarget.value)),p=()=>l(r-1);return t.$$set=y=>{"floor"in y&&o(0,r=y.floor),"price"in y&&o(1,s=y.price),"minLvl"in y&&o(2,a=y.minLvl),"extent"in y&&o(3,f=y.extent)},o(5,l=y=>{i("change",{floor:y})}),o(4,n=()=>{i("reset")}),[r,s,a,f,n,l,u,c,d,p]}class sl extends de{constructor(e){super(),ve(this,e,rl,nl,ne,{floor:0,price:1,minLvl:2,extent:3})}}function il(t){let e,o,l;return{c(){e=b("ul"),o=b("li"),l=O("Click a cell to the left to place a new room"),this.h()},l(n){e=E(n,"UL",{class:!0});var r=k(e);o=E(r,"LI",{});var s=k(o);l=P(s,"Click a cell to the left to place a new room"),s.forEach(_),r.forEach(_),this.h()},h(){I(e,"class","svelte-ukzczf")},m(n,r){q(n,e,r),h(e,o),h(o,l)},p:X,i:X,o:X,d(n){n&&_(e)}}}class al extends de{constructor(e){super(),ve(this,e,null,il,ne,{})}}const fl={exit_portal:{name:"Exit Portal",minLvl:1,exp:100,materials:{iron_bar:10}},decorative_rock:{name:"Decorative Rock",minLvl:5,exp:100,materials:{limestone_brick:5}},pond:{name:"Pond",minLvl:10,exp:100,materials:{soft_clay:10}},imp_statue:{name:"Imp Statue",minLvl:15,exp:150,materials:{limestone_brick:5,soft_clay:5}},dungeon_entrance:{name:"Dungeon Entrance",minLvl:70,exp:500,materials:{marble_block:1}},plant:{name:"Plant",minLvl:1,exp:31,materials:{bagged_plant_1:1}},small_fern:{name:"Small Fern",minLvl:6,exp:70,materials:{bagged_plant_2:1}},fern:{name:"Fern",minLvl:12,exp:100,materials:{bagged_plant_3:1}},dock_leaf:{name:"Dock Leaf",minLvl:1,exp:31,materials:{bagged_plant_1:1}},thistle:{name:"Thistle",minLvl:6,exp:70,materials:{bagged_plant_2:1}},reeds:{name:"Reeds",minLvl:12,exp:100,materials:{bagged_plant_3:1}}};const ul=t=>({tab:t&4}),ft=t=>({tab:t[2]});function ut(t,e,o){const l=t.slice();return l[6]=e[o],l}function ct(t){let e,o=t[6]+"",l,n,r,s;function a(){return t[5](t[6])}return{c(){e=b("button"),l=O(o),n=H(),this.h()},l(f){e=E(f,"BUTTON",{class:!0});var i=k(e);l=P(i,o),n=K(i),i.forEach(_),this.h()},h(){I(e,"class","svelte-uk4mol"),te(e,"active",t[2]===t[6])},m(f,i){q(f,e,i),h(e,l),h(e,n),r||(s=ee(e,"click",a),r=!0)},p(f,i){t=f,i&1&&o!==(o=t[6]+"")&&j(l,o),i&5&&te(e,"active",t[2]===t[6])},d(f){f&&_(e),r=!1,s()}}}function ht(t){let e,o,l;const n=t[4].default,r=Ct(n,t,t[3],ft);return{c(){e=b("div"),r&&r.c(),this.h()},l(s){e=E(s,"DIV",{class:!0});var a=k(e);r&&r.l(a),a.forEach(_),this.h()},h(){I(e,"class","tab svelte-uk4mol")},m(s,a){q(s,e,a),r&&r.m(e,null),l=!0},p(s,a){r&&r.p&&(!l||a&12)&&Wt(r,n,s,s[3],l?Yt(n,s[3],a,ul):Bt(s[3]),ft)},i(s){l||(M(r,s),s&&Ze(()=>{l&&(o||(o=We(e,Be,{},!0)),o.run(1))}),l=!0)},o(s){U(r,s),s&&(o||(o=We(e,Be,{},!1)),o.run(0)),l=!1},d(s){s&&_(e),r&&r.d(s),s&&o&&o.end()}}}function cl(t){let e,o,l,n,r=t[2],s,a=t[0],f=[];for(let u=0;u<a.length;u+=1)f[u]=ct(ut(t,a,u));let i=ht(t);return{c(){e=b("div"),o=b("div");for(let u=0;u<f.length;u+=1)f[u].c();l=H(),n=b("div"),i.c(),this.h()},l(u){e=E(u,"DIV",{class:!0});var c=k(e);o=E(c,"DIV",{class:!0});var d=k(o);for(let y=0;y<f.length;y+=1)f[y].l(d);d.forEach(_),l=K(c),n=E(c,"DIV",{class:!0});var p=k(n);i.l(p),p.forEach(_),c.forEach(_),this.h()},h(){I(o,"class","navigation"),I(n,"class","content svelte-uk4mol"),I(e,"class","container svelte-uk4mol"),te(e,"inverted",t[1])},m(u,c){q(u,e,c),h(e,o);for(let d=0;d<f.length;d+=1)f[d]&&f[d].m(o,null);h(e,l),h(e,n),i.m(n,null),s=!0},p(u,[c]){if(c&5){a=u[0];let d;for(d=0;d<a.length;d+=1){const p=ut(u,a,d);f[d]?f[d].p(p,c):(f[d]=ct(p),f[d].c(),f[d].m(o,null))}for(;d<f.length;d+=1)f[d].d(1);f.length=a.length}c&4&&ne(r,r=u[2])?(ke(),U(i,1,1,X),ye(),i=ht(u),i.c(),M(i,1),i.m(n,null)):i.p(u,c),(!s||c&2)&&te(e,"inverted",u[1])},i(u){s||(M(i),s=!0)},o(u){U(i),s=!1},d(u){u&&_(e),re(f,u),i.d(u)}}}function hl(t,e,o){let{$$slots:l={},$$scope:n}=e,{tabs:r}=e,{inverted:s=!1}=e,a=r[0];const f=i=>o(2,a=i);return t.$$set=i=>{"tabs"in i&&o(0,r=i.tabs),"inverted"in i&&o(1,s=i.inverted),"$$scope"in i&&o(3,n=i.$$scope)},[r,s,a,n,l,f]}class Pt extends de{constructor(e){super(),ve(this,e,hl,cl,ne,{tabs:0,inverted:1})}}function _t(t,e,o){const l=t.slice();return l[30]=e[o][0],l[31]=e[o][1],l}function mt(t,e,o){const l=t.slice();return l[34]=e[o][0],l[35]=e[o][1],l}function dt(t,e,o){const l=t.slice();l[38]=e[o][0],l[4]=e[o][1];const n=l[4].floors&&!l[4].floors.includes(l[0]);return l[39]=n,l}function _l(t){let e,o,l,n,r,s,a,f,i,u,c,d,p=Ae,y=[];for(let v=0;v<p.length;v+=1)y[v]=vt(dt(t,p,v));let g=t[1]&&gt(t),R=t[0]>=0&&t[3]&&pt(),w=t[1]&&t[4]&&bt(t);return{c(){e=b("div"),o=b("select"),l=b("option"),n=O("Pick a room...");for(let v=0;v<y.length;v+=1)y[v].c();s=H(),g&&g.c(),a=H(),R&&R.c(),f=H(),w&&w.c(),i=le(),this.h()},l(v){e=E(v,"DIV",{class:!0});var m=k(e);o=E(m,"SELECT",{class:!0});var S=k(o);l=E(S,"OPTION",{});var L=k(l);n=P(L,"Pick a room..."),L.forEach(_);for(let T=0;T<y.length;T+=1)y[T].l(S);S.forEach(_),s=K(m),g&&g.l(m),m.forEach(_),a=K(v),R&&R.l(v),f=K(v),w&&w.l(v),i=le(),this.h()},h(){l.__value="",l.value=l.__value,l.disabled=!0,l.selected=!0,I(o,"class","svelte-102wwix"),I(e,"class","svelte-102wwix")},m(v,m){var S;q(v,e,m),h(e,o),h(o,l),h(l,n);for(let L=0;L<y.length;L+=1)y[L]&&y[L].m(o,null);Re(o,((S=t[1])==null?void 0:S.typeKey)||""),h(e,s),g&&g.m(e,null),q(v,a,m),R&&R.m(v,m),q(v,f,m),w&&w.m(v,m),q(v,i,m),u=!0,c||(d=ee(o,"change",t[21]),c=!0)},p(v,m){var S,L;if(m[0]&1){p=Ae;let T;for(T=0;T<p.length;T+=1){const N=dt(v,p,T);y[T]?y[T].p(N,m):(y[T]=vt(N),y[T].c(),y[T].m(o,null))}for(;T<y.length;T+=1)y[T].d(1);y.length=p.length}(!u||m[0]&2&&r!==(r=((S=v[1])==null?void 0:S.typeKey)||""))&&Re(o,((L=v[1])==null?void 0:L.typeKey)||""),v[1]?g?g.p(v,m):(g=gt(v),g.c(),g.m(e,null)):g&&(g.d(1),g=null),v[0]>=0&&v[3]?R||(R=pt(),R.c(),R.m(f.parentNode,f)):R&&(R.d(1),R=null),v[1]&&v[4]?w?(w.p(v,m),m[0]&18&&M(w,1)):(w=bt(v),w.c(),M(w,1),w.m(i.parentNode,i)):w&&(ke(),U(w,1,1,()=>{w=null}),ye())},i(v){u||(M(w),u=!0)},o(v){U(w),u=!1},d(v){v&&_(e),re(y,v),g&&g.d(),v&&_(a),R&&R.d(v),v&&_(f),w&&w.d(v),v&&_(i),c=!1,d()}}}function ml(t){let e,o;return{c(){e=b("p"),o=O("There is no supporting room below!"),this.h()},l(l){e=E(l,"P",{class:!0});var n=k(e);o=P(n,"There is no supporting room below!"),n.forEach(_),this.h()},h(){I(e,"class","svelte-102wwix")},m(l,n){q(l,e,n),h(e,o)},p:X,i:X,o:X,d(l){l&&_(e)}}}function vt(t){var f;let e,o=t[4].name+"",l,n=t[39]?` (floors: ${(f=t[4].floors)==null?void 0:f.join(", ")})`:"",r,s,a;return{c(){e=b("option"),l=O(o),r=O(n),s=H(),this.h()},l(i){e=E(i,"OPTION",{});var u=k(e);l=P(u,o),r=P(u,n),s=K(u),u.forEach(_),this.h()},h(){e.disabled=a=t[39],e.__value=t[38],e.value=e.__value},m(i,u){q(i,e,u),h(e,l),h(e,r),h(e,s)},p(i,u){var c;u[0]&1&&n!==(n=i[39]?` (floors: ${(c=i[4].floors)==null?void 0:c.join(", ")})`:"")&&j(r,n),u[0]&1&&a!==(a=i[39])&&(e.disabled=a)},d(i){i&&_(e)}}}function gt(t){let e,o,l,n,r,s,a,f;return{c(){e=b("button"),o=b("i"),l=H(),n=b("button"),r=b("i"),this.h()},l(i){e=E(i,"BUTTON",{class:!0});var u=k(e);o=E(u,"I",{class:!0}),k(o).forEach(_),u.forEach(_),l=K(i),n=E(i,"BUTTON",{class:!0});var c=k(n);r=E(c,"I",{class:!0}),k(r).forEach(_),c.forEach(_),this.h()},h(){I(o,"class","icofont-ui-rotation"),I(e,"class","rotate svelte-102wwix"),I(r,"class","icofont-ui-delete"),I(n,"class","remove svelte-102wwix"),n.disabled=s=!!t[3]},m(i,u){q(i,e,u),h(e,o),q(i,l,u),q(i,n,u),h(n,r),a||(f=[ee(e,"click",Ie(function(){fe(t[14])&&t[14].apply(this,arguments)})),ee(n,"click",Ie(t[22]))],a=!0)},p(i,u){t=i,u[0]&8&&s!==(s=!!t[3])&&(n.disabled=s)},d(i){i&&_(e),i&&_(l),i&&_(n),a=!1,Ge(f)}}}function pt(t){let e,o,l,n,r;return{c(){e=b("div"),o=b("i"),l=H(),n=b("p"),r=O("This room is supportting the one above it!"),this.h()},l(s){e=E(s,"DIV",{class:!0});var a=k(e);o=E(a,"I",{class:!0}),k(o).forEach(_),l=K(a),n=E(a,"P",{class:!0});var f=k(n);r=P(f,"This room is supportting the one above it!"),f.forEach(_),a.forEach(_),this.h()},h(){I(o,"class","icofont-info svelte-102wwix"),I(n,"class","svelte-102wwix"),I(e,"class","svelte-102wwix")},m(s,a){q(s,e,a),h(e,o),h(e,l),h(e,n),h(n,r)},d(s){s&&_(e)}}}function bt(t){let e,o;return e=new Pt({props:{tabs:["Details","Furniture"],inverted:!0,$$slots:{default:[gl,({tab:l})=>({29:l}),({tab:l})=>[l?536870912:0]]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},l(l){he(e.$$.fragment,l)},m(l,n){_e(e,l,n),o=!0},p(l,n){const r={};n[0]&536881170|n[1]&2048&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){o||(M(e.$$.fragment,l),o=!0)},o(l){U(e.$$.fragment,l),o=!1},d(l){me(e,l)}}}function dl(t){let e,o,l=t[11],n=[];for(let r=0;r<l.length;r+=1)n[r]=kt(_t(t,l,r));return{c(){e=b("table"),o=b("tbody");for(let r=0;r<n.length;r+=1)n[r].c()},l(r){e=E(r,"TABLE",{});var s=k(e);o=E(s,"TBODY",{});var a=k(o);for(let f=0;f<n.length;f+=1)n[f].l(a);a.forEach(_),s.forEach(_)},m(r,s){q(r,e,s),h(e,o);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,null)},p(r,s){if(s[0]&75778){l=r[11];let a;for(a=0;a<l.length;a+=1){const f=_t(r,l,a);n[a]?n[a].p(f,s):(n[a]=kt(f),n[a].c(),n[a].m(o,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=l.length}},d(r){r&&_(e),re(n,r)}}}function vl(t){let e,o,l,n,r,s,a,f=t[4].name+"",i,u,c,d,p,y,g,R=t[4].cost+"",w,v,m,S,L,T,N,V=t[4].minLvl+"",C;return{c(){e=b("table"),o=b("tbody"),l=b("tr"),n=b("td"),r=O("Name"),s=H(),a=b("td"),i=O(f),u=H(),c=b("tr"),d=b("td"),p=O("Cost"),y=H(),g=b("td"),w=O(R),v=H(),m=b("tr"),S=b("td"),L=O("Min. Level"),T=H(),N=b("td"),C=O(V)},l(Y){e=E(Y,"TABLE",{});var F=k(e);o=E(F,"TBODY",{});var A=k(o);l=E(A,"TR",{});var x=k(l);n=E(x,"TD",{});var $=k(n);r=P($,"Name"),$.forEach(_),s=K(x),a=E(x,"TD",{});var oe=k(a);i=P(oe,f),oe.forEach(_),x.forEach(_),u=K(A),c=E(A,"TR",{});var W=k(c);d=E(W,"TD",{});var G=k(d);p=P(G,"Cost"),G.forEach(_),y=K(W),g=E(W,"TD",{});var ge=k(g);w=P(ge,R),ge.forEach(_),W.forEach(_),v=K(A),m=E(A,"TR",{});var pe=k(m);S=E(pe,"TD",{});var be=k(S);L=P(be,"Min. Level"),be.forEach(_),T=K(pe),N=E(pe,"TD",{});var Le=k(N);C=P(Le,V),Le.forEach(_),pe.forEach(_),A.forEach(_),F.forEach(_)},m(Y,F){q(Y,e,F),h(e,o),h(o,l),h(l,n),h(n,r),h(l,s),h(l,a),h(a,i),h(o,u),h(o,c),h(c,d),h(d,p),h(c,y),h(c,g),h(g,w),h(o,v),h(o,m),h(m,S),h(S,L),h(m,T),h(m,N),h(N,C)},p(Y,F){F[0]&16&&f!==(f=Y[4].name+"")&&j(i,f),F[0]&16&&R!==(R=Y[4].cost+"")&&j(w,R),F[0]&16&&V!==(V=Y[4].minLvl+"")&&j(C,V)},d(Y){Y&&_(e)}}}function Et(t){let e,o=t[35].name+"",l,n;return{c(){e=b("option"),l=O(o),this.h()},l(r){e=E(r,"OPTION",{});var s=k(e);l=P(s,o),s.forEach(_),this.h()},h(){e.__value=n=t[34],e.value=e.__value},m(r,s){q(r,e,s),h(e,l)},p(r,s){s[0]&2048&&o!==(o=r[35].name+"")&&j(l,o),s[0]&67584&&n!==(n=r[34])&&(e.__value=n,e.value=e.__value)},d(r){r&&_(e)}}}function kt(t){let e,o,l=t[31].name+"",n,r,s,a,f,i,u,c,d,p,y=t[16](t[31].optionKeys),g=[];for(let w=0;w<y.length;w+=1)g[w]=Et(mt(t,y,w));function R(...w){return t[23](t[30],...w)}return{c(){e=b("tr"),o=b("td"),n=O(l),r=H(),s=b("td"),a=b("select"),f=b("option"),i=O("None");for(let w=0;w<g.length;w+=1)g[w].c();c=H(),this.h()},l(w){e=E(w,"TR",{});var v=k(e);o=E(v,"TD",{});var m=k(o);n=P(m,l),m.forEach(_),r=K(v),s=E(v,"TD",{});var S=k(s);a=E(S,"SELECT",{});var L=k(a);f=E(L,"OPTION",{});var T=k(f);i=P(T,"None"),T.forEach(_);for(let N=0;N<g.length;N+=1)g[N].l(L);L.forEach(_),S.forEach(_),c=K(v),v.forEach(_),this.h()},h(){f.__value="",f.value=f.__value},m(w,v){q(w,e,v),h(e,o),h(o,n),h(e,r),h(e,s),h(s,a),h(a,f),h(f,i);for(let m=0;m<g.length;m+=1)g[m]&&g[m].m(a,null);Re(a,t[1].furnitureKeys[t[30]]||""),h(e,c),d||(p=ee(a,"change",R),d=!0)},p(w,v){if(t=w,v[0]&2048&&l!==(l=t[31].name+"")&&j(n,l),v[0]&67584){y=t[16](t[31].optionKeys);let m;for(m=0;m<y.length;m+=1){const S=mt(t,y,m);g[m]?g[m].p(S,v):(g[m]=Et(S),g[m].c(),g[m].m(a,null))}for(;m<g.length;m+=1)g[m].d(1);g.length=y.length}v[0]&67586&&u!==(u=t[1].furnitureKeys[t[30]]||"")&&Re(a,t[1].furnitureKeys[t[30]]||"")},d(w){w&&_(e),re(g,w),d=!1,p()}}}function gl(t){let e;function o(r,s){if(r[29]==="Details")return vl;if(r[29]==="Furniture")return dl}let l=o(t),n=l&&l(t);return{c(){n&&n.c(),e=le()},l(r){n&&n.l(r),e=le()},m(r,s){n&&n.m(r,s),q(r,e,s)},p(r,s){l===(l=o(r))&&n?n.p(r,s):(n&&n.d(1),n=l&&l(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){n&&n.d(r),r&&_(e)}}}function pl(t){let e,o,l,n,r;const s=[ml,_l],a=[];function f(i,u){var c;return i[0]>0&&(!i[2]||(c=i[12])!=null&&c.open)?0:1}return l=f(t),n=a[l]=s[l](t),{c(){e=b("div"),o=b("div"),n.c(),this.h()},l(i){e=E(i,"DIV",{class:!0});var u=k(e);o=E(u,"DIV",{class:!0});var c=k(o);n.l(c),c.forEach(_),u.forEach(_),this.h()},h(){I(o,"class","content svelte-102wwix"),I(e,"class","popup svelte-102wwix"),Z(e,"top",t[10]),Z(e,"bottom",t[9]),Z(e,"left",t[8]),Z(e,"right",t[7]),Z(e,"max-height",t[6]),Z(e,"maxWidth",t[5])},m(i,u){q(i,e,u),h(e,o),a[l].m(o,null),r=!0},p(i,u){let c=l;l=f(i),l===c?a[l].p(i,u):(ke(),U(a[c],1,1,()=>{a[c]=null}),ye(),n=a[l],n?n.p(i,u):(n=a[l]=s[l](i),n.c()),M(n,1),n.m(o,null)),u[0]&1024&&Z(e,"top",i[10]),u[0]&512&&Z(e,"bottom",i[9]),u[0]&256&&Z(e,"left",i[8]),u[0]&128&&Z(e,"right",i[7]),u[0]&64&&Z(e,"max-height",i[6]),u[0]&32&&Z(e,"maxWidth",i[5])},i(i){r||(M(n),r=!0)},o(i){U(n),r=!1},d(i){i&&_(e),a[l].d()}}}function bl(t,e,o){let l,n,r,s,a,f,i,u,c,d,p,y,g,R;const w=ae/2,v=we/2,m=100/ae,S=100/we;let{x:L}=e,{y:T}=e,{floor:N}=e,{room:V}=e,{below:C}=e,{above:Y}=e;const F=ze(),A=W=>W.map(G=>[G,fl[G]]),x=W=>l(W.currentTarget.value),$=()=>l(null),oe=(W,G)=>r(W,G.currentTarget.value);return t.$$set=W=>{"x"in W&&o(17,L=W.x),"y"in W&&o(18,T=W.y),"floor"in W&&o(0,N=W.floor),"room"in W&&o(1,V=W.room),"below"in W&&o(2,C=W.below),"above"in W&&o(3,Y=W.above)},t.$$.update=()=>{t.$$.dirty[0]&393216&&o(15,l=W=>{F("change",{x:L,y:T,typeKey:W})}),t.$$.dirty[0]&393216&&o(14,n=()=>{F("rotate",{x:L,y:T})}),t.$$.dirty[0]&393216&&o(13,r=(W,G)=>{F("furniture",{x:L,y:T,hotspotKey:W,furnitureKey:G})}),t.$$.dirty[0]&2&&o(4,s=V?se[V.typeKey]:null),t.$$.dirty[0]&4&&o(12,a=C?se[C.typeKey]:null),t.$$.dirty[0]&16&&o(11,f=s?Object.entries(s.furnitureHotspots):[]),t.$$.dirty[0]&262144&&o(20,i=T<v),t.$$.dirty[0]&131072&&o(19,u=L<w),t.$$.dirty[0]&1310720&&o(10,c=i?`${S*(T+1)}%`:""),t.$$.dirty[0]&1310720&&o(9,d=i?"":`${S*(we-T)}%`),t.$$.dirty[0]&655360&&o(8,p=u?`${m*L}%`:""),t.$$.dirty[0]&655360&&o(7,y=u?"":`${m*(ae-L-1)}%`),t.$$.dirty[0]&1310720&&o(6,g=`calc(${(i?we-T-1:T)*S}% - 4px)`),t.$$.dirty[0]&655360&&o(5,R=`calc(${(u?ae-L-1:L)*m}% - 4px)`)},[N,V,C,Y,s,R,g,y,p,d,c,f,a,r,n,l,A,L,T,u,i,x,$,oe]}class El extends de{constructor(e){super(),ve(this,e,bl,pl,ne,{x:17,y:18,floor:0,room:1,below:2,above:3},null,[-1,-1])}}function yt(t,e,o){const l=t.slice();return l[2]=e[o],l}function Tt(t){let e,o,l=t[2].name+"",n,r,s,a=t[2].value+"",f,i,u,c=t[2].limit+"",d,p,y,g=t[2].level+"",R,w;return{c(){e=b("tr"),o=b("td"),n=O(l),r=H(),s=b("td"),f=O(a),i=H(),u=b("td"),d=O(c),p=H(),y=b("td"),R=O(g),w=H(),this.h()},l(v){e=E(v,"TR",{});var m=k(e);o=E(m,"TD",{});var S=k(o);n=P(S,l),S.forEach(_),r=K(m),s=E(m,"TD",{});var L=k(s);f=P(L,a),L.forEach(_),i=K(m),u=E(m,"TD",{});var T=k(u);d=P(T,c),T.forEach(_),p=K(m),y=E(m,"TD",{});var N=k(y);R=P(N,g),N.forEach(_),w=K(m),m.forEach(_),this.h()},h(){te(e,"max",t[2].level===t[1])},m(v,m){q(v,e,m),h(e,o),h(o,n),h(e,r),h(e,s),h(s,f),h(e,i),h(e,u),h(u,d),h(e,p),h(e,y),h(y,R),h(e,w)},p(v,m){m&1&&l!==(l=v[2].name+"")&&j(n,l),m&1&&a!==(a=v[2].value+"")&&j(f,a),m&1&&c!==(c=v[2].limit+"")&&j(d,c),m&1&&g!==(g=v[2].level+"")&&j(R,g),m&3&&te(e,"max",v[2].level===v[1])},d(v){v&&_(e)}}}function kl(t){let e,o,l,n,r,s,a,f,i,u,c,d,p,y,g,R,w=t[0],v=[];for(let m=0;m<w.length;m+=1)v[m]=Tt(yt(t,w,m));return{c(){e=b("table"),o=b("thead"),l=b("tr"),n=b("th"),r=O("Requirement"),s=H(),a=b("th"),f=O("Current"),i=H(),u=b("th"),c=O("Limit"),d=H(),p=b("th"),y=O("Min. Level"),g=H(),R=b("tbody");for(let m=0;m<v.length;m+=1)v[m].c();this.h()},l(m){e=E(m,"TABLE",{class:!0});var S=k(e);o=E(S,"THEAD",{});var L=k(o);l=E(L,"TR",{});var T=k(l);n=E(T,"TH",{});var N=k(n);r=P(N,"Requirement"),N.forEach(_),s=K(T),a=E(T,"TH",{});var V=k(a);f=P(V,"Current"),V.forEach(_),i=K(T),u=E(T,"TH",{});var C=k(u);c=P(C,"Limit"),C.forEach(_),d=K(T),p=E(T,"TH",{});var Y=k(p);y=P(Y,"Min. Level"),Y.forEach(_),T.forEach(_),L.forEach(_),g=K(S),R=E(S,"TBODY",{});var F=k(R);for(let A=0;A<v.length;A+=1)v[A].l(F);F.forEach(_),S.forEach(_),this.h()},h(){I(e,"class","svelte-fdv1qg")},m(m,S){q(m,e,S),h(e,o),h(o,l),h(l,n),h(n,r),h(l,s),h(l,a),h(a,f),h(l,i),h(l,u),h(u,c),h(l,d),h(l,p),h(p,y),h(e,g),h(e,R);for(let L=0;L<v.length;L+=1)v[L]&&v[L].m(R,null)},p(m,[S]){if(S&3){w=m[0];let L;for(L=0;L<w.length;L+=1){const T=yt(m,w,L);v[L]?v[L].p(T,S):(v[L]=Tt(T),v[L].c(),v[L].m(R,null))}for(;L<v.length;L+=1)v[L].d(1);v.length=w.length}},i:X,o:X,d(m){m&&_(e),re(v,m)}}}function yl(t,e,o){let l,{requirements:n}=e;return t.$$set=r=>{"requirements"in r&&o(0,n=r.requirements)},t.$$.update=()=>{var r;t.$$.dirty&1&&o(1,l=(r=n[0])==null?void 0:r.level)},[n,l]}class Tl extends de{constructor(e){super(),ve(this,e,yl,kl,ne,{requirements:0})}}function Lt(t,e,o){const l=t.slice();return l[2]=e[o].type,l[0]=e[o].rooms,l}function wt(t){let e,o,l=t[2].name+"",n,r,s,a=t[2].minLvl+"",f,i,u,c=t[2].cost+"",d,p,y,g=(t[0].length||"-")+"",R,w,v,m=(t[0].length>0?t[0].length*t[2].cost:"-")+"",S,L;return{c(){e=b("tr"),o=b("td"),n=O(l),r=H(),s=b("td"),f=O(a),i=H(),u=b("td"),d=O(c),p=H(),y=b("td"),R=O(g),w=H(),v=b("td"),S=O(m),L=H(),this.h()},l(T){e=E(T,"TR",{});var N=k(e);o=E(N,"TD",{});var V=k(o);n=P(V,l),V.forEach(_),r=K(N),s=E(N,"TD",{class:!0});var C=k(s);f=P(C,a),C.forEach(_),i=K(N),u=E(N,"TD",{class:!0});var Y=k(u);d=P(Y,c),Y.forEach(_),p=K(N),y=E(N,"TD",{class:!0});var F=k(y);R=P(F,g),F.forEach(_),w=K(N),v=E(N,"TD",{class:!0});var A=k(v);S=P(A,m),A.forEach(_),L=K(N),N.forEach(_),this.h()},h(){I(s,"class","right"),I(u,"class","right"),I(y,"class","right"),I(v,"class","right")},m(T,N){q(T,e,N),h(e,o),h(o,n),h(e,r),h(e,s),h(s,f),h(e,i),h(e,u),h(u,d),h(e,p),h(e,y),h(y,R),h(e,w),h(e,v),h(v,S),h(e,L)},p(T,N){N&2&&l!==(l=T[2].name+"")&&j(n,l),N&2&&a!==(a=T[2].minLvl+"")&&j(f,a),N&2&&c!==(c=T[2].cost+"")&&j(d,c),N&2&&g!==(g=(T[0].length||"-")+"")&&j(R,g),N&2&&m!==(m=(T[0].length>0?T[0].length*T[2].cost:"-")+"")&&j(S,m)},d(T){T&&_(e)}}}function Ll(t){let e,o,l,n,r,s,a,f,i,u,c,d,p,y,g,R,w,v,m,S=t[1],L=[];for(let T=0;T<S.length;T+=1)L[T]=wt(Lt(t,S,T));return{c(){e=b("table"),o=b("thead"),l=b("tr"),n=b("th"),r=O("Type"),s=H(),a=b("th"),f=O("Level"),i=H(),u=b("th"),c=O("Cost"),d=H(),p=b("th"),y=O("Amount"),g=H(),R=b("th"),w=O("Total"),v=H(),m=b("tbody");for(let T=0;T<L.length;T+=1)L[T].c();this.h()},l(T){e=E(T,"TABLE",{class:!0});var N=k(e);o=E(N,"THEAD",{});var V=k(o);l=E(V,"TR",{});var C=k(l);n=E(C,"TH",{});var Y=k(n);r=P(Y,"Type"),Y.forEach(_),s=K(C),a=E(C,"TH",{class:!0});var F=k(a);f=P(F,"Level"),F.forEach(_),i=K(C),u=E(C,"TH",{class:!0});var A=k(u);c=P(A,"Cost"),A.forEach(_),d=K(C),p=E(C,"TH",{class:!0});var x=k(p);y=P(x,"Amount"),x.forEach(_),g=K(C),R=E(C,"TH",{class:!0});var $=k(R);w=P($,"Total"),$.forEach(_),C.forEach(_),V.forEach(_),v=K(N),m=E(N,"TBODY",{});var oe=k(m);for(let W=0;W<L.length;W+=1)L[W].l(oe);oe.forEach(_),N.forEach(_),this.h()},h(){I(a,"class","right"),I(u,"class","right"),I(p,"class","right"),I(R,"class","right"),I(e,"class","svelte-fdv1qg")},m(T,N){q(T,e,N),h(e,o),h(o,l),h(l,n),h(n,r),h(l,s),h(l,a),h(a,f),h(l,i),h(l,u),h(u,c),h(l,d),h(l,p),h(p,y),h(l,g),h(l,R),h(R,w),h(e,v),h(e,m);for(let V=0;V<L.length;V+=1)L[V]&&L[V].m(m,null)},p(T,[N]){if(N&2){S=T[1];let V;for(V=0;V<S.length;V+=1){const C=Lt(T,S,V);L[V]?L[V].p(C,N):(L[V]=wt(C),L[V].c(),L[V].m(m,null))}for(;V<L.length;V+=1)L[V].d(1);L.length=S.length}},i:X,o:X,d(T){T&&_(e),re(L,T)}}}function wl(t,e,o){let l,{rooms:n}=e;return t.$$set=r=>{"rooms"in r&&o(0,n=r.rooms)},t.$$.update=()=>{t.$$.dirty&1&&o(1,l=Ae.map(([r,s])=>({type:s,rooms:n.filter(a=>(a==null?void 0:a.typeKey)===r)})).sort((r,s)=>s.rooms.length-r.rooms.length))},[n,l]}class Sl extends de{constructor(e){super(),ve(this,e,wl,Ll,ne,{rooms:0})}}function St(t,e,o){const l=t.slice();return l[17]=e[o],l[19]=o,l}function Dt(t,e,o){const l=t.slice();return l[20]=e[o],l[22]=o,l}function It(t){var l;let e,o;return e=new $t({props:{x:t[22],y:t[19],room:t[20],selected:t[22]===t[2]&&t[19]===t[3],below:(l=t[1][t[0]-1])==null?void 0:l[t[19]][t[22]],connections:t[5](t[22],t[19],t[20])}}),e.$on("selected",function(){fe(t[10])&&t[10].apply(this,arguments)}),{c(){ce(e.$$.fragment)},l(n){he(e.$$.fragment,n)},m(n,r){_e(e,n,r),o=!0},p(n,r){var a;t=n;const s={};r&16&&(s.room=t[20]),r&12&&(s.selected=t[22]===t[2]&&t[19]===t[3]),r&3&&(s.below=(a=t[1][t[0]-1])==null?void 0:a[t[19]][t[22]]),r&48&&(s.connections=t[5](t[22],t[19],t[20])),e.$set(s)},i(n){o||(M(e.$$.fragment,n),o=!0)},o(n){U(e.$$.fragment,n),o=!1},d(n){me(e,n)}}}function Rt(t){let e,o,l=t[17],n=[];for(let s=0;s<l.length;s+=1)n[s]=It(Dt(t,l,s));const r=s=>U(n[s],1,1,()=>{n[s]=null});return{c(){e=b("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=E(s,"DIV",{class:!0});var a=k(e);for(let f=0;f<n.length;f+=1)n[f].l(a);a.forEach(_),this.h()},h(){I(e,"class","row svelte-1faehm1")},m(s,a){q(s,e,a);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);o=!0},p(s,a){if(a&1087){l=s[17];let f;for(f=0;f<l.length;f+=1){const i=Dt(s,l,f);n[f]?(n[f].p(i,a),M(n[f],1)):(n[f]=It(i),n[f].c(),M(n[f],1),n[f].m(e,null))}for(ke(),f=l.length;f<n.length;f+=1)r(f);ye()}},i(s){if(!o){for(let a=0;a<l.length;a+=1)M(n[a]);o=!0}},o(s){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)U(n[a]);o=!1},d(s){s&&_(e),re(n,s)}}}function Nt(t){var l,n;let e,o;return e=new El({props:{floor:t[13],x:t[2],y:t[3],room:t[11],below:(l=t[1][t[0]-1])==null?void 0:l[t[3]][t[2]],above:(n=t[1][t[0]+1])==null?void 0:n[t[3]][t[2]]}}),e.$on("change",function(){fe(t[9])&&t[9].apply(this,arguments)}),e.$on("rotate",function(){fe(t[8])&&t[8].apply(this,arguments)}),e.$on("furniture",function(){fe(t[6])&&t[6].apply(this,arguments)}),{c(){ce(e.$$.fragment)},l(r){he(e.$$.fragment,r)},m(r,s){_e(e,r,s),o=!0},p(r,s){var f,i;t=r;const a={};s&8192&&(a.floor=t[13]),s&4&&(a.x=t[2]),s&8&&(a.y=t[3]),s&2048&&(a.room=t[11]),s&15&&(a.below=(f=t[1][t[0]-1])==null?void 0:f[t[3]][t[2]]),s&15&&(a.above=(i=t[1][t[0]+1])==null?void 0:i[t[3]][t[2]]),e.$set(a)},i(r){o||(M(e.$$.fragment,r),o=!0)},o(r){U(e.$$.fragment,r),o=!1},d(r){me(e,r)}}}function Ht(t){let e,o,l,n,r=t[4],s=[];for(let i=0;i<r.length;i+=1)s[i]=Rt(St(t,r,i));const a=i=>U(s[i],1,1,()=>{s[i]=null});let f=t[2]!==null&&t[3]!==null&&Nt(t);return{c(){e=b("div");for(let i=0;i<s.length;i+=1)s[i].c();o=H(),f&&f.c(),this.h()},l(i){e=E(i,"DIV",{class:!0});var u=k(e);for(let c=0;c<s.length;c+=1)s[c].l(u);o=K(u),f&&f.l(u),u.forEach(_),this.h()},h(){I(e,"class","grid svelte-1faehm1")},m(i,u){q(i,e,u);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);h(e,o),f&&f.m(e,null),n=!0},p(i,u){if(u&1087){r=i[4];let c;for(c=0;c<r.length;c+=1){const d=St(i,r,c);s[c]?(s[c].p(d,u),M(s[c],1)):(s[c]=Rt(d),s[c].c(),M(s[c],1),s[c].m(e,o))}for(ke(),c=r.length;c<s.length;c+=1)a(c);ye()}i[2]!==null&&i[3]!==null?f?(f.p(i,u),u&12&&M(f,1)):(f=Nt(i),f.c(),M(f,1),f.m(e,null)):f&&(ke(),U(f,1,1,()=>{f=null}),ye())},i(i){if(!n){for(let u=0;u<r.length;u+=1)M(s[u]);M(f),Ze(()=>{n&&(l||(l=We(e,Be,{},!0)),l.run(1))}),n=!0}},o(i){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)U(s[u]);U(f),l||(l=We(e,Be,{},!1)),l.run(0),n=!1},d(i){i&&_(e),re(s,i),f&&f.d(),i&&l&&l.end()}}}function Dl(t){let e,o,l=t[16]+"",n;return{c(){e=b("p"),o=O("Unknown tab "),n=O(l)},l(r){e=E(r,"P",{});var s=k(e);o=P(s,"Unknown tab "),n=P(s,l),s.forEach(_)},m(r,s){q(r,e,s),h(e,o),h(e,n)},p(r,s){s&65536&&l!==(l=r[16]+"")&&j(n,l)},i:X,o:X,d(r){r&&_(e)}}}function Il(t){let e,o;return e=new Sl({props:{rooms:t[1].flat(2)}}),{c(){ce(e.$$.fragment)},l(l){he(e.$$.fragment,l)},m(l,n){_e(e,l,n),o=!0},p(l,n){const r={};n&2&&(r.rooms=l[1].flat(2)),e.$set(r)},i(l){o||(M(e.$$.fragment,l),o=!0)},o(l){U(e.$$.fragment,l),o=!1},d(l){me(e,l)}}}function Rl(t){let e,o;return e=new Tl({props:{requirements:t[12].levelRequirements}}),{c(){ce(e.$$.fragment)},l(l){he(e.$$.fragment,l)},m(l,n){_e(e,l,n),o=!0},p(l,n){const r={};n&4096&&(r.requirements=l[12].levelRequirements),e.$set(r)},i(l){o||(M(e.$$.fragment,l),o=!0)},o(l){U(e.$$.fragment,l),o=!1},d(l){me(e,l)}}}function Nl(t){let e,o;return e=new ol({props:{errors:t[12].errors}}),{c(){ce(e.$$.fragment)},l(l){he(e.$$.fragment,l)},m(l,n){_e(e,l,n),o=!0},p(l,n){const r={};n&4096&&(r.errors=l[12].errors),e.$set(r)},i(l){o||(M(e.$$.fragment,l),o=!0)},o(l){U(e.$$.fragment,l),o=!1},d(l){me(e,l)}}}function Hl(t){let e,o;return e=new al({}),{c(){ce(e.$$.fragment)},l(l){he(e.$$.fragment,l)},m(l,n){_e(e,l,n),o=!0},p:X,i(l){o||(M(e.$$.fragment,l),o=!0)},o(l){U(e.$$.fragment,l),o=!1},d(l){me(e,l)}}}function Kl(t){let e,o,l,n;const r=[Hl,Nl,Rl,Il,Dl],s=[];function a(f,i){return f[16]==="Getting Started"?0:f[16]==="Errors"?1:f[16]==="Requirements"?2:f[16]==="Rooms"?3:4}return e=a(t),o=s[e]=r[e](t),{c(){o.c(),l=le()},l(f){o.l(f),l=le()},m(f,i){s[e].m(f,i),q(f,l,i),n=!0},p(f,i){let u=e;e=a(f),e===u?s[e].p(f,i):(ke(),U(s[u],1,1,()=>{s[u]=null}),ye(),o=s[e],o?o.p(f,i):(o=s[e]=r[e](f),o.c()),M(o,1),o.m(l.parentNode,l))},i(f){n||(M(o),n=!0)},o(f){U(o),n=!1},d(f){s[e].d(f),f&&_(l)}}}function Ol(t){var u;let e,o=t[13],l,n,r,s,a,f,i=Ht(t);return r=new sl({props:{floor:t[13],price:t[12].totalPrice,minLvl:(u=t[12].levelRequirements[0])==null?void 0:u.level,extent:t[12].extent}}),r.$on("change",t[14]),r.$on("reset",function(){fe(t[7])&&t[7].apply(this,arguments)}),a=new Pt({props:{tabs:["Getting Started","Errors","Requirements","Rooms"],$$slots:{default:[Kl,({tab:c})=>({16:c}),({tab:c})=>c?65536:0]},$$scope:{ctx:t}}}),{c(){e=b("div"),i.c(),l=H(),n=b("div"),ce(r.$$.fragment),s=H(),ce(a.$$.fragment),this.h()},l(c){e=E(c,"DIV",{class:!0});var d=k(e);i.l(d),d.forEach(_),l=K(c),n=E(c,"DIV",{class:!0});var p=k(n);he(r.$$.fragment,p),s=K(p),he(a.$$.fragment,p),p.forEach(_),this.h()},h(){I(e,"class","map svelte-1faehm1"),I(n,"class","sidebar svelte-1faehm1")},m(c,d){q(c,e,d),i.m(e,null),q(c,l,d),q(c,n,d),_e(r,n,null),h(n,s),_e(a,n,null),f=!0},p(c,[d]){var g;t=c,d&8192&&ne(o,o=t[13])?(ke(),U(i,1,1,X),ye(),i=Ht(t),i.c(),M(i,1),i.m(e,null)):i.p(t,d);const p={};d&8192&&(p.floor=t[13]),d&4096&&(p.price=t[12].totalPrice),d&4096&&(p.minLvl=(g=t[12].levelRequirements[0])==null?void 0:g.level),d&4096&&(p.extent=t[12].extent),r.$set(p);const y={};d&8458242&&(y.$$scope={dirty:d,ctx:t}),a.$set(y)},i(c){f||(M(i),M(r.$$.fragment,c),M(a.$$.fragment,c),f=!0)},o(c){U(i),U(r.$$.fragment,c),U(a.$$.fragment,c),f=!1},d(c){c&&_(e),i.d(c),c&&_(l),c&&_(n),me(r),me(a)}}}function Pl(t,e,o){let l,n,r,s,a,f,i,u,c,d,p;Mt(t,Ut,m=>o(15,p=m));let y=Math.max(0,ue.indexOf(0)),g=[];Ft(()=>{o(1,g=Gt(p.url.searchParams))});let R=null,w=null;const v=m=>o(0,y=ue.indexOf(m.detail.floor));return t.$$.update=()=>{t.$$.dirty&1&&o(13,l=ue[y]),t.$$.dirty&3&&o(9,f=m=>{m.detail.typeKey===null?o(1,g[y][m.detail.y][m.detail.x]=null,g):o(1,g[y][m.detail.y][m.detail.x]={x:m.detail.x,y:m.detail.y,typeKey:m.detail.typeKey,orientation:Ee.North,furnitureKeys:{}},g),qe(`?${Ve(g)}`,{replaceState:!0})}),t.$$.dirty&3&&o(8,i=m=>{const S=g[y][m.detail.y][m.detail.x];S&&(o(1,g[y][m.detail.y][m.detail.x]={...S,orientation:Ce(S.orientation)},g),qe(`?${Ve(g)}`,{replaceState:!0}))}),t.$$.dirty&3&&o(7,u=()=>{confirm("Are you sure you want to delete all rooms on this floor?")&&(o(1,g[y]=Kt(),g),qe(`?${Ve(g)}`,{replaceState:!0}))}),t.$$.dirty&3&&o(4,n=g[y]||[]),t.$$.dirty&2&&o(12,r=At(g)),t.$$.dirty&28&&o(11,s=R!==null&&w!==null?n[w][R]:null),t.$$.dirty&3&&o(6,c=m=>{const S=g[y][m.detail.y][m.detail.x];S&&(S.furnitureKeys[m.detail.hotspotKey]=m.detail.furnitureKey,qe(`?${Ve(g)}`,{replaceState:!0}))}),t.$$.dirty&16&&o(5,d=(m,S,L)=>{if(!L)return[];const T=se[L.typeKey],N={[Ee.North]:S===0?null:n[S-1][m],[Ee.East]:m>=ae-1?null:n[S][m+1],[Ee.South]:S>=we-1?null:n[S+1][m],[Ee.West]:m===0?null:n[S][m-1]},V=[];for(const C of T.doors){const Y=Ce(C,L.orientation),F=N[Y];if(!F)continue;const A=se[F.typeKey];for(const x of A.doors){const $=Ce(x,F.orientation+2);if(Y===$){V.push(Y);break}}}return V})},o(10,a=m=>{o(2,R=m.detail.x),o(3,w=m.detail.y)}),[y,g,R,w,n,d,c,u,i,f,a,s,r,l,v]}class Wl extends de{constructor(e){super(),ve(this,e,Pl,Ol,ne,{})}}export{Wl as default};
