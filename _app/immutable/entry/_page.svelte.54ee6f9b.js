import{S as pl,i as gl,s as bl,k as m,a as D,q as R,l as p,m as g,c as N,h as _,r as S,n as I,p as x,J as El,b as C,G as r,K as Ge,L as ne,u as J,H as Oe,M as ve,N as jt,I as kl,o as Tl,O as At,P as he,Q as jl,e as Ft}from"../chunks/index.5c36ea89.js";import{p as Il}from"../chunks/stores.dec1c1b3.js";import{j as ge}from"../chunks/singletons.af9c3850.js";ge.disable_scroll_handling;const mt=ge.goto;ge.invalidate;ge.invalidateAll;ge.preload_data;ge.preload_code;ge.before_navigate;ge.after_navigate;var me=(t=>(t[t.North=0]="North",t[t.East=1]="East",t[t.South=2]="South",t[t.West=3]="West",t))(me||{});const Ut=t=>me[t].toLowerCase(),bt=(t,e=1)=>(t+=e)%4,j=me,dl={garden:{name:"Garden",cost:1e3,minLvl:1,doors:[j.North,j.East,j.South,j.West],stairs:!1,open:!0,bg:"green"},parlour:{name:"Parlour",cost:1e3,minLvl:1,doors:[j.East,j.South,j.West],stairs:!1,open:!1,bg:"gray"},kitchen:{name:"Kitchen",cost:5e3,minLvl:5,doors:[j.East,j.South],stairs:!1,open:!1,bg:"gray"},dining_room:{name:"Dining Room",cost:5e3,minLvl:10,doors:[j.East,j.South,j.West],stairs:!1,open:!1,bg:"gray"},workshop:{name:"Workshop",cost:1e4,minLvl:15,doors:[j.North,j.South],stairs:!1,open:!1,bg:"gray"},bedroom:{name:"Bedroom",cost:1e4,minLvl:20,doors:[j.East,j.South],stairs:!1,open:!1,bg:"darkred"},skill_hall:{name:"Skill Hall",cost:15e3,minLvl:25,doors:[j.North,j.East,j.South,j.West],stairs:!0,open:!1,bg:"midnightblue"},games_room:{name:"Games Room",cost:25e3,minLvl:30,doors:[j.East,j.South,j.West],stairs:!1,open:!1,bg:"darkorange"},combat_room:{name:"Combat Room",cost:25e3,minLvl:30,doors:[j.East,j.South,j.West],stairs:!1,open:!1,bg:"red"},quest_hall:{name:"Quest Hall",cost:25e3,minLvl:32,doors:[j.North,j.East,j.South,j.West],stairs:!0,open:!1,bg:"indigo"},menagerie:{name:"Menagerie",cost:3e4,minLvl:37,doors:[j.North,j.East,j.South,j.West],stairs:!1,open:!0,bg:"forestgreen"},study:{name:"Study",cost:5e4,minLvl:40,doors:[j.East,j.South,j.West],stairs:!1,open:!1,bg:"gray"},costume_room:{name:"Costume Room",cost:5e4,minLvl:42,doors:[j.South],stairs:!1,open:!1,bg:"gray"},chapel:{name:"Chapel",cost:5e4,minLvl:45,doors:[j.East,j.South],stairs:!1,open:!1,bg:"gray"},portal_chamber:{name:"Portal Chamber",cost:1e5,minLvl:50,doors:[j.South],stairs:!1,open:!1,bg:"gray"},formal_garden:{name:"Formal Garden",cost:75e3,minLvl:55,doors:[j.North,j.East,j.South,j.West],stairs:!1,open:!0,bg:"darkgreen"},throne_room:{name:"Throne Room",cost:15e4,minLvl:60,doors:[j.South],stairs:!1,open:!1,bg:"gray"},aquarium:{name:"Aquarium",cost:2e5,minLvl:63,doors:[j.North,j.East,j.South,j.West],stairs:!1,open:!1,bg:"gray"}},Et=Object.entries(dl).sort(([,t],[,e])=>t.name.localeCompare(e.name)),ce=9,te=9,Ll=t=>{const e=[];for(const s of t){const l=[];for(let o=0;o<te;o++){l.push([]);for(let a=0;a<ce;a++){const n=s[o][a];if(!n){l[o].push(null);continue}const i=dl[n.type];l[o].push({...i,x:a,y:o,type:n.type,doors:i.doors.map(h=>bt(h,n.orientation)).map(h=>({dir:h,name:Ut(h),connected:!1})),orientation:Ut(n.orientation)})}}for(let o=0;o<te;o++)for(let a=0;a<ce;a++){const n=l[o][a];if(!n)continue;const i={[me.North]:o===0?null:l[o-1][a],[me.East]:a>=l[o].length-1?null:l[o][a+1],[me.South]:o>=l.length-1?null:l[o+1][a],[me.West]:a===0?null:l[o][a-1]};for(const h of n.doors){const k=i[h.dir];k&&(h.connected=k.doors.some(f=>f.dir===bt(h.dir,2)))}}e.push(l)}return e},vl=()=>{const t=[];for(let e=0;e<te;e++){t.push([]);for(let s=0;s<ce;s++)t[e].push(null)}return t},kt=-1,Tt=1,ml=[];for(let t=kt;t<=Tt;t++)ml.push(t);const pe=ml,ue=[{level:0,rooms:0,extent:[0,0]},{level:1,rooms:21,extent:[3,3]},{level:15,rooms:21,extent:[4,4]},{level:30,rooms:21,extent:[5,5]},{level:38,rooms:22,extent:[5,5]},{level:44,rooms:23,extent:[5,5]},{level:45,rooms:23,extent:[6,6]},{level:50,rooms:24,extent:[6,6]},{level:56,rooms:25,extent:[6,6]},{level:60,rooms:25,extent:[7,7]},{level:62,rooms:26,extent:[7,7]},{level:68,rooms:27,extent:[7,7]},{level:74,rooms:28,extent:[7,7]},{level:80,rooms:29,extent:[7,7]},{level:86,rooms:30,extent:[7,7]},{level:92,rooms:31,extent:[7,7]},{level:96,rooms:32,extent:[7,7]},{level:99,rooms:33,extent:[7,7]}],zl=t=>{const e=t.flat(2).filter(u=>!!u).map(u=>u),s=Et.map(([u,b])=>({type:b,rooms:e.filter(M=>M.type===u)})).sort((u,b)=>b.rooms.length-u.rooms.length);let l=0,o=ce,a=te,n=0,i=0,h=null;const k=[];for(const u of e)l+=u.cost,h=h&&u.minLvl<=h.minLvl?h:u,o=Math.min(o,u.x),n=Math.max(n,u.x),a=Math.min(a,u.y),i=Math.max(i,u.y);const f=[];if(h&&f.push({name:"Highest Level Room",value:h.name,limit:"-",level:h.minLvl}),e.length>0){const u=ue.find(b=>b.rooms>=e.length);if(u)f.push({name:"Number of Rooms",value:e.length,limit:u.rooms,level:u.level});else{const b=ue[ue.length-1].rooms;k.push(`You have too many rooms (${e.length})! You cannot have more than ${b}`)}}const c=Math.max(0,n-o+1);if(c>0){const u=ue.find(b=>b.extent[0]>=c);if(u)f.push({name:"Extent X",value:c,limit:u.extent[0],level:u.level});else{const b=ue[ue.length-1].extent[0];k.push(`Your house is too wide (${c})! It can be at most ${b} wide`)}}const d=Math.max(0,i-a+1);if(d>0){const u=ue.find(b=>b.extent[1]>=d);if(u)f.push({name:"Extent Y",value:d,limit:u.extent[1],level:u.level});else{const b=ue[ue.length-1].extent[1];k.push(`Your house is too tall (${d})! It can be at most ${b} tall`)}}return f.sort((u,b)=>b.level-u.level),{groupedRooms:s,totalPrice:l,levelRequirements:f,extent:[c,d],errors:k}},pt=t=>{const e=new URLSearchParams;for(let s=0;s<pe.length;s++){const l=t[s].flat();let o=-1;const a=[];for(let i=0;i<l.length;i++){const h=l[i];if(!h)continue;const k=i-o-1<`${i}.`.length?"-".repeat(Math.max(0,i-o-1)):`${i}.`;a.push(`${k}${h.type}.${h.orientation}`),o=i}const n=a.join("-");e.set(`f${pe[s]}`,n)}return e},Rl=t=>{const e=[];for(let s=0;s<pe.length;s++){const l=vl(),o=t.get(`f${pe[s]}`);if(!o){e.push(l);continue}let a=0,n=0;const i=o.split("-");for(let h=0;h<i.length;h++){const k=i[h].split(".");if(!(k.length<2))if(k.length===3){const f=Number(k[0]),c=Number(k[2]);l[Math.floor(f/te)][f%te]={type:k[1],orientation:c},a=h,n=f}else{const f=n+(h-a),c=Number(k[1]);l[Math.floor(f/te)][f%te]={type:k[0],orientation:c}}}e.push(l)}return e};function Xt(t,e,s){const l=t.slice();return l[26]=e[s].type,l[27]=e[s].rooms,l}function Gt(t,e,s){const l=t.slice();return l[30]=e[s],l}function Zt(t,e,s){const l=t.slice();return l[33]=e[s],l}function Kt(t,e,s){const l=t.slice();return l[36]=e[s],l[11]=s,l}function Qt(t,e,s){const l=t.slice();return l[43]=e[s][0],l[26]=e[s][1],l}function gt(t){var i;const e=t.slice(),s=e[4];e[38]=s;const l=100/e[10].length;e[39]=l;const o=e[3];e[40]=o;const a=100/e[10][e[38]].length;e[41]=a;const n=(i=e[1][e[0]-1])==null?void 0:i[e[38]][e[40]];return e[42]=n,e}function Jt(t,e,s){const l=t.slice();return l[46]=e[s],l[38]=s,l}function $t(t,e,s){const l=t.slice();l[48]=e[s],l[40]=s;const o=l[40]===l[3]&&l[38]===l[4];return l[49]=o,l}function xt(t,e,s){const l=t.slice();return l[51]=e[s].name,l[52]=e[s].connected,l}function Sl(t){var l;const e=t.slice(),s=(l=e[1][e[0]-1])==null?void 0:l[e[38]][e[40]];return e[42]=s,e}function el(t){let e,s=t[42]&&tl(t);return{c(){e=m("div"),s&&s.c(),this.h()},l(l){e=p(l,"DIV",{class:!0});var o=g(e);s&&s.l(o),o.forEach(_),this.h()},h(){I(e,"class","content svelte-1sxsjzc"),he(e,"below",!!t[42]),he(e,"supported",t[42]&&!t[42].open)},m(l,o){C(l,e,o),s&&s.m(e,null)},p(l,o){l[42]?s?s.p(l,o):(s=tl(l),s.c(),s.m(e,null)):s&&(s.d(1),s=null),o[0]&3&&he(e,"below",!!l[42]),o[0]&3&&he(e,"supported",l[42]&&!l[42].open)},d(l){l&&_(e),s&&s.d()}}}function Dl(t){let e,s,l,o,a=t[48].name+"",n,i,h,k=t[48].doors,f=[];for(let c=0;c<k.length;c+=1)f[c]=ll(xt(t,k,c));return{c(){e=m("div"),s=D(),l=m("div"),o=m("div"),n=R(a),i=D();for(let c=0;c<f.length;c+=1)f[c].c();h=Ft(),this.h()},l(c){e=p(c,"DIV",{class:!0}),g(e).forEach(_),s=N(c),l=p(c,"DIV",{class:!0});var d=g(l);o=p(d,"DIV",{class:!0});var u=g(o);n=S(u,a),u.forEach(_),d.forEach(_),i=N(c);for(let b=0;b<f.length;b+=1)f[b].l(c);h=Ft(),this.h()},h(){I(e,"class","marker svelte-1sxsjzc"),I(o,"class","title svelte-1sxsjzc"),I(l,"class","content svelte-1sxsjzc"),x(l,"background-color",t[48].bg)},m(c,d){C(c,e,d),C(c,s,d),C(c,l,d),r(l,o),r(o,n),C(c,i,d);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(c,d);C(c,h,d)},p(c,d){if(d[0]&1024&&a!==(a=c[48].name+"")&&J(n,a),d[0]&1024&&x(l,"background-color",c[48].bg),d[0]&1024){k=c[48].doors;let u;for(u=0;u<k.length;u+=1){const b=xt(c,k,u);f[u]?f[u].p(b,d):(f[u]=ll(b),f[u].c(),f[u].m(h.parentNode,h))}for(;u<f.length;u+=1)f[u].d(1);f.length=k.length}},d(c){c&&_(e),c&&_(s),c&&_(l),c&&_(i),ve(f,c),c&&_(h)}}}function tl(t){let e,s=t[42].name+"",l;return{c(){e=m("div"),l=R(s),this.h()},l(o){e=p(o,"DIV",{class:!0});var a=g(e);l=S(a,s),a.forEach(_),this.h()},h(){I(e,"class","title svelte-1sxsjzc")},m(o,a){C(o,e,a),r(e,l)},p(o,a){a[0]&3&&s!==(s=o[42].name+"")&&J(l,s)},d(o){o&&_(e)}}}function ll(t){let e,s;return{c(){e=m("div"),this.h()},l(l){e=p(l,"DIV",{class:!0}),g(e).forEach(_),this.h()},h(){I(e,"class",s="door "+t[51]+" svelte-1sxsjzc"),he(e,"connected",t[52])},m(l,o){C(l,e,o)},p(l,o){o[0]&1024&&s!==(s="door "+l[51]+" svelte-1sxsjzc")&&I(e,"class",s),o[0]&1024&&he(e,"connected",l[52])},d(l){l&&_(e)}}}function sl(t){let e,s,l,o;function a(c,d){return c[48]!==null?Dl:el}function n(c,d){return d===el?Sl(c):c}let i=a(t),h=i(n(t,i));function k(){return t[13](t[40],t[38])}function f(){return t[14](t[40],t[38])}return{c(){e=m("div"),h.c(),this.h()},l(c){e=p(c,"DIV",{class:!0});var d=g(e);h.l(d),d.forEach(_),this.h()},h(){var c;I(e,"class",s="cell "+(((c=t[48])==null?void 0:c.orientation)||"")+" svelte-1sxsjzc"),he(e,"selected",t[49])},m(c,d){C(c,e,d),h.m(e,null),l||(o=[ne(e,"click",k),ne(e,"keypress",f)],l=!0)},p(c,d){var u;t=c,i===(i=a(t))&&h?h.p(n(t,i),d):(h.d(1),h=i(n(t,i)),h&&(h.c(),h.m(e,null))),d[0]&1024&&s!==(s="cell "+(((u=t[48])==null?void 0:u.orientation)||"")+" svelte-1sxsjzc")&&I(e,"class",s),d[0]&1048&&he(e,"selected",t[49])},d(c){c&&_(e),h.d(),l=!1,jt(o)}}}function ol(t){let e,s=t[46],l=[];for(let o=0;o<s.length;o+=1)l[o]=sl($t(t,s,o));return{c(){e=m("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=p(o,"DIV",{class:!0});var a=g(e);for(let n=0;n<l.length;n+=1)l[n].l(a);a.forEach(_),this.h()},h(){I(e,"class","row svelte-1sxsjzc")},m(o,a){C(o,e,a);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(e,null)},p(o,a){if(a[0]&1083){s=o[46];let n;for(n=0;n<s.length;n+=1){const i=$t(o,s,n);l[n]?l[n].p(i,a):(l[n]=sl(i),l[n].c(),l[n].m(e,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=s.length}},d(o){o&&_(e),ve(l,o)}}}function nl(t){let e,s;function l(i,h){return i[11]>0&&(!i[42]||i[42].open)?yl:Nl}let o=l(t),a=o(t),n=t[10][t[38]][t[40]]&&al(t);return{c(){e=m("div"),a.c(),s=D(),n&&n.c(),this.h()},l(i){e=p(i,"DIV",{class:!0});var h=g(e);a.l(h),s=N(h),n&&n.l(h),h.forEach(_),this.h()},h(){I(e,"class","popup svelte-1sxsjzc"),x(e,"top",t[38]<te-2?`${t[39]*(t[38]+1)}%`:""),x(e,"bottom",t[38]>=te-2?`${t[39]*(te-t[38])}%`:""),x(e,"left",t[40]<ce-2?`${t[41]*t[40]}%`:""),x(e,"right",t[40]>=ce-2?`${t[41]*(ce-t[40]-1)}%`:"")},m(i,h){C(i,e,h),a.m(e,null),r(e,s),n&&n.m(e,null)},p(i,h){o===(o=l(i))&&a?a.p(i,h):(a.d(1),a=o(i),a&&(a.c(),a.m(e,s))),i[10][i[38]][i[40]]?n?n.p(i,h):(n=al(i),n.c(),n.m(e,null)):n&&(n.d(1),n=null),h[0]&1040&&x(e,"top",i[38]<te-2?`${i[39]*(i[38]+1)}%`:""),h[0]&1040&&x(e,"bottom",i[38]>=te-2?`${i[39]*(te-i[38])}%`:""),h[0]&1048&&x(e,"left",i[40]<ce-2?`${i[41]*i[40]}%`:""),h[0]&1048&&x(e,"right",i[40]>=ce-2?`${i[41]*(ce-i[40]-1)}%`:"")},d(i){i&&_(e),a.d(),n&&n.d()}}}function Nl(t){let e,s,l,o,a,n,i=Et,h=[];for(let f=0;f<i.length;f+=1)h[f]=rl(Qt(t,i,f));function k(...f){return t[15](t[40],t[38],...f)}return{c(){e=m("select"),s=m("option"),l=R("Pick a room...");for(let f=0;f<h.length;f+=1)h[f].c();this.h()},l(f){e=p(f,"SELECT",{class:!0});var c=g(e);s=p(c,"OPTION",{});var d=g(s);l=S(d,"Pick a room..."),d.forEach(_);for(let u=0;u<h.length;u+=1)h[u].l(c);c.forEach(_),this.h()},h(){s.__value="",s.value=s.__value,s.disabled=!0,s.selected=!0,I(e,"class","svelte-1sxsjzc")},m(f,c){var d;C(f,e,c),r(e,s),r(s,l);for(let u=0;u<h.length;u+=1)h[u]&&h[u].m(e,null);Ge(e,((d=t[10][t[38]][t[40]])==null?void 0:d.type)||""),a||(n=ne(e,"change",k),a=!0)},p(f,c){var d,u;if(t=f,c&0){i=Et;let b;for(b=0;b<i.length;b+=1){const M=Qt(t,i,b);h[b]?h[b].p(M,c):(h[b]=rl(M),h[b].c(),h[b].m(e,null))}for(;b<h.length;b+=1)h[b].d(1);h.length=i.length}c[0]&1048&&o!==(o=((d=t[10][t[38]][t[40]])==null?void 0:d.type)||"")&&Ge(e,((u=t[10][t[38]][t[40]])==null?void 0:u.type)||"")},d(f){f&&_(e),ve(h,f),a=!1,n()}}}function yl(t){let e,s;return{c(){e=m("p"),s=R("There is no supporting room below!"),this.h()},l(l){e=p(l,"P",{class:!0});var o=g(e);s=S(o,"There is no supporting room below!"),o.forEach(_),this.h()},h(){I(e,"class","svelte-1sxsjzc")},m(l,o){C(l,e,o),r(e,s)},p:Oe,d(l){l&&_(e)}}}function rl(t){let e,s=t[26].name+"",l;return{c(){e=m("option"),l=R(s),this.h()},l(o){e=p(o,"OPTION",{});var a=g(e);l=S(a,s),a.forEach(_),this.h()},h(){e.__value=t[43],e.value=e.__value},m(o,a){C(o,e,a),r(e,l)},p:Oe,d(o){o&&_(e)}}}function al(t){let e,s,l,o,a,n,i;function h(){return t[16](t[40],t[38])}function k(){return t[17](t[40],t[38])}return{c(){e=m("button"),s=m("i"),l=D(),o=m("button"),a=m("i"),this.h()},l(f){e=p(f,"BUTTON",{class:!0});var c=g(e);s=p(c,"I",{class:!0}),g(s).forEach(_),c.forEach(_),l=N(f),o=p(f,"BUTTON",{class:!0});var d=g(o);a=p(d,"I",{class:!0}),g(a).forEach(_),d.forEach(_),this.h()},h(){I(s,"class","icofont-ui-rotation"),I(e,"class","rotate svelte-1sxsjzc"),I(a,"class","icofont-ui-delete"),I(o,"class","remove svelte-1sxsjzc")},m(f,c){C(f,e,c),r(e,s),C(f,l,c),C(f,o,c),r(o,a),n||(i=[ne(e,"click",At(h)),ne(o,"click",At(k))],n=!0)},p(f,c){t=f},d(f){f&&_(e),f&&_(l),f&&_(o),n=!1,jt(i)}}}function il(t){let e,s,l=t[36]+"",o;return{c(){e=m("option"),s=R("Floor "),o=R(l),this.h()},l(a){e=p(a,"OPTION",{});var n=g(e);s=S(n,"Floor "),o=S(n,l),n.forEach(_),this.h()},h(){e.__value=t[11],e.value=e.__value},m(a,n){C(a,e,n),r(e,s),r(e,o)},p:Oe,d(a){a&&_(e)}}}function cl(t){let e,s=t[33]+"",l;return{c(){e=m("div"),l=R(s),this.h()},l(o){e=p(o,"DIV",{class:!0});var a=g(e);l=S(a,s),a.forEach(_),this.h()},h(){I(e,"class","alert error svelte-1sxsjzc")},m(o,a){C(o,e,a),r(e,l)},p(o,a){a[0]&512&&s!==(s=o[33]+"")&&J(l,s)},d(o){o&&_(e)}}}function hl(t){let e,s,l,o;return{c(){e=m("button"),s=m("i"),this.h()},l(a){e=p(a,"BUTTON",{class:!0});var n=g(e);s=p(n,"I",{class:!0}),g(s).forEach(_),n.forEach(_),this.h()},h(){I(s,"class","icofont-info-circle"),I(e,"class","small")},m(a,n){C(a,e,n),r(e,s),l||(o=ne(e,"click",t[22]),l=!0)},p:Oe,d(a){a&&_(e),l=!1,o()}}}function fl(t){let e,s,l,o,a,n,i,h,k,f,c,d,u,b,M,H,V,y=t[9].levelRequirements,T=[];for(let O=0;O<y.length;O+=1)T[O]=ul(Gt(t,y,O));return{c(){e=m("div"),s=m("table"),l=m("thead"),o=m("tr"),a=m("th"),n=R("Requirement"),i=D(),h=m("th"),k=R("Current"),f=D(),c=m("th"),d=R("Limit"),u=D(),b=m("th"),M=R("Min. Level"),H=D(),V=m("tbody");for(let O=0;O<T.length;O+=1)T[O].c();this.h()},l(O){e=p(O,"DIV",{});var B=g(e);s=p(B,"TABLE",{class:!0});var L=g(s);l=p(L,"THEAD",{});var z=g(l);o=p(z,"TR",{});var A=g(o);a=p(A,"TH",{class:!0});var se=g(a);n=S(se,"Requirement"),se.forEach(_),i=N(A),h=p(A,"TH",{class:!0});var re=g(h);k=S(re,"Current"),re.forEach(_),f=N(A),c=p(A,"TH",{class:!0});var ee=g(c);d=S(ee,"Limit"),ee.forEach(_),u=N(A),b=p(A,"TH",{class:!0});var ae=g(b);M=S(ae,"Min. Level"),ae.forEach(_),A.forEach(_),z.forEach(_),H=N(L),V=p(L,"TBODY",{});var w=g(V);for(let P=0;P<T.length;P+=1)T[P].l(w);w.forEach(_),L.forEach(_),B.forEach(_),this.h()},h(){I(a,"class","svelte-1sxsjzc"),I(h,"class","svelte-1sxsjzc"),I(c,"class","svelte-1sxsjzc"),I(b,"class","svelte-1sxsjzc"),I(s,"class","svelte-1sxsjzc")},m(O,B){C(O,e,B),r(e,s),r(s,l),r(l,o),r(o,a),r(a,n),r(o,i),r(o,h),r(h,k),r(o,f),r(o,c),r(c,d),r(o,u),r(o,b),r(b,M),r(s,H),r(s,V);for(let L=0;L<T.length;L+=1)T[L]&&T[L].m(V,null)},p(O,B){if(B[0]&512){y=O[9].levelRequirements;let L;for(L=0;L<y.length;L+=1){const z=Gt(O,y,L);T[L]?T[L].p(z,B):(T[L]=ul(z),T[L].c(),T[L].m(V,null))}for(;L<T.length;L+=1)T[L].d(1);T.length=y.length}},d(O){O&&_(e),ve(T,O)}}}function ul(t){let e,s,l=t[30].name+"",o,a,n,i=t[30].value+"",h,k,f,c=t[30].limit+"",d,u,b,M=t[30].level+"",H,V;return{c(){e=m("tr"),s=m("td"),o=R(l),a=D(),n=m("td"),h=R(i),k=D(),f=m("td"),d=R(c),u=D(),b=m("td"),H=R(M),V=D(),this.h()},l(y){e=p(y,"TR",{});var T=g(e);s=p(T,"TD",{class:!0});var O=g(s);o=S(O,l),O.forEach(_),a=N(T),n=p(T,"TD",{class:!0});var B=g(n);h=S(B,i),B.forEach(_),k=N(T),f=p(T,"TD",{class:!0});var L=g(f);d=S(L,c),L.forEach(_),u=N(T),b=p(T,"TD",{class:!0});var z=g(b);H=S(z,M),z.forEach(_),V=N(T),T.forEach(_),this.h()},h(){I(s,"class","svelte-1sxsjzc"),I(n,"class","svelte-1sxsjzc"),I(f,"class","svelte-1sxsjzc"),I(b,"class","svelte-1sxsjzc"),he(e,"max",t[30].level===t[9].levelRequirements[0].level)},m(y,T){C(y,e,T),r(e,s),r(s,o),r(e,a),r(e,n),r(n,h),r(e,k),r(e,f),r(f,d),r(e,u),r(e,b),r(b,H),r(e,V)},p(y,T){T[0]&512&&l!==(l=y[30].name+"")&&J(o,l),T[0]&512&&i!==(i=y[30].value+"")&&J(h,i),T[0]&512&&c!==(c=y[30].limit+"")&&J(d,c),T[0]&512&&M!==(M=y[30].level+"")&&J(H,M),T[0]&512&&he(e,"max",y[30].level===y[9].levelRequirements[0].level)},d(y){y&&_(e)}}}function _l(t){let e,s,l=t[26].name+"",o,a,n,i=t[26].minLvl+"",h,k,f,c=t[26].cost+"",d,u,b,M=(t[27].length||"-")+"",H,V,y,T=(t[27].length>0?t[27].length*t[26].cost:"-")+"",O,B;return{c(){e=m("tr"),s=m("td"),o=R(l),a=D(),n=m("td"),h=R(i),k=D(),f=m("td"),d=R(c),u=D(),b=m("td"),H=R(M),V=D(),y=m("td"),O=R(T),B=D(),this.h()},l(L){e=p(L,"TR",{});var z=g(e);s=p(z,"TD",{class:!0});var A=g(s);o=S(A,l),A.forEach(_),a=N(z),n=p(z,"TD",{class:!0});var se=g(n);h=S(se,i),se.forEach(_),k=N(z),f=p(z,"TD",{class:!0});var re=g(f);d=S(re,c),re.forEach(_),u=N(z),b=p(z,"TD",{class:!0});var ee=g(b);H=S(ee,M),ee.forEach(_),V=N(z),y=p(z,"TD",{class:!0});var ae=g(y);O=S(ae,T),ae.forEach(_),B=N(z),z.forEach(_),this.h()},h(){I(s,"class","svelte-1sxsjzc"),I(n,"class","number svelte-1sxsjzc"),I(f,"class","number svelte-1sxsjzc"),I(b,"class","number svelte-1sxsjzc"),I(y,"class","number svelte-1sxsjzc")},m(L,z){C(L,e,z),r(e,s),r(s,o),r(e,a),r(e,n),r(n,h),r(e,k),r(e,f),r(f,d),r(e,u),r(e,b),r(b,H),r(e,V),r(e,y),r(y,O),r(e,B)},p(L,z){z[0]&512&&l!==(l=L[26].name+"")&&J(o,l),z[0]&512&&i!==(i=L[26].minLvl+"")&&J(h,i),z[0]&512&&c!==(c=L[26].cost+"")&&J(d,c),z[0]&512&&M!==(M=(L[27].length||"-")+"")&&J(H,M),z[0]&512&&T!==(T=(L[27].length>0?L[27].length*L[26].cost:"-")+"")&&J(O,T)},d(L){L&&_(e)}}}function Ol(t){var Lt;let e,s,l,o,a,n,i,h,k,f,c,d,u,b,M,H,V,y,T,O,B,L,z,A,se,re,ee,ae,w,P,oe,be,Ze,qe=t[9].totalPrice+"",We,Ke,_e,Qe,Pe=t[9].extent[0]+"",Ye,Je,Ve=t[9].extent[1]+"",Be,$e,fe,xe,Me=(((Lt=t[9].levelRequirements[0])==null?void 0:Lt.level)||0)+"",Ae,et,tt,Fe,Ee,lt,st,de,He,le,ke,ot,nt,Te,rt,at,je,it,ct,Ie,ht,ft,Le,ut,_t,ze,dt,It,Re=t[10],F=[];for(let v=0;v<Re.length;v+=1)F[v]=ol(Jt(t,Re,v));let Z=t[3]!==null&&t[4]!==null&&nl(gt(t)),Se=pe,U=[];for(let v=0;v<Se.length;v+=1)U[v]=il(Kt(t,Se,v));let De=t[9].errors,X=[];for(let v=0;v<De.length;v+=1)X[v]=cl(Zt(t,De,v));let K=t[9].levelRequirements.length>0&&hl(t),Q=t[2]&&t[9].levelRequirements.length>0&&fl(t),Ne=t[9].groupedRooms,G=[];for(let v=0;v<Ne.length;v+=1)G[v]=_l(Xt(t,Ne,v));return{c(){e=m("div"),s=m("div"),l=m("div");for(let v=0;v<F.length;v+=1)F[v].c();o=D(),Z&&Z.c(),a=D(),n=m("div"),i=m("h2"),h=R("Floor"),k=D(),f=m("div"),c=m("div"),d=m("button"),u=m("i"),M=D(),H=m("div"),V=m("select");for(let v=0;v<U.length;v+=1)U[v].c();y=D(),T=m("button"),O=R("Reset this Floor"),B=D(),L=m("div"),z=m("button"),A=m("i"),re=D(),ee=m("h2"),ae=R("Info"),w=D(),P=m("div");for(let v=0;v<X.length;v+=1)X[v].c();oe=D(),be=m("div"),Ze=R("Cost: "),We=R(qe),Ke=D(),_e=m("div"),Qe=R("Extent: "),Ye=R(Pe),Je=R("x"),Be=R(Ve),$e=D(),fe=m("div"),xe=R("Level: "),Ae=R(Me),et=D(),K&&K.c(),tt=D(),Q&&Q.c(),Fe=D(),Ee=m("h2"),lt=R("Rooms"),st=D(),de=m("table"),He=m("thead"),le=m("tr"),ke=m("th"),ot=R("Type"),nt=D(),Te=m("th"),rt=R("Level"),at=D(),je=m("th"),it=R("Cost"),ct=D(),Ie=m("th"),ht=R("Amount"),ft=D(),Le=m("th"),ut=R("Total"),_t=D(),ze=m("tbody");for(let v=0;v<G.length;v+=1)G[v].c();this.h()},l(v){e=p(v,"DIV",{class:!0});var W=g(e);s=p(W,"DIV",{class:!0});var Y=g(s);l=p(Y,"DIV",{class:!0});var E=g(l);for(let $=0;$<F.length;$+=1)F[$].l(E);o=N(E),Z&&Z.l(E),E.forEach(_),Y.forEach(_),W.forEach(_),a=N(v),n=p(v,"DIV",{class:!0});var q=g(n);i=p(q,"H2",{class:!0});var zt=g(i);h=S(zt,"Floor"),zt.forEach(_),k=N(q),f=p(q,"DIV",{});var ye=g(f);c=p(ye,"DIV",{style:!0});var Rt=g(c);d=p(Rt,"BUTTON",{});var St=g(d);u=p(St,"I",{class:!0}),g(u).forEach(_),St.forEach(_),Rt.forEach(_),M=N(ye),H=p(ye,"DIV",{style:!0});var Ue=g(H);V=p(Ue,"SELECT",{style:!0});var Dt=g(V);for(let $=0;$<U.length;$+=1)U[$].l(Dt);Dt.forEach(_),y=N(Ue),T=p(Ue,"BUTTON",{});var Nt=g(T);O=S(Nt,"Reset this Floor"),Nt.forEach(_),Ue.forEach(_),B=N(ye),L=p(ye,"DIV",{});var yt=g(L);z=p(yt,"BUTTON",{});var Ot=g(z);A=p(Ot,"I",{class:!0}),g(A).forEach(_),Ot.forEach(_),yt.forEach(_),ye.forEach(_),re=N(q),ee=p(q,"H2",{class:!0});var qt=g(ee);ae=S(qt,"Info"),qt.forEach(_),w=N(q),P=p(q,"DIV",{class:!0});var Pt=g(P);for(let $=0;$<X.length;$+=1)X[$].l(Pt);Pt.forEach(_),oe=N(q),be=p(q,"DIV",{});var vt=g(be);Ze=S(vt,"Cost: "),We=S(vt,qe),vt.forEach(_),Ke=N(q),_e=p(q,"DIV",{});var we=g(_e);Qe=S(we,"Extent: "),Ye=S(we,Pe),Je=S(we,"x"),Be=S(we,Ve),we.forEach(_),$e=N(q),fe=p(q,"DIV",{});var Ce=g(fe);xe=S(Ce,"Level: "),Ae=S(Ce,Me),et=N(Ce),K&&K.l(Ce),Ce.forEach(_),tt=N(q),Q&&Q.l(q),Fe=N(q),Ee=p(q,"H2",{class:!0});var Vt=g(Ee);lt=S(Vt,"Rooms"),Vt.forEach(_),st=N(q),de=p(q,"TABLE",{class:!0});var Xe=g(de);He=p(Xe,"THEAD",{});var Mt=g(He);le=p(Mt,"TR",{});var ie=g(le);ke=p(ie,"TH",{class:!0});var Ht=g(ke);ot=S(Ht,"Type"),Ht.forEach(_),nt=N(ie),Te=p(ie,"TH",{class:!0});var wt=g(Te);rt=S(wt,"Level"),wt.forEach(_),at=N(ie),je=p(ie,"TH",{class:!0});var Ct=g(je);it=S(Ct,"Cost"),Ct.forEach(_),ct=N(ie),Ie=p(ie,"TH",{class:!0});var Wt=g(Ie);ht=S(Wt,"Amount"),Wt.forEach(_),ft=N(ie),Le=p(ie,"TH",{class:!0});var Yt=g(Le);ut=S(Yt,"Total"),Yt.forEach(_),ie.forEach(_),Mt.forEach(_),_t=N(Xe),ze=p(Xe,"TBODY",{});var Bt=g(ze);for(let $=0;$<G.length;$+=1)G[$].l(Bt);Bt.forEach(_),Xe.forEach(_),q.forEach(_),this.h()},h(){I(l,"class","grid svelte-1sxsjzc"),I(s,"class","map svelte-1sxsjzc"),I(e,"class","container svelte-1sxsjzc"),I(i,"class","svelte-1sxsjzc"),I(u,"class","icofont-arrow-up"),d.disabled=b=t[11]>=Tt,x(c,"margin-bottom","8px"),x(V,"margin-right","8px"),t[0]===void 0&&El(()=>t[19].call(V)),x(H,"display","flex"),x(H,"flex-direction","row"),x(H,"margin-bottom","8px"),I(A,"class","icofont-arrow-down"),z.disabled=se=t[11]<=kt,I(ee,"class","svelte-1sxsjzc"),I(P,"class","alerts svelte-1sxsjzc"),I(Ee,"class","svelte-1sxsjzc"),I(ke,"class","svelte-1sxsjzc"),I(Te,"class","svelte-1sxsjzc"),I(je,"class","svelte-1sxsjzc"),I(Ie,"class","svelte-1sxsjzc"),I(Le,"class","svelte-1sxsjzc"),I(de,"class","svelte-1sxsjzc"),I(n,"class","stats svelte-1sxsjzc")},m(v,W){C(v,e,W),r(e,s),r(s,l);for(let Y=0;Y<F.length;Y+=1)F[Y]&&F[Y].m(l,null);r(l,o),Z&&Z.m(l,null),C(v,a,W),C(v,n,W),r(n,i),r(i,h),r(n,k),r(n,f),r(f,c),r(c,d),r(d,u),r(f,M),r(f,H),r(H,V);for(let Y=0;Y<U.length;Y+=1)U[Y]&&U[Y].m(V,null);Ge(V,t[0],!0),r(H,y),r(H,T),r(T,O),r(f,B),r(f,L),r(L,z),r(z,A),r(n,re),r(n,ee),r(ee,ae),r(n,w),r(n,P);for(let Y=0;Y<X.length;Y+=1)X[Y]&&X[Y].m(P,null);r(n,oe),r(n,be),r(be,Ze),r(be,We),r(n,Ke),r(n,_e),r(_e,Qe),r(_e,Ye),r(_e,Je),r(_e,Be),r(n,$e),r(n,fe),r(fe,xe),r(fe,Ae),r(fe,et),K&&K.m(fe,null),r(n,tt),Q&&Q.m(n,null),r(n,Fe),r(n,Ee),r(Ee,lt),r(n,st),r(n,de),r(de,He),r(He,le),r(le,ke),r(ke,ot),r(le,nt),r(le,Te),r(Te,rt),r(le,at),r(le,je),r(je,it),r(le,ct),r(le,Ie),r(Ie,ht),r(le,ft),r(le,Le),r(Le,ut),r(de,_t),r(de,ze);for(let Y=0;Y<G.length;Y+=1)G[Y]&&G[Y].m(ze,null);dt||(It=[ne(d,"click",t[18]),ne(V,"change",t[19]),ne(T,"click",t[20]),ne(z,"click",t[21]),ne(n,"click",t[23]),ne(n,"keypress",t[24])],dt=!0)},p(v,W){var Y;if(W[0]&1083){Re=v[10];let E;for(E=0;E<Re.length;E+=1){const q=Jt(v,Re,E);F[E]?F[E].p(q,W):(F[E]=ol(q),F[E].c(),F[E].m(l,o))}for(;E<F.length;E+=1)F[E].d(1);F.length=Re.length}if(v[3]!==null&&v[4]!==null?Z?Z.p(gt(v),W):(Z=nl(gt(v)),Z.c(),Z.m(l,null)):Z&&(Z.d(1),Z=null),W[0]&2048&&b!==(b=v[11]>=Tt)&&(d.disabled=b),W&0){Se=pe;let E;for(E=0;E<Se.length;E+=1){const q=Kt(v,Se,E);U[E]?U[E].p(q,W):(U[E]=il(q),U[E].c(),U[E].m(V,null))}for(;E<U.length;E+=1)U[E].d(1);U.length=Se.length}if(W[0]&1&&Ge(V,v[0]),W[0]&2048&&se!==(se=v[11]<=kt)&&(z.disabled=se),W[0]&512){De=v[9].errors;let E;for(E=0;E<De.length;E+=1){const q=Zt(v,De,E);X[E]?X[E].p(q,W):(X[E]=cl(q),X[E].c(),X[E].m(P,null))}for(;E<X.length;E+=1)X[E].d(1);X.length=De.length}if(W[0]&512&&qe!==(qe=v[9].totalPrice+"")&&J(We,qe),W[0]&512&&Pe!==(Pe=v[9].extent[0]+"")&&J(Ye,Pe),W[0]&512&&Ve!==(Ve=v[9].extent[1]+"")&&J(Be,Ve),W[0]&512&&Me!==(Me=(((Y=v[9].levelRequirements[0])==null?void 0:Y.level)||0)+"")&&J(Ae,Me),v[9].levelRequirements.length>0?K?K.p(v,W):(K=hl(v),K.c(),K.m(fe,null)):K&&(K.d(1),K=null),v[2]&&v[9].levelRequirements.length>0?Q?Q.p(v,W):(Q=fl(v),Q.c(),Q.m(n,Fe)):Q&&(Q.d(1),Q=null),W[0]&512){Ne=v[9].groupedRooms;let E;for(E=0;E<Ne.length;E+=1){const q=Xt(v,Ne,E);G[E]?G[E].p(q,W):(G[E]=_l(q),G[E].c(),G[E].m(ze,null))}for(;E<G.length;E+=1)G[E].d(1);G.length=Ne.length}},i:Oe,o:Oe,d(v){v&&_(e),ve(F,v),Z&&Z.d(),v&&_(a),v&&_(n),ve(U,v),ve(X,v),K&&K.d(),Q&&Q.d(),ve(G,v),dt=!1,jt(It)}}}function ql(t,e,s){let l,o,a,n,i,h,k,f,c;kl(t,Il,w=>s(25,c=w));let d=Math.max(0,pe.indexOf(0)),u=[],b=!1;Tl(()=>{s(12,u=Rl(c.url.searchParams))});let M=null,H=null;const V=(w,P)=>f(w,P),y=(w,P)=>f(w,P),T=(w,P,oe)=>i(w,P,oe.currentTarget.value),O=(w,P)=>h(w,P),B=(w,P)=>i(w,P,null),L=()=>s(0,d++,d);function z(){d=jl(this),s(0,d)}const A=()=>k(),se=()=>s(0,d--,d),re=()=>s(2,b=!b),ee=()=>f(null,null),ae=()=>f(null,null);return t.$$.update=()=>{t.$$.dirty[0]&1&&s(11,l=pe[d]),t.$$.dirty[0]&4097&&s(8,i=(w,P,oe)=>{oe===null?s(12,u[d][P][w]=null,u):s(12,u[d][P][w]={type:oe,orientation:me.North},u),mt(`?${pt(u)}`,{replaceState:!0})}),t.$$.dirty[0]&4097&&s(7,h=(w,P)=>{const oe=u[d][P][w];oe&&(s(12,u[d][P][w]={...oe,orientation:bt(oe.orientation)},u),mt(`?${pt(u)}`,{replaceState:!0}))}),t.$$.dirty[0]&4097&&s(6,k=()=>{confirm("Are you sure you want to delete all rooms on this floor?")&&(s(12,u[d]=vl(),u),mt(`?${pt(u)}`,{replaceState:!0}))}),t.$$.dirty[0]&4096&&s(1,o=Ll(u)),t.$$.dirty[0]&3&&s(10,a=o[d]||[]),t.$$.dirty[0]&2&&s(9,n=zl(o))},s(5,f=(w,P)=>{s(3,M=w),s(4,H=P)}),[d,o,b,M,H,f,k,h,i,n,a,l,u,V,y,T,O,B,L,z,A,se,re,ee,ae]}class Hl extends pl{constructor(e){super(),gl(this,e,ql,Ol,bl,{},null,[-1,-1])}}export{Hl as default};
